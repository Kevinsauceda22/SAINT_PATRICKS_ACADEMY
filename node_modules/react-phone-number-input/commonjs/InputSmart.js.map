{"version":3,"file":"InputSmart.js","names":["_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_react2","_core","_inputValuePrefix","_parsePhoneNumberCharacter","_useInputKeyDownHandler","_excluded","obj","__esModule","_getRequireWildcardCache","e","WeakMap","r","t","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","_extends","assign","bind","target","arguments","length","source","key","prototype","apply","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","keys","createInput","defaultMetadata","InputSmart","_ref","ref","onKeyDown","country","inputFormat","_ref$metadata","metadata","international","withCountryCallingCode","rest","format","useCallback","value","formatter","AsYouType","prefix","getPrefixForFormattingValueAsPhoneNumber","text","input","template","getTemplate","removePrefixFromFormattedPhoneNumber","_onKeyDown","useInputKeyDownHandler","createElement","parse","parsePhoneNumberCharacter","React","forwardRef","propTypes","PropTypes","string","isRequired","onChange","func","oneOf","object","_default","exports"],"sources":["../source/InputSmart.js"],"sourcesContent":["import React, { useCallback } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport Input from 'input-format/react'\r\nimport { AsYouType } from 'libphonenumber-js/core'\r\n\r\nimport { getPrefixForFormattingValueAsPhoneNumber, removePrefixFromFormattedPhoneNumber } from './helpers/inputValuePrefix.js'\r\nimport parsePhoneNumberCharacter from './helpers/parsePhoneNumberCharacter.js'\r\n\r\nimport useInputKeyDownHandler from './useInputKeyDownHandler.js'\r\n\r\nexport function createInput(defaultMetadata)\r\n{\r\n\t/**\r\n\t * `InputSmart` is a \"smarter\" implementation of a `Component`\r\n\t * that can be passed to `<PhoneInput/>`. It parses and formats\r\n\t * the user's and maintains the caret's position in the process.\r\n\t * The caret positioning is maintained using `input-format` library.\r\n\t * Relies on being run in a DOM environment for calling caret positioning functions.\r\n\t */\r\n\tfunction InputSmart({\r\n\t\tonKeyDown,\r\n\t\tcountry,\r\n\t\tinputFormat,\r\n\t\tmetadata = defaultMetadata,\r\n\t\t//\r\n\t\t// The rest of the properties listed here are just to get the `rest` props\r\n\t\t// that will be passed to the DOM `<input/>` element.\r\n\t\t//\r\n\t\t// `international` property is deprecated and is not used.\r\n\t\tinternational,\r\n\t\t// `withCountryCallingCode` property is deprecated and is not used.\r\n\t\twithCountryCallingCode,\r\n\t\t...rest\r\n\t}, ref) {\r\n\t\tconst format = useCallback((value) => {\r\n\t\t\t// \"As you type\" formatter.\r\n\t\t\tconst formatter = new AsYouType(country, metadata)\r\n\r\n\t\t\tconst prefix = getPrefixForFormattingValueAsPhoneNumber({\r\n\t\t\t\tinputFormat,\r\n\t\t\t\tcountry,\r\n\t\t\t\tmetadata\r\n\t\t\t})\r\n\r\n\t\t\t// Format the number.\r\n\t\t\tlet text = formatter.input(prefix + value)\r\n\t\t\tlet template = formatter.getTemplate()\r\n\r\n\t\t\tif (prefix) {\r\n\t\t\t\ttext = removePrefixFromFormattedPhoneNumber(text, prefix)\r\n\t\t\t\t// `AsYouType.getTemplate()` can be `undefined`.\r\n\t\t\t\tif (template) {\r\n\t\t\t\t\ttemplate = removePrefixFromFormattedPhoneNumber(template, prefix)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\ttext,\r\n\t\t\t\ttemplate\r\n\t\t\t}\r\n\t\t}, [\r\n\t\t\tcountry,\r\n\t\t\tmetadata\r\n\t\t])\r\n\r\n\t\tconst _onKeyDown = useInputKeyDownHandler({\r\n\t\t\tonKeyDown,\r\n\t\t\tinputFormat\r\n\t\t})\r\n\r\n\t\treturn (\r\n\t\t\t<Input\r\n\t\t\t\t{...rest}\r\n\t\t\t\tref={ref}\r\n\t\t\t\tparse={parsePhoneNumberCharacter}\r\n\t\t\t\tformat={format}\r\n\t\t\t\tonKeyDown={_onKeyDown}\r\n\t\t\t/>\r\n\t\t)\r\n\t}\r\n\r\n\tInputSmart = React.forwardRef(InputSmart)\r\n\r\n\tInputSmart.propTypes = {\r\n\t\t/**\r\n\t\t * The parsed phone number.\r\n\t\t * \"Parsed\" not in a sense of \"E.164\"\r\n\t\t * but rather in a sense of \"having only\r\n\t\t * digits and possibly a leading plus character\".\r\n\t\t * Examples: `\"\"`, `\"+\"`, `\"+123\"`, `\"123\"`.\r\n\t\t */\r\n\t\tvalue: PropTypes.string.isRequired,\r\n\r\n\t\t/**\r\n\t\t * A function of `value: string`.\r\n\t\t * Updates the `value` property.\r\n\t\t */\r\n\t\tonChange: PropTypes.func.isRequired,\r\n\r\n\t\t/**\r\n\t\t * A function of `event: Event`.\r\n\t\t * Handles `keydown` events.\r\n\t\t */\r\n\t\tonKeyDown: PropTypes.func,\r\n\r\n\t\t/**\r\n\t\t * A two-letter country code for formatting `value`\r\n\t\t * as a national phone number (e.g. `(800) 555 35 35`).\r\n\t\t * E.g. \"US\", \"RU\", etc.\r\n\t\t * If no `country` is passed then `value`\r\n\t\t * is formatted as an international phone number.\r\n\t\t * (e.g. `+7 800 555 35 35`)\r\n\t\t * This property should've been called `defaultCountry`\r\n\t\t * because it only applies when the user inputs a phone number in a national format\r\n\t\t * and is completely ignored when the user inputs a phone number in an international format.\r\n\t\t */\r\n\t\tcountry: PropTypes.string,\r\n\r\n\t\t/**\r\n\t\t * The format that the input field value is being input/output in.\r\n\t\t */\r\n\t\tinputFormat : PropTypes.oneOf([\r\n\t\t\t'INTERNATIONAL',\r\n\t\t\t'NATIONAL_PART_OF_INTERNATIONAL',\r\n\t\t\t'NATIONAL',\r\n\t\t\t'INTERNATIONAL_OR_NATIONAL'\r\n\t\t]).isRequired,\r\n\r\n\t\t/**\r\n\t\t * `libphonenumber-js` metadata.\r\n\t\t */\r\n\t\tmetadata: PropTypes.object\r\n\t}\r\n\r\n\treturn InputSmart\r\n}\r\n\r\nexport default createInput()"],"mappings":"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","ignoreList":[]}