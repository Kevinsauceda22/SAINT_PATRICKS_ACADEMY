import{r as m,j as e}from"./index-SVRFFNc9.js";import{C as D}from"./index.esm-DWwMdKxH.js";import{S as r}from"./sweetalert2.esm.all-D3pEHXw3.js";import{E as Se}from"./jspdf.plugin.autotable-gke1D7B3.js";import{l as Ee}from"./logo_saint_patrick-xw7Wl8f3.js";import"./FileSaver.min-DN8zk8MP.js";import{C as De}from"./CContainer-BdNP0s3v.js";import{C as ae,a as F}from"./CRow-Bf67u6lu.js";import{a as j}from"./CButton-D9GPTbB6.js";import{c as Te}from"./cil-plus-D8mtC-W5.js";import{C as He,a as Fe,b as Ae,c as ke}from"./CDropdownToggle-DlfIUTmX.js";import{c as Le}from"./cil-description-MUzg6O3n.js";import{C as h}from"./CInputGroup-D-McUFva.js";import{C as x}from"./CInputGroupText-Cfu0fzaY.js";import{c as Pe}from"./cil-search-CDkY_4k-.js";import{C as f}from"./CFormInput-B_gylY64.js";import{C as q}from"./CFormSelect-CzT7g5tb.js";import{C as ze,a as Re,b as te,c as b,d as Ie,e as v}from"./CTable-98qqrSRH.js";import{c as re}from"./cil-pen-53d2I-C-.js";import{c as Me}from"./cil-ban-DwIGNTsW.js";import{c as Be}from"./cil-check-circle-BlU9eaow.js";import{C as Ue}from"./CPagination-UopCEeNZ.js";import{C as se,a as ie,b as ne,c as ce}from"./CModalHeader-Bhtr3bZe.js";import{C as le}from"./CModalTitle-M2mBvD_5.js";import{C as de}from"./CForm-CYRkMwLo.js";import{c as $e}from"./cil-save-CHBg7z_U.js";import"./CConditionalPortal-DwBsYzTA.js";import"./CFormControlWrapper-OEJgTi6e.js";import"./CFormControlValidation-CtDkyDfm.js";import"./CFormLabel-szm2Dda9.js";import"./CBackdrop-BbuVwMMD.js";const _o=()=>{const[W,pe]=m.useState([]),[U,Y]=m.useState([]),[me,A]=m.useState(!1),[he,k]=m.useState(!1),[p,w]=m.useState({Nombre:"",Descripcion:"",Hora_inicio:"",Hora_final:"",Nombre_seccion:"",Fecha:""}),[d,N]=m.useState({});m.useState({});const[y,ue]=m.useState(""),[S,J]=m.useState(1),[E,xe]=m.useState(10),[_,fe]=m.useState("Nombre_actividad"),[Oe,ge]=m.useState(null),[Ve,Ce]=m.useState(null);m.useEffect(()=>{H()},[]);const H=async(o=0)=>{try{const t=(await(await fetch(`http://74.50.68.87:4000/api/actividades/extracurriculares/${o}`)).json()).map((s,n)=>({...s,originalIndex:n+1}));pe(t)}catch(a){console.error("Error al obtener las actividades extracurriculares:",a)}},Z=async()=>{try{const o=await fetch("http://74.50.68.87:4000/api/secciones/periodo-activo"),a=await o.json();if(console.log("Respuesta del servidor:",a),o.ok){const i=a.map(t=>({...t,SeccionGrado:`${t.Nombre_seccion} - ${t.Nombre_grado}`}));console.log("Secciones procesadas:",i),Y(i)}else console.error("Error al obtener las secciones:",a.message),Y([])}catch(o){console.error("Error al obtener las secciones:",o)}};m.useEffect(()=>{Z()},[]),m.useEffect(()=>{Z()},[]);const L=o=>/(.)\1\1/.test(o),P=o=>/^[a-zA-Z0-9 ,.:;¿?]*$/.test(o),z=new Date,$=z.toISOString().split("T")[0],O=new Date(z.getFullYear()+1,z.getMonth(),z.getDate()).toISOString().split("T")[0],K=o=>{const{Nombre_seccion:a,Nombre_grado:i,Fecha:t,Hora_inicio:s,Hora_final:n}=o,l=new Date(`1970-01-01T${s}:00`).getTime(),u=new Date(`1970-01-01T${n}:00`).getTime();return W.some(C=>{const g=new Date(`1970-01-01T${C.Hora_inicio}:00`).getTime(),T=new Date(`1970-01-01T${C.Hora_final}:00`).getTime();return C.Nombre_seccion===a&&C.Nombre_grado===i&&C.Fecha===t&&(l<T&&u>g||l===g&&u===T)})},c=o=>{o.preventDefault(),r.fire({icon:"warning",title:"Acción bloqueada",text:"Copiar y pegar no está permitido."})},R=(o,a,i)=>{const{Nombre:t,Descripcion:s,Hora_inicio:n,Hora_final:l,Nombre_seccion:u,Fecha:C}=i;t||s||n||l||u||C?r.fire({title:"¿Estás seguro?",text:"Si cierras este formulario, perderás todos los datos ingresados.",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, cerrar",cancelButtonText:"Cancelar"}).then(g=>{g.isConfirmed&&(o(!1),a())}):o(!1)},je=async(o,a)=>{const i=a==="Activa"?"Cancelada":"Activa";if(console.log("ID Actividad:",o),console.log("Estado nuevo:",i),i==="Cancelada")r.fire({title:"Motivo de la cancelación",input:"textarea",inputPlaceholder:"Por favor, ingrese el motivo de la cancelación...",showCancelButton:!0,confirmButtonText:"Enviar",cancelButtonText:"Cancelar",confirmButtonColor:"#4B6251",allowOutsideClick:!1,preConfirm:t=>!t||t.trim()===""?(r.showValidationMessage("El motivo es obligatorio"),!1):/^[a-zA-Z0-9\s]*$/.test(t)?/\s{3,}/.test(t)?(r.showValidationMessage("El motivo no puede contener 3 espacios consecutivos."),!1):/(.)\1\1/.test(t)?(r.showValidationMessage("El motivo no puede contener 3 letras consecutivas repetidas."),!1):t.trim():(r.showValidationMessage("El motivo no puede contener caracteres especiales."),!1),didOpen:t=>{const s=t.querySelector("textarea");s.addEventListener("copy",n=>{n.preventDefault(),r.showValidationMessage("No puedes copiar en este campo.")}),s.addEventListener("paste",n=>{n.preventDefault(),r.showValidationMessage("No puedes pegar en este campo.")}),s.addEventListener("input",n=>{s.value=s.value.toUpperCase(),/\s{3,}/.test(s.value)&&r.showValidationMessage("El motivo no puede contener 3 espacios consecutivos."),/(.)\1\1/.test(s.value)&&r.showValidationMessage("El motivo no puede contener 3 letras consecutivas repetidas."),/[^a-zA-Z0-9\s]/g.test(s.value)&&r.showValidationMessage("El motivo contiene caracteres no permitidos. Solo se permiten letras, números y espacios."),s.value=s.value.replace(/[^a-zA-Z0-9\s]/g,"")})}}).then(async t=>{if(t.isConfirmed){const s=t.value;try{const n=await fetch("http://74.50.68.87:4000/api/actividades/cambiar_estado",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({p_Cod_actividades_extracurriculares:o,p_Estado:i,p_Motivo:s})});if(n.ok){const l=await n.json();r.fire("Estado actualizado",l.mensaje,"success"),H()}else{const l=await n.json();r.fire("Error",l.mensaje||"No se pudo cambiar el estado.","error")}}catch(n){console.error("Error al cambiar el estado:",n),r.fire("Error","Hubo un problema al cambiar el estado.","error")}}});else try{const t=await fetch("http://74.50.68.87:4000/api/actividades/cambiar_estado",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({p_Cod_actividades_extracurriculares:o,p_Estado:i})});if(t.ok){const s=await t.json();r.fire("Estado actualizado",s.mensaje,"success"),H()}else{const s=await t.json();r.fire("Error",s.mensaje||"No se pudo cambiar el estado.","error")}}catch(t){console.error("Error al cambiar el estado:",t),r.fire("Error","Hubo un problema al cambiar el estado.","error")}},V=()=>{w({Nombre:"",Descripcion:"",Hora_inicio:"",Hora_final:"",Nombre_seccion:"",Fecha:""})},G=()=>{N({Nombre_actividad:"",Descripcion:"",Hora_inicio:"",Hora_final:"",Nombre_seccion:"",Fecha:""})},be=()=>{const o=new Se({orientation:"landscape",unit:"mm",format:"a4"}),a=new Image;a.src=Ee,a.onload=()=>{const i=o.internal.pageSize.width,t=o.internal.pageSize.height;o.addImage(a,"PNG",10,10,45,45),o.setFontSize(18),o.setTextColor(0,102,51),o.text("SAINT PATRICK'S ACADEMY",i/2,24,{align:"center"}),o.setFontSize(10),o.setTextColor(100),o.text("Casa Club del periodista, Colonia del Periodista",i/2,32,{align:"center"}),o.text("Teléfono: (504) 2234-8871",i/2,37,{align:"center"}),o.text("Correo: info@saintpatrickacademy.edu",i/2,42,{align:"center"}),o.setFontSize(14),o.setTextColor(0,102,51),o.text("Reporte General de Actividades Extracurriculares",i/2,50,{align:"center"}),o.setLineWidth(.5),o.setDrawColor(0,102,51),o.line(10,55,i-10,55),o.setFontSize(12),o.setTextColor(0),o.text("Listado de Actividades",i/2,65,{align:"center"});const s=["#","Actividad","Descripción","Inicio","Finalización","Sección y Grado","Fecha","Estado"],n=ee.map((g,T)=>{const M=U.find(B=>B.Cod_secciones===g.Codigo_seccion);return[{content:(T+1+(S-1)*E).toString(),styles:{halign:"center"}},{content:(g.Nombre_actividad||"Sin nombre").toUpperCase(),styles:{halign:"left"}},{content:(g.Descripcion||"Sin descripción").toUpperCase(),styles:{halign:"left"}},{content:g.Hora_inicio.toUpperCase(),styles:{halign:"center"}},{content:g.Hora_final.toUpperCase(),styles:{halign:"center"}},{content:(M?M.SeccionGrado:"Sin sección").toUpperCase(),styles:{halign:"left"}},{content:new Date(g.Fecha).toLocaleDateString("es-ES").toUpperCase(),styles:{halign:"center"}},{content:(g.Estado||"Desconocido").toUpperCase(),styles:{halign:"center"}}]});o.autoTable({startY:75,head:[s],body:n,headStyles:{fillColor:[0,102,51],textColor:[255,255,255],fontSize:10,halign:"center"},styles:{fontSize:10,cellPadding:3},alternateRowStyles:{fillColor:[240,248,255]},columnStyles:{1:{halign:"left"},2:{halign:"left"},3:{halign:"left"}},margin:{top:10,bottom:30},didDrawPage:function(g){const T=o.internal.getNumberOfPages(),M=o.internal.getCurrentPageInfo().pageNumber;o.setFontSize(10),o.setTextColor(0,102,51),o.text(`Página ${M} de ${T}`,i-10,t-10,{align:"right"});const B=new Date,we=B.toLocaleDateString("es-HN",{year:"numeric",month:"long",day:"numeric"}),Ne=B.toLocaleTimeString("es-HN",{hour:"2-digit",minute:"2-digit",second:"2-digit"});o.text(`Fecha de generación: ${we} Hora: ${Ne}`,10,t-10)}});const l=o.output("blob"),u=URL.createObjectURL(l);window.open("","_blank").document.write(`
      <html>
        <head><title>Reporte de Actividades Extracurriculares</title></head>
        <body style="margin:0;">
          <iframe width="100%" height="100%" src="${u}" frameborder="0"></iframe>
          <div style="position:fixed;top:10px;right:200px;">
            <button style="background-color: #6c757d; color: white; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer;" 
              onclick="const a = document.createElement('a'); a.href='${u}'; a.download='Reporte_de_Actividades_Extracurriculares.pdf'; a.click();">
              Descargar PDF
            </button>
          </div>
        </body>
      </html>`)},a.onerror=()=>{r.fire("Error","No se pudo cargar el logo.","error")}},ve=async()=>{const{Nombre:o,Descripcion:a,Cod_secciones:i,Hora_inicio:t,Hora_final:s,Fecha:n}=p;if(console.log("Datos para crear actividad:",{Nombre:o,Descripcion:a,Cod_secciones:i,Hora_inicio:t,Hora_final:s,Fecha:n}),!o||!a||!t||!s||!i||!n){r.fire("Error","Todos los campos son requeridos.","error");return}if(isNaN(parseInt(i))){r.fire("Error","La sección seleccionada es inválida.","error");return}if(K(p)){r.fire({icon:"warning",title:"Traslape de actividades",text:"Ya existe una actividad programada en esta sección y horario."});return}try{const l=await fetch("http://74.50.68.87:4000/api/actividades/extracurriculares",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({p_Nombre:o,p_Descripcion:a,p_Hora_inicio:t,p_Hora_final:s,Cod_secciones:parseInt(i),p_Fecha:n})});if(l.ok)r.fire({icon:"success",title:"Creación exitosa",text:"¡Éxito! La actividad ha sido creada correctamente."}),A(!1),H(),V();else{const u=await l.json(),C=u.detalle||u.mensaje||"Error desconocido.";r.fire({icon:"error",title:"Error",text:`Error al crear la actividad. Detalle: ${C}`})}}catch(l){console.error("Error: hubo un problema al crear la actividad:",l),r.fire({icon:"error",title:"Error",text:"Error inesperado al crear la actividad. Por favor, intenta nuevamente."})}},ye=async()=>{const{Fecha:o,Codigo_actividad:a,Nombre_actividad:i,Descripcion:t,Hora_inicio:s,Hora_final:n,Cod_secciones:l}=d;if(!i||!t||!s||!n||!l||!o){r.fire("Error","Todos los campos son requeridos.","error");return}if(K(d)){r.fire({icon:"warning",title:"Traslape de actividades",text:"Error. La actividad ya existe"});return}try{const u=await fetch("http://74.50.68.87:4000/api/actividades/extracurriculares",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({p_Cod_actividad:a,p_Nombre:i,p_Descripcion:t,p_Hora_inicio:s,p_Hora_final:n,p_Cod_secciones:l,p_Fecha:o})});if(u.ok)r.fire({icon:"success",title:"Actualización exitosa",text:"¡Éxito!, La actividad ha sido actualizada correctamente."}),k(!1),H(),G();else{const C=await u.json();r.fire({icon:"error",title:"Error",text:`Error, no se pudo actualizar la actividad. Detalle: ${C.mensaje||"Error en el servidor"}`})}}catch(u){console.error("Error, hubo un problema al actualizar la actividad:",u),r.fire({icon:"error",title:"Error",text:"Error, hubo un problema al actualizar la actividad."})}},_e=o=>{const a=o.Fecha?o.Fecha.split("T")[0]:"";N({...o,Fecha:a,Cod_secciones:o.Codigo_seccion,Nombre_seccion:o.Nombre_seccion,Nombre_grado:o.Nombre_grado}),ge(o.Hora_inicio),Ce(o.Hora_final),k(!0)},I=W.filter(o=>_==="Nombre_actividad"?o.Nombre_actividad.toLowerCase().includes(y.toLowerCase()):_==="Descripcion"?o.Descripcion.toLowerCase().includes(y.toLowerCase()):_==="Hora_inicio"?o.Hora_inicio.toString().toLowerCase().includes(y.toLowerCase()):_==="Hora_final"?o.Hora_final.toString().toLowerCase().includes(y.toLowerCase()):_==="Nombre_seccion"?o.Nombre_seccion.toLowerCase().includes(y.toLowerCase()):_==="Estado"?o.Estado.toLowerCase().includes(y.toLowerCase()):_==="Fecha"?o.Fecha.toString().includes(y):!1).sort((o,a)=>o.Nombre_actividad.localeCompare(a.Nombre_actividad)),Q=S*E,X=Q-E,ee=I.slice(X,Q),oe=o=>{o>0&&o<=Math.ceil(I.length/E)&&J(o)};return e.jsxs(De,{children:[e.jsxs(ae,{className:"align-items-center mb-3",children:[e.jsx(F,{xs:"8",md:"9",children:e.jsx("h1",{className:"mb-0 fw-bold",children:"Listado de Actividades Extracurriculares"})}),e.jsxs(F,{xs:"4",md:"3",className:"text-end d-flex flex-column flex-md-row justify-content-md-end align-items-md-center",children:[e.jsxs(j,{style:{backgroundColor:"#4B6251",color:"white"},className:"mb-3 mb-md-0 me-md-3",onClick:()=>{A(!0)},children:[e.jsx(D,{icon:Te})," Nuevo"]}),e.jsxs(He,{children:[e.jsxs(Fe,{style:{backgroundColor:"#6C8E58",color:"white"},children:[e.jsx(D,{icon:Le})," Reporte"]}),e.jsx(Ae,{children:e.jsx(ke,{onClick:be,style:{color:"#6C8E58",fontWeight:"bold"},children:"Ver Reporte en PDF"})})]})]})]}),e.jsxs(ae,{className:"align-items-center mt-4 mb-3",children:[e.jsx(F,{xs:"12",md:"4",children:e.jsxs(h,{style:{width:"100%"},children:[e.jsx(x,{children:e.jsx(D,{icon:Pe})}),e.jsx(f,{placeholder:"Buscar Actividad...",value:y,onChange:o=>ue(o.target.value)})]})}),e.jsx(F,{xs:"12",md:"4",children:e.jsxs(q,{value:_,onChange:o=>fe(o.target.value),style:{width:"100%"},children:[e.jsx("option",{value:"Nombre_actividad",children:"Nombre de la Actividad"}),e.jsx("option",{value:"Descripcion",children:"Descripción"}),e.jsx("option",{value:"Hora_inicio",children:"Hora de Inicio"}),e.jsx("option",{value:"Hora_final",children:"Hora de Finalización"}),e.jsx("option",{value:"Nombre_seccion",children:"Sección"}),e.jsx("option",{value:"Estado",children:"Estado"}),e.jsx("option",{value:"Fecha",children:"Fecha"})]})}),e.jsx(F,{xs:"12",md:"4",className:"text-md-end mt-2 mt-md-0",children:e.jsx(h,{style:{width:"auto",display:"inline-flex"},children:e.jsxs("div",{className:"d-inline-flex align-items-center",children:[e.jsx("span",{children:"Mostrar "}),e.jsxs(q,{style:{width:"80px",display:"inline-block",textAlign:"center"},onChange:o=>{const a=Number(o.target.value);xe(a),J(1)},value:E,children:[e.jsx("option",{value:"5",children:"5"}),e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"20",children:"20"})]}),e.jsx("span",{children:" registros"})]})})})]}),e.jsx("div",{className:"table-container",style:{height:"300px",overflowY:"auto",marginBottom:"20px"},children:e.jsxs(ze,{striped:!0,bordered:!0,hover:!0,children:[e.jsx(Re,{style:{position:"sticky",top:0,zIndex:1,backgroundColor:"#fff"},children:e.jsxs(te,{children:[e.jsx(b,{style:{width:"5%"},className:"text-center",children:"#"}),e.jsx(b,{style:{width:"25%",wordBreak:"break-word"},children:"Actividad"}),e.jsx(b,{style:{width:"30%",wordBreak:"break-word"},children:"Descripción"}),e.jsx(b,{style:{width:"10%"},className:"text-center",children:" Inicio "}),e.jsx(b,{style:{width:"10%"},className:"text-center",children:" Finalización "}),e.jsx(b,{style:{width:"20%"},className:"text-center",children:" Sección y Grado "}),e.jsx(b,{style:{width:"10%"},className:"text-center",children:" Fecha "}),e.jsx(b,{style:{width:"10%"},className:"text-center",children:" Estado "}),e.jsx(b,{style:{width:"5%"},className:"text-center",children:" Acciones "})]})}),e.jsx(Ie,{children:ee.map((o,a)=>{const i=X+a+1,t=U.find(s=>s.Cod_secciones===o.Codigo_seccion);return e.jsxs(te,{children:[e.jsx(v,{className:"text-center",children:i}),e.jsx(v,{style:{textTransform:"uppercase",wordBreak:"break-word",width:"15%"},children:o.Nombre_actividad}),e.jsx(v,{style:{textTransform:"uppercase",wordBreak:"break-word",width:"30%"},children:o.Descripcion}),e.jsx(v,{className:"text-center",children:o.Hora_inicio}),e.jsx(v,{className:"text-center",children:o.Hora_final}),e.jsx(v,{className:"text-center",style:{textTransform:"uppercase"},children:t?`${t.Nombre_seccion} - ${t.Nombre_grado}`:"Sección no encontrada"}),e.jsx(v,{className:"text-center",children:new Date(o.Fecha).toLocaleDateString("es-ES")}),e.jsx(v,{className:"text-center",children:o.Estado}),e.jsx(v,{className:"text-center",children:e.jsxs("div",{className:"d-flex justify-content-center",children:[e.jsxs(j,{color:"warning",size:"sm",onClick:()=>_e(o),style:{marginRight:"5px",padding:"2px 8px",fontSize:"12px"},children:[e.jsx(D,{icon:re,style:{fontSize:"12px"}})," "]}),e.jsxs(j,{color:o.Estado==="Activa"?"danger":"success",size:"sm",onClick:()=>{if(!o.Codigo_actividad){console.error("La actividad no tiene un ID válido:",o);return}je(o.Codigo_actividad,o.Estado)},style:{padding:"2px 8px",fontSize:"12px",textAlign:"center"},children:[e.jsx(D,{icon:o.Estado==="Activa"?Me:Be,style:{fontSize:"12px",marginRight:"5px"}}),o.Estado==="Activa"?"Cancelar":"Activar"]})]})})]},o.Cod_actividades_extracurriculares)})})]})}),e.jsxs("div",{className:"pagination-container",style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"20px"},children:[e.jsxs(Ue,{"aria-label":"Page navigation",children:[e.jsx(j,{style:{backgroundColor:"#6f8173",color:"#D9EAD3"},disabled:S===1,onClick:()=>oe(S-1),children:"Anterior"}),e.jsx(j,{style:{marginLeft:"10px",backgroundColor:"#6f8173",color:"#D9EAD3"},disabled:S===Math.ceil(I.length/E),onClick:()=>oe(S+1),children:"Siguiente"})]}),e.jsxs("span",{style:{marginLeft:"10px"},children:["Página ",S," de ",Math.ceil(I.length/E)]})]}),e.jsxs(se,{visible:me,backdrop:"static",children:[e.jsxs(ie,{closeButton:!1,children:[e.jsx(le,{children:"Crear Nueva Actividad"}),e.jsx(j,{className:"btn-close","aria-label":"Close",onClick:()=>R(A,V,p)})]}),e.jsx(ne,{children:e.jsxs(de,{children:[e.jsxs(h,{className:"mb-3",children:[e.jsx(x,{children:"Nombre de la Actividad"}),e.jsx(f,{value:p.Nombre,maxLength:50,style:{textTransform:"uppercase"},onPaste:c,onCopy:c,onChange:o=>{const a=o.target.value;if(!P(a)){r.fire({icon:"warning",title:"Caracteres no permitidos",text:"Solo se permiten letras, números y los caracteres , . : ; ¿ ?"});return}if(L(a)){r.fire({icon:"warning",title:"Repetición de letras",text:"No se permite que la misma letra o espacio se repitan consecutivamente."});return}w({...p,Nombre:a})}})]}),e.jsxs(h,{className:"mb-3",children:[e.jsx(x,{children:"Descripción"}),e.jsx(f,{value:p.Descripcion,maxLength:250,style:{textTransform:"uppercase"},onPaste:c,onCopy:c,onChange:o=>{const a=o.target.value;if(!P(a)){r.fire({icon:"warning",title:"Caracteres no permitidos",text:"Solo se permiten letras, números y los caracteres , . : ; ¿ ?"});return}if(L(a)){r.fire({icon:"warning",title:"Repetición de letras",text:"No se permite que la misma letra o espacio se repitan consecutivamente."});return}w({...p,Descripcion:a})}})]}),e.jsxs(h,{className:"mb-3",children:[e.jsx(x,{children:"Hora de inicio"}),e.jsx(f,{type:"time",value:p.Hora_inicio,onPaste:c,onCopy:c,onChange:o=>w({...p,Hora_inicio:o.target.value})})]}),e.jsxs(h,{className:"mb-3",children:[e.jsx(x,{children:"Hora de finalización"}),e.jsx(f,{type:"time",value:p.Hora_final,onPaste:c,onCopy:c,onChange:o=>w({...p,Hora_final:o.target.value})})]}),e.jsxs(h,{className:"mb-3",children:[e.jsx(x,{children:"Sección y Grado"}),e.jsxs(q,{value:p.Cod_secciones,onChange:o=>{const a=parseInt(o.target.value);w({...p,Cod_secciones:a})},children:[e.jsx("option",{value:"",children:"Seleccione una sección y grado"}),U.map(o=>e.jsx("option",{value:o.Cod_secciones,children:o.SeccionGrado},o.Cod_secciones))]})]}),e.jsxs(h,{className:"mb-3",children:[e.jsx(x,{children:"Fecha"}),e.jsx(f,{type:"date",value:p.Fecha,min:$,max:O,onPaste:c,onCopy:c,onChange:o=>{const a=o.target.value;if(a<$||a>O){r.fire({icon:"warning",title:"Fecha fuera de rango",text:`La fecha debe estar entre ${$} y ${O}.`});return}w({...p,Fecha:a})}})]})]})}),e.jsxs(ce,{children:[e.jsx(j,{color:"secondary",onClick:()=>R(A,V,p),children:"Cancelar"}),e.jsxs(j,{style:{backgroundColor:"#4B6251",color:"white"},onClick:ve,children:[e.jsx(D,{icon:$e,style:{marginRight:"5px"}})," Guardar"]})]})]}),e.jsxs(se,{visible:he,backdrop:"static",children:[e.jsxs(ie,{closeButton:!1,children:[e.jsx(le,{children:"Actualizar Actividad"}),e.jsx(j,{className:"btn-close","aria-label":"Close",onClick:()=>R(k,G,d)})]}),e.jsx(ne,{children:e.jsxs(de,{children:[e.jsxs(h,{className:"mb-3",children:[e.jsx(x,{children:"Identificador"}),e.jsx(f,{value:d.Codigo_actividad,readOnly:!0})]}),e.jsxs(h,{className:"mb-3",children:[e.jsx(x,{children:"Nombre de la Actividad"}),e.jsx(f,{value:d.Nombre_actividad,maxLength:50,style:{textTransform:"uppercase"},onPaste:c,onCopy:c,onChange:o=>{const a=o.target.value;if(!P(a)){r.fire({icon:"warning",title:"Caracteres no permitidos",text:"Solo se permiten letras, números y los caracteres , . : ; ¿ ?"});return}if(L(a)){r.fire({icon:"warning",title:"Repetición de letras",text:"No se permite que la misma letra o espacio se repitan consecutivamente."});return}N({...d,Nombre_actividad:a})}})]}),e.jsxs(h,{className:"mb-3",children:[e.jsx(x,{children:"Descripción"}),e.jsx(f,{value:d.Descripcion,maxLength:250,style:{textTransform:"uppercase"},onPaste:c,onCopy:c,onChange:o=>{const a=o.target.value;if(!P(a)){r.fire({icon:"warning",title:"Caracteres no permitidos",text:"Solo se permiten letras, números y los caracteres , . : ; ¿ ?"});return}if(L(a)){r.fire({icon:"warning",title:"Repetición de letras",text:"No se permite que la misma letra o espacio se repitan consecutivamente."});return}N({...d,Descripcion:a})}})]}),e.jsxs(h,{className:"mb-3",children:[e.jsx(x,{children:"Hora de inicio"}),e.jsx(f,{type:"time",value:d.Hora_inicio,onPaste:c,onCopy:c,onChange:o=>N({...d,Hora_inicio:o.target.value})})]}),e.jsxs(h,{className:"mb-3",children:[e.jsx(x,{children:"Hora de finalización"}),e.jsx(f,{type:"time",value:d.Hora_final,onPaste:c,onCopy:c,onChange:o=>N({...d,Hora_final:o.target.value})})]}),e.jsxs(h,{className:"mb-3",children:[e.jsx(x,{children:"Sección"}),e.jsx(f,{value:d.Nombre_seccion,readOnly:!0})]}),e.jsxs(h,{className:"mb-3",children:[e.jsx(x,{children:"Grado"}),e.jsx(f,{value:d.Nombre_grado,readOnly:!0})]}),e.jsxs(h,{className:"mb-3",children:[e.jsx(x,{children:"Fecha"}),e.jsx(f,{type:"date",value:d.Fecha||"",onPaste:c,onCopy:c,onChange:o=>N({...d,Fecha:o.target.value})})]})]})}),e.jsxs(ce,{children:[e.jsx(j,{color:"secondary",onClick:()=>R(k,G,d),children:"Cancelar"}),e.jsxs(j,{style:{backgroundColor:"#F9B64E",color:"white"},onClick:ye,children:[e.jsx(D,{icon:re,style:{marginRight:"5px"}})," Actualizar"]})]})]})]})};export{_o as default};
