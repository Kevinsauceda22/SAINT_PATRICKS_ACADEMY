import{r as s,x as xr,j as e,h as fe}from"./index-SVRFFNc9.js";import{C as g}from"./index.esm-DWwMdKxH.js";import{S as n}from"./sweetalert2.esm.all-D3pEHXw3.js";import{E as ur}from"./jspdf.plugin.autotable-gke1D7B3.js";import{u as be,w as mr}from"./xlsx-lwdk4T0U.js";import{l as gr}from"./logo_saint_patrick-xw7Wl8f3.js";import{C as fr}from"./CContainer-BdNP0s3v.js";import{C as D,a as N}from"./CRow-Bf67u6lu.js";import{C}from"./CInputGroup-D-McUFva.js";import{C as S}from"./CInputGroupText-Cfu0fzaY.js";import{c as X}from"./cil-search-CDkY_4k-.js";import{C as j}from"./CFormInput-B_gylY64.js";import{a as h}from"./CButton-D9GPTbB6.js";import{c as Z}from"./cil-brush-alt-CV61lKqC.js";import{C as L}from"./CFormSelect-CzT7g5tb.js";import{C as K,a as Q,b as w,c as f,d as U,e as u}from"./CTable-98qqrSRH.js";import{C as ee}from"./CPagination-UopCEeNZ.js";import{c as ue}from"./cil-arrow-left-D66Kb3Zq.js";import{C as Ce,a as je,b as ye,c as _e}from"./CModalHeader-Bhtr3bZe.js";import{C as io}from"./CModalTitle-M2mBvD_5.js";import{C as co}from"./CForm-CYRkMwLo.js";import{C as br}from"./CFormTextarea-CdSXOYWN.js";import{c as Cr}from"./cil-save-CHBg7z_U.js";import{c as lo}from"./cil-pen-53d2I-C-.js";import{c as jr}from"./cil-plus-D8mtC-W5.js";import{C as yr,a as _r,b as Sr,c as ho}from"./CDropdownToggle-DlfIUTmX.js";import{c as vr}from"./cil-description-MUzg6O3n.js";import{c as wr}from"./cil-file-CeQgYs_D.js";import{c as Fr}from"./cil-spreadsheet-CJUvf_vM.js";import{c as Nr}from"./cil-trash-CBbKHhHb.js";import{c as kr}from"./cil-info-CmGCY32x.js";import"./CFormControlWrapper-OEJgTi6e.js";import"./CFormControlValidation-CtDkyDfm.js";import"./CFormLabel-szm2Dda9.js";import"./CBackdrop-BbuVwMMD.js";import"./CConditionalPortal-DwBsYzTA.js";const ma=()=>{const[po,xo]=s.useState([]),[uo,mo]=s.useState([]),[go,fo]=s.useState([]),[y,Se]=s.useState(null),ve=s.useRef(null),[we,bo]=s.useState([]),[Fe,Co]=s.useState([]),[x,Ne]=s.useState(null),[m,ke]=s.useState(null),[jo,G]=s.useState(!1);s.useState(!1),s.useState(!1),s.useState(null);const[i,Ae]=s.useState(null),[yo,_o]=s.useState([]),[me,W]=s.useState([]);s.useState(null),s.useState([]),s.useState(!1);const[d,T]=s.useState({Cod_profesor:"",Cod_ponderacion_ciclo:"",Cod_parcial:"",Nombre_actividad_academica:"",Descripcion:"",Fechayhora_Inicio:"",Fechayhora_Fin:"",Valor:"",Cod_secciones:"",Cod_seccion_asignatura:""}),[Ee,So]=s.useState([]),[Ar,vo]=s.useState([]),[wo,ge]=s.useState(!1),[_,Fo]=s.useState(null);s.useState(0);const[No,oe]=s.useState(!1),[c,A]=s.useState(null),[ko,J]=s.useState(!1);s.useState(""),s.useState(""),s.useState(""),s.useState("");const[De,Er]=s.useState(""),q=me.filter(o=>o.Nombre_actividad_academica.toLowerCase().includes(De.toLowerCase())||o.Descripcion.toLowerCase().includes(De.toLowerCase())),[M,Ao]=s.useState(5),[Te,Pe]=s.useState(""),[z,re]=s.useState(1),[R,Eo]=s.useState(5),[ae,Le]=s.useState(""),[I,te]=s.useState(1),[B,Do]=s.useState(5),[Me,ze]=s.useState(""),[$,se]=s.useState(1),[O,To]=s.useState(5),[Re,Ie]=s.useState(""),[V,ne]=s.useState(1),[H,Po]=s.useState(5),[Be,$e]=s.useState(""),[Y,ie]=s.useState(1);s.useEffect(()=>{const o=localStorage.getItem("token");if(o)try{const a=xr(o);console.log("Token decodificado:",a)}catch(a){console.error("Error al decodificar el token:",a)}const r=async()=>{try{const l=await(await fetch("http://74.50.68.87:4000/api/profesores/VerProfesores")).json();xo(l)}catch(a){console.error("Error al obtener los profesores:",a),n.fire("Error","Hubo un problema al obtener los profesores.","error")}},t=async()=>{try{const b=(await(await fetch("http://74.50.68.87:4000/api/persona/verpersonas")).json()).map(p=>({...p,nombreCompleto:`${p.Nombre} ${p.Segundo_nombre||""} ${p.Primer_apellido||""} ${p.Segundo_Apellido||""}`.trim()}));bo(b)}catch(a){console.error("Error al obtener la lista de personas:",a)}};r(),t(),Vo(),Oo(),Ho()},[]);const P=o=>{if(!we.length)return"Personas no disponibles";const r=we.find(t=>t.cod_persona===o);if(r){const t=r.Nombre||"",a=r.Segundo_nombre||"",l=r.Primer_apellido||"",b=r.Segundo_Apellido||"";return`${t} ${a} ${l} ${b}`.trim()}return"Persona no encontrada"},Lo=async o=>{Se(o);try{const r=await fetch(`http://74.50.68.87:4000/api/secciones/porprofesor/${o.Cod_profesor}`),t=await r.json();r.ok?mo(t):n.fire("Error","No se encontraron secciones para este profesor.","info")}catch(r){console.error("Error al obtener las secciones:",r),n.fire("Error","Hubo un problema al obtener las secciones.","error")}},Mo=async o=>{try{const r=await fetch(`http://74.50.68.87:4000/api/actividadesAcademicas/parciales/${o}`);if(r.ok){const t=await r.json();console.log("Parciales:",t),_o(t)}else console.error("Error al obtener los parciales")}catch(r){console.error("Error al obtener los parciales:",r)}},zo=async(o,r)=>{console.log("Cod_seccion_asignatura:",o),console.log("CodParcial:",r);try{const t=await fetch(`http://74.50.68.87:4000/api/actividadesAcademicas/actividades/${o}/${r}`);if(!t.ok)throw new Error("Error al obtener actividades");const a=await t.json();W(a)}catch(t){console.error("Error al obtener actividades:",t)}},Ro=async o=>{Ne(o);try{const r=await fetch(`http://74.50.68.87:4000/api/secciones_asignaturas/porseccion/${o.Cod_secciones}`),t=await r.json();r.ok?fo(t):n.fire("Error","No se encontraron asignaturas para esta sección.","info")}catch(r){console.error("Error al obtener las asignaturas:",r),n.fire("Error","Hubo un problema al obtener las asignaturas.","error")}},Io=o=>{Ae(o),Mo(o.Cod_seccion_asignatura)},Bo=o=>{ke(o),zo(i.Cod_seccion_asignatura,o.Cod_parcial)},Oe=async(o,r)=>{try{const t=await fetch(`http://74.50.68.87:4000/api/actividadesAcademicas/porProfesorYAsignatura/${o}/${r}`),a=await t.json();t.ok?(console.log("Actividades actualizadas:",a),W(a)):(console.warn("No se encontraron actividades:",a.mensaje),W([]))}catch(t){console.error("Error al obtener actividades:",t),W([])}},$o=async(o,r,t,a)=>{try{const l=await fetch("http://74.50.68.87:4000/api/actividadesacademicas/validar-valor",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Cod_ponderacion_ciclo:o,Cod_seccion_asignatura:r,Cod_parcial:t,Valor:a})}),b=await l.json();return l.ok?!0:(n.fire("Error",b.mensaje,"error"),!1)}catch(l){return console.error("Error al validar el valor de la actividad:",l),n.fire("Error","Error al validar el valor de la actividad.","error"),!1}},Oo=async()=>{try{const r=await(await fetch("http://74.50.68.87:4000/api/ponderaciones/verPonderaciones")).json();So(r)}catch(o){console.error("Error al obtener las ponderaciones:",o)}},Vo=async()=>{try{const r=await(await fetch("http://74.50.68.87:4000/api/parciales/verParciales")).json();vo(r)}catch(o){console.error("Error al obtener los parciales:",o)}},Ho=async()=>{try{const r=await(await fetch("http://74.50.68.87:4000/api/ponderacionCiclo/verPonderacionesCiclos")).json();Co(r)}catch(o){console.error("Error al obtener los parciales:",o)}},ce=(o,r)=>{const t=o.target,a=t.selectionStart;let l=t.value.toUpperCase().trimStart();const b=/^[A-Za-zÁÉÍÓÚáéíóúÑñ0-9\s,;:.]*$/;if(/[.,;:]{2,}/.test(l)){n.fire({icon:"warning",title:"Símbolos repetidos",text:'No se permite que los símbolos ",", ";", ":", o "." se repitan dos veces seguidas.'});return}if(/\s{2,}/.test(l)&&(n.fire({icon:"warning",title:"Espacios múltiples",text:"No se permite más de un espacio entre palabras."}),l=l.replace(/\s+/g," ")),!b.test(l)){n.fire({icon:"warning",title:"Caracteres no permitidos",text:"Solo se permiten letras, números, tildes, comas, punto y coma, dos puntos, puntos y espacios."});return}const p=l.split(" ");for(let k of p){const F={};for(let E of k)if(F[E]=(F[E]||0)+1,F[E]>4){n.fire({icon:"warning",title:"Repetición de letras",text:`La letra "${E}" se repite más de 4 veces en la palabra "${k}".`});return}}t.value=l,r(l),J(!0),requestAnimationFrame(()=>{ve.current&&ve.current.setSelectionRange(a,a)})},v=o=>{o.preventDefault(),n.fire({icon:"warning",title:"Accion bloquear",text:"Copiar y pegar no esta permitido"})},Yo=()=>{if(!q||q.length===0){n.fire({icon:"info",title:"Sin datos",text:"No hay datos disponibles para generar el reporte.",confirmButtonText:"Aceptar"});return}const o=q.reduce((a,l)=>a+parseFloat((l==null?void 0:l.Valor)||0),0).toFixed(2),r=new ur("landscape"),t=new Image;t.src=gr,t.onload=()=>{r.addImage(t,"PNG",10,10,30,30);let a=20;r.setFontSize(18),r.setTextColor(0,102,51),r.text("SAINT PATRICK'S ACADEMY",r.internal.pageSize.width/2,a,{align:"center"}),a+=10,r.setFontSize(10),r.setTextColor(100),r.text("Casa Club del periodista, Colonia del Periodista",r.internal.pageSize.width/2,a,{align:"center"}),a+=4,r.text("Teléfono: (504) 2234-8871",r.internal.pageSize.width/2,a,{align:"center"}),a+=4,r.text("Correo: info@saintpatrickacademy.edu",r.internal.pageSize.width/2,a,{align:"center"}),a+=10,r.setTextColor(0,102,51),r.setFontSize(16),r.text("Reporte de Actividades Académicas",r.internal.pageSize.width/2,a,{align:"center"}),a+=10,r.setFontSize(12),r.setTextColor(0,102,51),r.setFont("helvetica","bold"),x!=null&&x.Nombre_seccion&&(i!=null&&i.Nombre_asignatura)&&(m!=null&&m.Nombre_parcial)?r.text(`Profesor: ${P(y.cod_persona)} 
        Sección: ${x.Nombre_seccion} | Asignatura: ${i.Nombre_asignatura} | Parcial: ${m.Nombre_parcial}`,r.internal.pageSize.width/2,a,{align:"center"}):x!=null&&x.Nombre_seccion&&anioSeccionSeleccionada?r.text(`Sección: ${x.Nombre_seccion} | Año: ${anioSeccionSeleccionada}`,r.internal.pageSize.width/2,a,{align:"center"}):i!=null&&i.Nombre_asignatura&&r.text(`Asignatura: ${i.Nombre_asignatura}`,r.internal.pageSize.width/2,a,{align:"center"}),a+=10,r.setLineWidth(.5),r.setDrawColor(0,102,51),r.line(10,a,r.internal.pageSize.width-10,a),a+=6;const l=r.internal.pageSize.height;let b=1;r.autoTable({startY:a,head:[["#","Nombre Actividad","Descripción","Fecha y hora Inicio","Fecha y hora Fin","Valor"]],body:q.map((p,k)=>[k+1,p.Nombre_actividad_academica||"",p.Descripcion||"",p.Fechayhora_Inicio?new Date(p.Fechayhora_Inicio).toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",p.Fechayhora_Fin?new Date(p.Fechayhora_Fin).toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",p.Valor]),foot:[["","","","","Total:",o]],headStyles:{fillColor:[0,102,51],textColor:[255,255,255],fontSize:9},styles:{fontSize:8,cellPadding:2,overflow:"linebreak",valign:"middle"},footStyles:{fillColor:[0,102,51],textColor:[255,255,255],fontSize:10},columnStyles:{0:{cellWidth:"auto"},1:{cellWidth:"auto"},2:{cellWidth:"auto"},3:{cellWidth:"auto"},4:{cellWidth:"auto"},5:{cellWidth:"auto"}},tableWidth:"auto",margin:{left:10,right:10},didDrawPage:p=>{const k=new Date,F=`${k.toLocaleDateString()} ${k.toLocaleTimeString()}`;r.setFontSize(10),r.setTextColor(100),r.text(`Fecha y hora de generación: ${F}`,10,l-10);const E=r.internal.getNumberOfPages();r.text(`Página ${b} de ${E}`,r.internal.pageSize.width-30,l-10),b+=1}}),window.open(r.output("bloburl"),"_blank")},t.onerror=()=>{n.fire({icon:"error",title:"Error",text:"No se pudo cargar el logo para el reporte."})}},Go=()=>{const o=[["Saint Patrick Academy"],["Reporte de Actividades Académicas"],["Fecha de generación: "+new Date().toLocaleDateString()],[],["Nombre de la Actividad","Descripción","Fecha y Hora Inicio","Fecha y Hora Fin","Valor"]],r=q.map(p=>[p.Nombre_actividad_academica,p.Descripcion,new Date(p.Fechayhora_Inicio).toLocaleString("es-ES",{dateStyle:"short",timeStyle:"short"}),new Date(p.Fechayhora_Fin).toLocaleString("es-ES",{dateStyle:"short",timeStyle:"short"}),p.Valor]),t=[...o,...r],a=be.aoa_to_sheet(t);a["!cols"]=[{wpx:200},{wpx:300},{wpx:150},{wpx:150},{wpx:100}];const l=be.book_new();be.book_append_sheet(l,a,"Actividades Académicas");const b=`Reporte_Actividades_${new Date().toLocaleDateString()}.xlsx`;mr(l,b)},Ve=(o,r)=>{ko?n.fire({title:"¿Estás seguro?",text:"Si cierras este formulario, perderás todos los datos ingresados.",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, cerrar",cancelButtonText:"Cancelar"}).then(t=>{t.isConfirmed&&(o(!1),r(),J(!1))}):(o(!1),r(),J(!1))},Wo=()=>T(""),He=()=>A(""),Jo=o=>{Fo(o),ge(!0)},Ye=o=>{if(!o)return"";const r=new Date(o),t=r.getFullYear(),a=String(r.getMonth()+1).padStart(2,"0"),l=String(r.getDate()).padStart(2,"0"),b=String(r.getHours()).padStart(2,"0"),p=String(r.getMinutes()).padStart(2,"0");return`${t}-${a}-${l}T${b}:${p}`},qo=o=>{A({...o,Fechayhora_Inicio:Ye(o.Fechayhora_Inicio),Fechayhora_Fin:Ye(o.Fechayhora_Fin),Cod_profesor:(y==null?void 0:y.Cod_profesor)||o.Cod_profesor,Cod_parcial:(m==null?void 0:m.Cod_parcial)||o.Cod_parcial,Cod_asignatura:(i==null?void 0:i.Cod_asignatura)||o.Cod_asignatura,Cod_secciones:(x==null?void 0:x.Cod_secciones)||o.Cod_secciones,Cod_seccion_asignatura:(i==null?void 0:i.Cod_asignatura)||o.Cod_asignatura}),oe(!0)},Xo=()=>{T({Cod_profesor:y==null?void 0:y.Cod_profesor,Nombre_actividad_academica:"",Descripcion:"",Fechayhora_Inicio:"",Fechayhora_Fin:"",Valor:"",Cod_ponderacion_ciclo:"",Cod_parcial:(m==null?void 0:m.Cod_parcial)||"",Cod_secciones:(x==null?void 0:x.Cod_secciones)||"",Cod_asignatura:(i==null?void 0:i.Cod_asignatura)||"",Cod_seccion_asignatura:i==null?void 0:i.Cod_asignatura}),G(!0)},Zo=o=>{const r=o.target.value.toUpperCase();if(!/^[A-ZÑ\s]*$/.test(r)){n.fire({icon:"warning",title:"Caracteres no permitidos",text:"Solo se permiten letras y espacios."});return}Pe(r),re(1)},le=po.filter(o=>P(o.cod_persona).toLowerCase().includes(Te.toLowerCase())),Ge=z*M,Ko=Ge-M,We=le.slice(Ko,Ge),Je=o=>{o>0&&o<=Math.ceil(le.length/M)&&re(o)},Qo=o=>{const r=o.target.value.toUpperCase();if(!/^[A-ZÑ\s]*$/.test(r)){n.fire({icon:"warning",title:"Caracteres no permitidos",text:"Solo se permiten letras y espacios."});return}Le(r),te(1)},de=uo.filter(o=>o.Nombre_seccion.toLowerCase().includes(ae.toLowerCase())||o.Nombre_grado.toLowerCase().includes(ae.toLowerCase())||o.Anio_academico.toString().includes(ae)),qe=I*R,Uo=qe-R,Xe=de.slice(Uo,qe),Ze=o=>{o>0&&o<=Math.ceil(de.length/R)&&te(o)},er=o=>{const r=o.target.value.toUpperCase();if(!/^[A-ZÑ\s]*$/.test(r)){n.fire({icon:"warning",title:"Caracteres no permitidos",text:"Solo se permiten letras y espacios."});return}ze(r),se(1)},he=go.filter(o=>o.Nombre_asignatura.toLowerCase().includes(Me.toLowerCase())),Ke=$*B,or=Ke-B,Qe=he.slice(or,Ke),Ue=o=>{o>0&&o<=Math.ceil(he.length/B)&&se(o)},rr=o=>{const r=o.target.value.toUpperCase();if(!/^[A-ZÑ\s]*$/.test(r)){n.fire({icon:"warning",title:"Caracteres no permitidos",text:"Solo se permiten letras y espacios."});return}Ie(r),ne(1)},pe=me.filter(o=>o.Nombre_actividad_academica.toLowerCase().includes(Re.toLowerCase())),eo=V*O,ar=eo-O,oo=pe.slice(ar,eo),ro=o=>{o>0&&o<=Math.ceil(pe.length/O)&&ne(o)},tr=o=>{const r=o.target.value.toUpperCase();if(!/^[A-ZÑ\s]*$/.test(r)){n.fire({icon:"warning",title:"Caracteres no permitidos",text:"Solo se permiten letras y espacios."});return}$e(r),ie(1)},xe=yo.filter(o=>o.Nombre_parcial.toLowerCase().includes(Be.toLowerCase())),ao=Y*H,sr=ao-H,to=xe.slice(sr,ao),so=o=>{o>0&&o<=Math.ceil(xe.length/H)&&ie(o)},nr=async()=>{try{const o=localStorage.getItem("token");if(!o){n.fire("Error","No tienes permiso para realizar esta acción","error");return}const r=fe(o);if(!r.cod_usuario||!r.nombre_usuario)throw console.error("No se pudo obtener el código o el nombre de usuario del token"),new Error("No se pudo obtener el código o el nombre de usuario del token");if(!(y!=null&&y.Cod_profesor)||!d.Cod_ponderacion_ciclo||!(m!=null&&m.Cod_parcial)||!d.Nombre_actividad_academica||!d.Descripcion||!d.Fechayhora_Inicio||!d.Fechayhora_Fin||!d.Valor||!(x!=null&&x.Cod_secciones)||!(i!=null&&i.Cod_seccion_asignatura)){n.fire("Error","Todos los campos son requeridos. Por favor, complete todos los campos.","error");return}const t=new Date(d.Fechayhora_Inicio),a=new Date(d.Fechayhora_Fin);if(t>a){n.fire({icon:"error",title:"Fechas inválidas",text:'La "fecha inicio" no puede ser mayor que la "fecha fin".'});return}if(!await $o(d.Cod_ponderacion_ciclo,i==null?void 0:i.Cod_seccion_asignatura,d.Cod_parcial,d.Valor))return;const b={Cod_profesor:(y==null?void 0:y.Cod_profesor)||"",Cod_ponderacion_ciclo:d.Cod_ponderacion_ciclo,Cod_parcial:(m==null?void 0:m.Cod_parcial)||"",Nombre_actividad_academica:d.Nombre_actividad_academica,Descripcion:d.Descripcion,Fechayhora_Inicio:d.Fechayhora_Inicio,Fechayhora_Fin:d.Fechayhora_Fin,Valor:d.Valor,Cod_secciones:(x==null?void 0:x.Cod_secciones)||"",Cod_seccion_asignatura:(i==null?void 0:i.Cod_seccion_asignatura)||""},p=await fetch("http://74.50.68.87:4000/api/actividadesAcademicas/registrar",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify(b)}),k=await p.json();if(p.ok){const F=`El usuario: ${r.nombre_usuario} ha creado nueva actividad académica: ${d.Nombre_actividad_academica} `;(await fetch("http://74.50.68.87:4000/api/bitacora/registro",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({cod_usuario:r.cod_usuario,cod_objeto:79,accion:"INSERT",descripcion:F})})).ok?console.log("Registro en bitácora exitoso"):n.fire("Error","No se pudo registrar la acción en la bitácora","error"),G(!1),Wo(),J(!1),n.fire({icon:"success",title:"¡Éxito!",text:"La actividad se ha creado correctamente.",confirmButtonText:"Aceptar"}),G(!1),W(k.actividades)}else n.fire("Error",`Problema al crear actividad: ${k.mensaje}`,"error")}catch(o){console.error("Error al crear la actividad",o),n.fire("Error","Error en el servidor al crear la actividad","error")}},ir=async()=>{const{Nombre_actividad_academica:o,Descripcion:r,Fechayhora_Inicio:t,Fechayhora_Fin:a,Valor:l,Cod_actividad_academica:b}=c;if(!o||!r||!t||!a||!l){n.fire({icon:"error",title:"Error",text:"Todos los campos son obligatorios."});return}const p=new Date(t),k=new Date(a);if(p>k){n.fire({icon:"error",title:"Fechas inválidas",text:'La "fecha inicio" no puede ser mayor que la "fecha fin".'});return}try{const F=localStorage.getItem("token");if(!F){n.fire("Error","No tienes permiso para realizar esta acción","error");return}const E=fe(F);if(!E.cod_usuario||!E.nombre_usuario)throw console.error("No se pudo obtener el código o el nombre de usuario del token"),new Error("No se pudo obtener el código o el nombre de usuario del token");const no=await fetch("http://74.50.68.87:4000/api/actividadesacademicas/validar-valoractua",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Cod_ponderacion_ciclo:c.Cod_ponderacion_ciclo,Cod_seccion_asignatura:i==null?void 0:i.Cod_seccion_asignatura,Cod_parcial:m==null?void 0:m.Cod_parcial,Valor:parseFloat(l),Cod_actividad_academica:b})}),hr=await no.json();if(!no.ok){n.fire("Error",hr.mensaje,"error");return}if(!(await fetch(`http://74.50.68.87:4000/api/actividadesAcademicas/${b}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${F}`},body:JSON.stringify({Nombre_actividad_academica:o,Descripcion:r,Fechayhora_Inicio:t,Fechayhora_Fin:a,Valor:l})})).ok)throw new Error("Error en la actualización.");const pr=`El usuario: ${E.nombre_usuario} ha actualizado la actividad academica: ${o}, con valor ${l}`;(await fetch("http://74.50.68.87:4000/api/bitacora/registro",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${F}`},body:JSON.stringify({cod_usuario:E.cod_usuario,cod_objeto:79,accion:"UPDATE",descripcion:pr})})).ok?console.log("Registro en bitácora exitoso"):n.fire("Error","No se pudo registrar la acción en la bitácora","error"),n.fire({icon:"success",title:"¡Éxito!",text:"La actividad se ha actualizado correctamente.",confirmButtonText:"Aceptar"}),await Oe(x==null?void 0:x.Cod_secciones,m==null?void 0:m.Cod_parcial,i==null?void 0:i.Cod_seccion_asignatura),cr()}catch(F){console.error("Error al actualizar la actividad:",F),n.fire("Error","No se pudo actualizar la actividad.","error")}},cr=()=>{oe(!1),A(null)},lr=async(o,r)=>{try{const t=localStorage.getItem("token");if(!t){n.fire("Error","No tienes permiso para realizar esta acción","error");return}const a=fe(t);if(!a.cod_usuario||!a.nombre_usuario)throw console.error("No se pudo obtener el código o el nombre de usuario del token"),new Error("No se pudo obtener el código o el nombre de usuario del token");if((await n.fire({title:"¿Estás seguro?",text:"Esta acción eliminará la actividad de forma permanente.",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"})).isConfirmed){const b=await fetch(`http://74.50.68.87:4000/api/actividadesAcademicas/${o}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}}),p=await b.json();if(b.ok){const k=`El usuario: ${a.nombre_usuario} ha eliminado la actividad: ${r} con codigo ${o}`;(await fetch("http://74.50.68.87:4000/api/bitacora/registro",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({cod_usuario:a.cod_usuario,cod_objeto:79,accion:"DELETE",descripcion:k})})).ok?console.log("Registro en bitácora exitoso"):n.fire("Error","No se pudo registrar la acción en la bitácora","error"),n.fire({icon:"success",title:"¡Éxito!",text:p.mensaje,confirmButtonText:"Aceptar"}),Oe(x==null?void 0:x.Cod_secciones,m==null?void 0:m.Cod_parcial,i==null?void 0:i.Cod_seccion_asignatura)}else n.fire("Error",`Problema al eliminar actividad: ${p.mensaje}`,"error")}}catch(t){console.error("Error al eliminar la actividad:",t),n.fire("Error","Error en el servidor al eliminar la actividad","error")}},dr=()=>me.reduce((o,r)=>o+parseFloat((r==null?void 0:r.Valor)||0),0).toFixed(2);return e.jsxs(fr,{className:"py-1",children:[!y&&e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"align-items-center mb-5",children:e.jsx(N,{xs:"12",className:"d-flex flex-column flex-md-row justify-content-between align-items-center gap-3",children:e.jsx("div",{className:"flex-grow-1 text-center",children:e.jsx("h4",{className:"text-center fw-semibold pb-2 mb-0",style:{display:"inline-block",borderBottom:"2px solid #4CAF50"},children:"Gestión Actividades Académicas"})})})}),e.jsxs(D,{className:"align-items-center mt-4 mb-2",children:[e.jsx(N,{xs:"12",md:"8",className:"d-flex flex-wrap align-items-center",children:e.jsxs(C,{className:"me-3",style:{maxWidth:"350px"},children:[e.jsx(S,{children:e.jsx(g,{icon:X,size:"sm"})}),e.jsx(j,{style:{width:"80px",height:"35px",display:"inline-block",fontSize:"0.8rem"},placeholder:"Buscar profesor...",value:Te,onChange:Zo}),e.jsxs(h,{style:{border:"1px solid #ccc",transition:"all 0.1s ease-in-out",backgroundColor:"#F3F4F7",color:"#343a40",height:"35px"},onClick:()=>{Pe(""),re(1)},onMouseEnter:o=>{o.currentTarget.style.backgroundColor="#E0E0E0",o.currentTarget.style.color="black"},onMouseLeave:o=>{o.currentTarget.style.backgroundColor="#F3F4F7",o.currentTarget.style.color="#343a40"},children:[e.jsx(g,{icon:Z})," Limpiar"]})]})}),e.jsx(N,{xs:"12",md:"4",className:"text-md-end mt-2 mt-md-0",children:e.jsx(C,{style:{width:"auto",display:"inline-block"},children:e.jsxs("div",{className:"d-inline-flex align-items-center",children:[e.jsx("span",{style:{fontSize:"0.85rem"},children:"Mostrar "}),e.jsxs(L,{style:{width:"80px",height:"35px",display:"inline-block",textAlign:"center"},onChange:o=>{Ao(Number(o.target.value)),re(1)},value:M,children:[e.jsx("option",{value:"5",children:"5"}),e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"20",children:"20"})]}),e.jsx("span",{style:{fontSize:"0.85rem"},children:" registros"})]})})})]}),e.jsx("div",{className:"table-responsive",style:{maxHeight:"400px",margin:"0 auto",overflowX:"auto",overflowY:"auto",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.3)"},children:e.jsxs(K,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[e.jsx(Q,{className:"sticky-top bg-light text-center",style:{fontSize:"0.8rem"},children:e.jsxs(w,{children:[e.jsx(f,{children:"#"}),e.jsx(f,{children:"NOMBRE DEL PROFESOR"}),e.jsx(f,{children:"ACCIÓN"})]})}),e.jsx(U,{className:"text-center",style:{fontSize:"0.85rem"},children:We.length>0?We.map((o,r)=>e.jsxs(w,{children:[e.jsx(u,{children:r+1}),e.jsx(u,{children:P(o.cod_persona)}),e.jsx(u,{children:e.jsx(h,{size:"sm",style:{backgroundColor:"#F0F4F3",color:"#153E21",border:"1px solid #A2B8A9",borderRadius:"6px",padding:"5px 12px",boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.1)"},onMouseEnter:t=>t.target.style.backgroundColor="#dce3dc",onMouseLeave:t=>t.target.style.backgroundColor="#F0F4F3",onClick:()=>Lo(o),children:"Gestionar Secciones"})})]},o.Cod_profesor)):e.jsx(w,{children:e.jsx(u,{colSpan:"5",children:"No se encontraron resultados"})})})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"16px"},children:[e.jsxs(ee,{"aria-label":"Page navigation",style:{display:"flex",gap:"10px"},children:[e.jsx(h,{style:{backgroundColor:"#6f8173",color:"#D9EAD3"},disabled:z===1,onClick:()=>Je(z-1),children:"Anterior"}),e.jsx(h,{style:{marginLeft:"10px",backgroundColor:"#6f8173",color:"#D9EAD3"},disabled:z===Math.ceil(le.length/M),onClick:()=>Je(z+1),children:"Siguiente"})]}),e.jsxs("span",{style:{marginLeft:"10px"},children:["Página ",z," de ",Math.ceil(le.length/M)]})]})]}),y&&!x&&e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"align-items-center mb-5",children:e.jsxs(N,{xs:"12",className:"d-flex flex-column flex-md-row justify-content-between align-items-center gap-3",children:[e.jsxs(h,{className:"btn btn-sm d-flex align-items-center gap-1 rounded shadow",onMouseEnter:o=>o.currentTarget.style.backgroundColor="#4B4B4B",onMouseLeave:o=>o.currentTarget.style.backgroundColor="#656565",style:{backgroundColor:"#656565",color:"#FFFFFF",padding:"6px 12px",fontSize:"0.9rem",transition:"background-color 0.2s ease, box-shadow 0.3s ease",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)"},onClick:()=>Se(null),children:[e.jsx(g,{icon:ue}),"Regresar a Profesores"]}),e.jsx("div",{className:"d-flex justify-content-center align-items-center flex-grow-1",children:e.jsxs("h4",{className:"text-center fw-semibold pb-2 mb-0",style:{display:"inline-block",borderBottom:"2px solid #4CAF50",margin:"0 auto",fontSize:"1.5rem"},children:["Secciones de:  ",P(y.cod_persona)]})})]})}),e.jsxs(D,{className:"align-items-center mt-4 mb-2",children:[e.jsx(N,{xs:"12",md:"8",className:"d-flex flex-wrap align-items-center",children:e.jsxs(C,{className:"me-3",style:{width:"350px"},children:[e.jsx(S,{children:e.jsx(g,{icon:X})}),e.jsx(j,{style:{width:"80px",height:"35px",display:"inline-block",fontSize:"0.8rem"},placeholder:"Buscar por año, grado o sección",onChange:Qo,value:ae}),e.jsxs(h,{style:{border:"1px solid #ccc",transition:"all 0.1s ease-in-out",backgroundColor:"#F3F4F7",color:"#343a40",height:"35px"},onClick:()=>{Le(""),te(1)},onMouseEnter:o=>{o.currentTarget.style.backgroundColor="#E0E0E0",o.currentTarget.style.color="black"},onMouseLeave:o=>{o.currentTarget.style.backgroundColor="#F3F4F7",o.currentTarget.style.color="#343a40"},children:[e.jsx(g,{icon:Z})," Limpiar"]})]})}),e.jsx(N,{xs:"12",md:"4",className:"text-md-end mt-2 mt-md-0",children:e.jsx(C,{style:{width:"auto",display:"inline-block"},children:e.jsxs("div",{className:"d-inline-flex align-items-center",children:[e.jsx("span",{style:{fontSize:"0.85rem"},children:"Mostrar "}),e.jsxs(L,{style:{width:"80px",height:"35px",display:"inline-block",textAlign:"center"},onChange:o=>{const r=Number(o.target.value);Eo(r),te(1)},value:R,children:[e.jsx("option",{value:"5",children:"5"}),e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"20",children:"20"})]}),e.jsx("span",{style:{fontSize:"0.85rem"},children:" registros"})]})})})]}),e.jsx("div",{className:"table-responsive",style:{maxHeight:"400px",overflowX:"auto",overflowY:"auto",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.3)"},children:e.jsxs(K,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[e.jsx(Q,{className:"sticky-top bg-light text-center",style:{fontSize:"0.8rem"},children:e.jsxs(w,{children:[e.jsx(f,{children:"#"}),e.jsx(f,{children:"NOMBRE DE LA SECCIÓN"}),e.jsx(f,{children:"GRADO"}),e.jsx(f,{children:"AÑO ACADÉMICO"}),e.jsx(f,{children:"ACCIÓN"})]})}),e.jsx(U,{className:"text-center",style:{fontSize:"0.85rem"},children:Xe.length>0?Xe.map((o,r)=>e.jsxs(w,{children:[e.jsx(u,{children:r+1}),e.jsx(u,{children:o.Nombre_seccion}),e.jsx(u,{children:o.Nombre_grado}),e.jsx(u,{children:o.Anio_academico}),e.jsx(u,{children:e.jsx(h,{size:"sm",style:{backgroundColor:"#F0F4F3",color:"#153E21",border:"1px solid #A2B8A9",borderRadius:"6px",padding:"5px 12px",boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.1)"},onMouseEnter:t=>t.target.style.backgroundColor="#dce3dc",onMouseLeave:t=>t.target.style.backgroundColor="#F0F4F3",onClick:()=>Ro(o),children:"Gestionar Asignaturas"})})]},o.Cod_secciones)):e.jsx(w,{children:e.jsx(u,{colSpan:"5",children:"No se encontraron resultados"})})})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"16px"},children:[e.jsxs(ee,{"aria-label":"Page navigation",style:{display:"flex",gap:"10px"},children:[e.jsx(h,{style:{backgroundColor:"#6f8173",color:"#D9EAD3"},disabled:I===1,onClick:()=>Ze(I-1),children:"Anterior"}),e.jsx(h,{style:{marginLeft:"10px",backgroundColor:"#6f8173",color:"#D9EAD3"},disabled:I===Math.ceil(de.length/R),onClick:()=>Ze(I+1),children:"Siguiente"})]}),e.jsxs("span",{style:{marginLeft:"10px"},children:["Página ",I," de ",Math.ceil(de.length/R)]})]})]}),x&&!i&&e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"align-items-center mb-5",children:e.jsxs(N,{xs:"12",className:"d-flex flex-column flex-md-row justify-content-between align-items-center gap-3",children:[e.jsxs(h,{className:"btn btn-sm d-flex align-items-center gap-1 rounded shadow",onMouseEnter:o=>o.currentTarget.style.backgroundColor="#4B4B4B",onMouseLeave:o=>o.currentTarget.style.backgroundColor="#656565",style:{backgroundColor:"#656565",color:"#FFFFFF",padding:"6px 12px",fontSize:"0.9rem",transition:"background-color 0.2s ease, box-shadow 0.3s ease",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)"},onClick:()=>Ne(null),children:[e.jsx(g,{icon:ue}),"Regresar a Secciones"]}),e.jsx("div",{className:"flex-grow-1 text-center",children:e.jsxs("h4",{className:"text-center fw-semibold pb-2 mb-0",style:{display:"inline-block",borderBottom:"2px solid #4CAF50"},children:["Profesor: ",P(y.cod_persona)," /  Sección: ",x.Nombre_seccion]})})]})}),e.jsxs(D,{className:"align-items-center mt-4 mb-2",children:[e.jsx(N,{xs:"12",md:"8",className:"d-flex flex-wrap align-items-center",children:e.jsxs(C,{className:"me-3",style:{maxWidth:"350px"},children:[e.jsx(S,{children:e.jsx(g,{icon:X,size:"sm"})}),e.jsx(j,{style:{width:"80px",height:"35px",display:"inline-block",fontSize:"0.8rem"},placeholder:"Buscar asignatura...",value:Me,onChange:er}),e.jsxs(h,{style:{border:"1px solid #ccc",transition:"all 0.1s ease-in-out",backgroundColor:"#F3F4F7",color:"#343a40",height:"35px"},onClick:()=>{ze(""),se(1)},onMouseEnter:o=>{o.currentTarget.style.backgroundColor="#E0E0E0",o.currentTarget.style.color="black"},onMouseLeave:o=>{o.currentTarget.style.backgroundColor="#F3F4F7",o.currentTarget.style.color="#343a40"},children:[e.jsx(g,{icon:Z})," Limpiar"]})]})}),e.jsx(N,{xs:"12",md:"4",className:"text-md-end mt-2 mt-md-0",children:e.jsx(C,{style:{width:"auto",display:"inline-block"},children:e.jsxs("div",{className:"d-inline-flex align-items-center",children:[e.jsx("span",{style:{fontSize:"0.85rem"},children:"Mostrar "}),e.jsxs(L,{style:{width:"80px",height:"35px",display:"inline-block",textAlign:"center"},onChange:o=>{Do(Number(o.target.value)),se(1)},value:B,children:[e.jsx("option",{value:"5",children:"5"}),e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"20",children:"20"})]}),e.jsx("span",{style:{fontSize:"0.85rem"},children:" registros"})]})})})]}),e.jsx("div",{className:"table-responsive",style:{maxHeight:"400px",overflowX:"auto",overflowY:"auto",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.3)"},children:e.jsxs(K,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[e.jsx(Q,{className:"sticky-top bg-light text-center",style:{fontSize:"0.8rem"},children:e.jsxs(w,{children:[e.jsx(f,{children:"#"}),e.jsx(f,{children:"NOMBRE DE LA ASIGNATURA"}),e.jsx(f,{children:"DESCRIPCIÓN"}),e.jsx(f,{style:{width:"180px",textAlign:"center"},children:"ACCIÓN"})]})}),e.jsx(U,{className:"text-center",style:{fontSize:"0.85rem"},children:Qe.length>0?Qe.map((o,r)=>e.jsxs(w,{children:[e.jsx(u,{children:r+1}),e.jsx(u,{children:o.Nombre_asignatura}),e.jsx(u,{children:o.Nombre_asignatura}),e.jsx(u,{children:e.jsx(h,{size:"sm",style:{backgroundColor:"#F0F4F3",color:"#153E21",border:"1px solid #A2B8A9",borderRadius:"6px",padding:"5px 12px",boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.1)"},onMouseEnter:t=>t.target.style.backgroundColor="#dce3dc",onMouseLeave:t=>t.target.style.backgroundColor="#F0F4F3",onClick:()=>Io(o),children:"Gestionar Parciales"})})]},o.Cod_asignatura)):e.jsx(w,{children:e.jsx(u,{colSpan:"5",children:"No se encontraron resultados"})})})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"16px"},children:[e.jsxs(ee,{"aria-label":"Page navigation",style:{display:"flex",gap:"10px"},children:[e.jsx(h,{style:{backgroundColor:"#6f8173",color:"#D9EAD3"},disabled:$===1,onClick:()=>Ue($-1),children:"Anterior"}),e.jsx(h,{style:{marginLeft:"10px",backgroundColor:"#6f8173",color:"#D9EAD3"},disabled:$===Math.ceil(he.length/B),onClick:()=>Ue($+1),children:"Siguiente"})]}),e.jsxs("span",{style:{marginLeft:"10px"},children:["Página ",$," de ",Math.ceil(he.length/B)]})]})]}),i&&!m&&e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"align-items-center mb-5",children:e.jsxs(N,{xs:"12",className:"d-flex flex-column flex-md-row justify-content-between align-items-center gap-3",children:[e.jsxs(h,{className:"btn btn-sm d-flex align-items-center gap-1 rounded shadow",onMouseEnter:o=>o.currentTarget.style.backgroundColor="#4B4B4B",onMouseLeave:o=>o.currentTarget.style.backgroundColor="#656565",style:{backgroundColor:"#656565",color:"#FFFFFF",padding:"6px 12px",fontSize:"0.9rem",transition:"background-color 0.2s ease, box-shadow 0.3s ease",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)"},onClick:()=>Ae(null),children:[e.jsx(g,{icon:ue})," Regresar a Asignaturas"]}),e.jsx("div",{className:"flex-grow-1 text-center",children:e.jsxs("h4",{className:"text-center fw-semibold pb-2 mb-0",style:{display:"inline-block",borderBottom:"2px solid #4CAF50"},children:["Profesor: ",P(y.cod_persona)," /  Sección: ",x.Nombre_seccion," / Parciales  ",i.Nombre_asignatura]})})]})}),e.jsxs(D,{className:"align-items-center mt-4 mb-2",children:[e.jsx(N,{xs:"12",md:"8",className:"d-flex flex-wrap align-items-center",children:e.jsxs(C,{className:"me-3",style:{width:"350px"},children:[e.jsx(S,{children:e.jsx(g,{icon:X})}),e.jsx(j,{style:{width:"80px",height:"35px",fontSize:"0.8rem"},placeholder:"Buscar por nombre de parcial...",value:Be,onChange:tr}),e.jsxs(h,{style:{border:"1px solid #ccc",transition:"all 0.1s ease-in-out",backgroundColor:"#F3F4F7",color:"#343a40",height:"35px"},onClick:()=>{$e(""),ie(1)},onMouseEnter:o=>{o.currentTarget.style.backgroundColor="#E0E0E0",o.currentTarget.style.color="black"},onMouseLeave:o=>{o.currentTarget.style.backgroundColor="#F3F4F7",o.currentTarget.style.color="#343a40"},children:[e.jsx(g,{icon:Z})," Limpiar"]})]})}),e.jsx(N,{xs:"12",md:"4",className:"text-md-end mt-2 mt-md-0",children:e.jsx(C,{style:{width:"auto"},children:e.jsxs("div",{className:"d-inline-flex align-items-center",children:[e.jsx("span",{style:{fontSize:"0.85rem"},children:"Mostrar "}),e.jsxs(L,{style:{width:"80px",height:"35px",textAlign:"center"},onChange:o=>{Po(Number(o.target.value)),ie(1)},value:H,children:[e.jsx("option",{value:"5",children:"5"}),e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"20",children:"20"})]}),e.jsx("span",{style:{fontSize:"0.85rem"},children:" registros"})]})})})]}),e.jsx("div",{className:"table-responsive",style:{maxHeight:"400px",overflowX:"auto",overflowY:"auto",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.3)"},children:e.jsxs(K,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[e.jsx(Q,{className:"sticky-top bg-light text-center",style:{fontSize:"0.8rem"},children:e.jsxs(w,{children:[e.jsx(f,{children:"#"}),e.jsx(f,{children:"NOMBRE DEL PARCIAL"}),e.jsx(f,{children:"ACCIÓN"})]})}),e.jsx(U,{className:"text-center",style:{fontSize:"0.85rem"},children:to.length>0?to.map((o,r)=>e.jsxs(w,{children:[e.jsx(u,{children:r+1}),e.jsx(u,{children:o.Nombre_parcial}),e.jsx(u,{children:e.jsx(h,{size:"sm",style:{backgroundColor:"#F0F4F3",color:"#153E21",border:"1px solid #A2B8A9",borderRadius:"6px",padding:"5px 12px",boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.1)"},onMouseEnter:t=>t.target.style.backgroundColor="#dce3dc",onMouseLeave:t=>t.target.style.backgroundColor="#F0F4F3",onClick:()=>Bo(o),children:"Gestionar Actividades"})})]},o.Cod_parcial)):e.jsx(w,{children:e.jsx(u,{colSpan:"4",children:"No se encontraron resultados"})})})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"16px"},children:[e.jsxs(ee,{"aria-label":"Page navigation",style:{display:"flex",gap:"10px"},children:[e.jsx(h,{style:{backgroundColor:"#6f8173",color:"#D9EAD3"},disabled:Y===1,onClick:()=>so(Y-1),children:"Anterior"}),e.jsx(h,{style:{marginLeft:"10px",backgroundColor:"#6f8173",color:"#D9EAD3"},disabled:Y===Math.ceil(xe.length/H),onClick:()=>so(Y+1),children:"Siguiente"})]}),e.jsxs("span",{style:{marginLeft:"10px"},children:["Página ",Y," de ",Math.ceil(xe.length/H)]})]})]}),e.jsxs(Ce,{visible:wo,onClose:()=>ge(!1),backdrop:"static",children:[e.jsx(je,{children:e.jsx(io,{children:"Detalles de la Actividad"})}),e.jsxs(ye,{children:[e.jsx("h5",{children:"INFORMACIÓN"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Nombre de la Actividad:"})," ",(_==null?void 0:_.Nombre_actividad_academica)||"N/A"," "]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Descripción:"})," ",(_==null?void 0:_.Descripcion)||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Fecha y Hora Inicio:"})," ",_!=null&&_.Fechayhora_Inicio?new Date(_.Fechayhora_Inicio).toLocaleString("es-ES",{dateStyle:"short",timeStyle:"short"}):"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Fecha y Hora Fin:"})," ",_!=null&&_.Fechayhora_Fin?new Date(_.Fechayhora_Fin).toLocaleString("es-ES",{dateStyle:"short",timeStyle:"short"}):"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Valor:"})," ",(_==null?void 0:_.Valor)||"N/A"]})]}),e.jsx(_e,{children:e.jsx(h,{color:"secondary",onClick:()=>ge(!1),children:"Cerrar"})})]}),e.jsxs(Ce,{visible:jo,onClose:()=>G(!1),backdrop:"static",children:[e.jsx(je,{closeButton:!0,children:e.jsx("h5",{children:"Nueva Actividad"})}),e.jsx(ye,{children:e.jsxs(co,{children:[e.jsx(j,{type:"hidden",value:d.Cod_profesor,readOnly:!0}),e.jsx(j,{type:"hidden",value:d.Cod_parcial,readOnly:!0}),e.jsx(j,{type:"hidden",value:d.Cod_secciones,readOnly:!0}),e.jsx(j,{type:"hidden",value:d.Cod_seccion_asignatura,readOnly:!0}),e.jsxs(C,{className:"mb-3",children:[e.jsx(S,{children:"Nombre de la Actividad"}),e.jsx(j,{value:d.Nombre_actividad_academica,onPaste:v,onCopy:v,onChange:o=>ce(o,r=>T({...d,Nombre_actividad_academica:o.target.value}))})]}),e.jsxs(C,{className:"mb-3",children:[e.jsx(S,{children:"Descripción"}),e.jsx(br,{value:d.Descripcion,onPaste:v,onCopy:v,onChange:o=>ce(o,r=>T({...d,Descripcion:o.target.value}))})]}),e.jsxs(C,{className:"mb-3",children:[e.jsx(S,{children:"Fecha y hora inicio"}),e.jsx(j,{type:"datetime-local",value:d.Fechayhora_Inicio,onPaste:v,onCopy:v,onChange:o=>T({...d,Fechayhora_Inicio:o.target.value})})]}),e.jsxs(C,{className:"mb-3",children:[e.jsx(S,{children:"Fecha y hora fin"}),e.jsx(j,{type:"datetime-local",value:d.Fechayhora_Fin,onPaste:v,onCopy:v,onChange:o=>T({...d,Fechayhora_Fin:o.target.value})})]}),e.jsxs(C,{className:"mb-3",children:[e.jsx(S,{children:"Ponderación"}),e.jsxs(L,{value:d.Cod_ponderacion_ciclo,onChange:o=>{const r=Fe.find(t=>t.Cod_ponderacion_ciclo===Number(o.target.value));T({...d,Cod_ponderacion_ciclo:(r==null?void 0:r.Cod_ponderacion_ciclo)||""})},children:[e.jsx("option",{value:"",children:"Seleccione una ponderación"}),Ee.map(o=>e.jsx("option",{value:o.Cod_ponderacion,children:o.Descripcion_ponderacion},o.Cod_ponderacion))]})]}),e.jsxs(C,{className:"mb-3",children:[e.jsx(S,{children:"Valor"}),e.jsx(j,{type:"number",value:d.Valor||"",onPaste:v,onCopy:v,onKeyPress:o=>{o.key==="-"&&(o.preventDefault(),n.fire("Advertencia","No se permiten valores negativos.","warning"))},onChange:o=>{let r=o.target.value;if(r.includes("-")){n.fire("Advertencia","No se permiten valores negativos.","warning");return}if(r==="0"){n.fire("Advertencia","El valor no puede ser solo 0.","warning");return}if(r.includes(".")){const[t,a]=r.split(".");t.length>2&&(n.fire("Advertencia","Solo se permiten dos dígitos enteros.","warning"),r=`${t.substring(0,2)}.${a}`),a.length>2&&(n.fire("Advertencia","Solo se permiten dos dígitos después del punto.","warning"),r=`${t}.${a.substring(0,2)}`)}else r.length>2&&(n.fire("Advertencia","Solo se permiten dos dígitos enteros.","warning"),r=r.substring(0,2));T({...d,Valor:r})}})]})]})}),e.jsxs(_e,{children:[e.jsx(h,{color:"secondary",onClick:()=>G(!1),children:"Cancelar"}),e.jsxs(h,{onClick:nr,onMouseEnter:o=>{o.currentTarget.style.backgroundColor="#3C4B43"},onMouseLeave:o=>{o.currentTarget.style.backgroundColor="#4B6251"},style:{backgroundColor:"#4B6251",color:"#FFFFFF",padding:"6px 12px",transition:"background-color 0.2s ease, box-shadow 0.3s ease"},children:[e.jsx(g,{icon:Cr})," Guardar"]})]})]}),e.jsxs(Ce,{visible:No,backdrop:"static",children:[e.jsxs(je,{closeButton:!1,children:[e.jsx(io,{children:"Actualizar Actividad Académica"}),e.jsx(h,{className:"btn-close","aria-label":"Close",onClick:()=>Ve(oe,He)})]}),e.jsx(ye,{children:e.jsxs(co,{children:[e.jsx(j,{type:"hidden",value:(c==null?void 0:c.Cod_profesor)||"",readOnly:!0}),e.jsx(j,{type:"hidden",value:(c==null?void 0:c.Cod_parcial)||"",readOnly:!0}),e.jsx(j,{type:"hidden",value:(c==null?void 0:c.Cod_secciones)||"",readOnly:!0}),e.jsx(j,{type:"hidden",value:(c==null?void 0:c.Cod_seccion_asignatura)||"",readOnly:!0}),e.jsxs(C,{className:"mb-3",children:[e.jsx(S,{children:"Nombre de la actividad"}),e.jsx(j,{value:(c==null?void 0:c.Nombre_actividad_academica)||"",onPaste:v,onCopy:v,onChange:o=>ce(o,r=>A({...c,Nombre_actividad_academica:o.target.value}))})]}),e.jsxs(C,{className:"mb-3",children:[e.jsx(S,{children:"Descripción"}),e.jsx(j,{value:(c==null?void 0:c.Descripcion)||"",onPaste:v,onCopy:v,onChange:o=>ce(o,r=>A({...c,Descripcion:o.target.value}))})]}),e.jsxs(C,{className:"mb-3",children:[e.jsx(S,{children:"Fecha y hora inicio"}),e.jsx(j,{type:"datetime-local",value:(c==null?void 0:c.Fechayhora_Inicio)||"",onChange:o=>A({...c,Fechayhora_Inicio:o.target.value})})]}),e.jsxs(C,{className:"mb-3",children:[e.jsx(S,{children:"Fecha y hora fin"}),e.jsx(j,{type:"datetime-local",value:(c==null?void 0:c.Fechayhora_Fin)||"",onChange:o=>A({...c,Fechayhora_Fin:o.target.value})})]}),e.jsxs(C,{className:"mb-3",children:[e.jsx(S,{children:"Ponderación"}),e.jsxs(L,{value:(c==null?void 0:c.Cod_ponderacion_ciclo)||"",onChange:o=>A({...c,Cod_ponderacion_ciclo:o.target.value}),children:[e.jsx("option",{value:"",children:"Seleccione una ponderación"}),Ee.map(o=>e.jsx("option",{value:o.Cod_ponderacion,children:o.Descripcion_ponderacion},o.Cod_ponderacion))]})]}),e.jsxs(C,{className:"mb-3",children:[e.jsx(S,{children:"Valor"}),e.jsx(j,{type:"number",step:"0.01",value:(c==null?void 0:c.Valor)||"",onPaste:v,onCopy:v,onChange:o=>{let r=parseFloat(o.target.value);if(isNaN(r)){n.fire({icon:"error",title:"Valor inválido",text:"Por favor, ingresa un número válido."}),A({...c,Valor:""});return}if(r<0){n.fire({icon:"warning",title:"Número negativo",text:"El valor no puede ser negativo."}),A({...c,Valor:""});return}if(r>100){n.fire({icon:"warning",title:"Valor excedido",text:"El valor no puede ser mayor a 100."}),A({...c,Valor:""});return}r=parseFloat(r.toFixed(2)),A({...c,Valor:r})}})]})]})}),e.jsxs(_e,{children:[e.jsx(h,{color:"secondary",onClick:()=>Ve(oe,He),children:"Cancelar"}),e.jsxs(h,{onClick:ir,style:{backgroundColor:"#9f7536",color:"#FFFFFF"},children:[e.jsx(g,{icon:lo}),"Actualizar"]})]})]}),m&&e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"align-items-center mb-5",children:e.jsxs(N,{xs:"12",className:"d-flex flex-column flex-md-row justify-content-between align-items-center gap-3",children:[e.jsxs(h,{className:"btn btn-sm d-flex align-items-center gap-1 rounded shadow",onMouseEnter:o=>o.currentTarget.style.backgroundColor="#4B4B4B",onMouseLeave:o=>o.currentTarget.style.backgroundColor="#656565",style:{backgroundColor:"#656565",color:"#FFFFFF",padding:"6px 12px",fontSize:"0.9rem",transition:"background-color 0.2s ease, box-shadow 0.3s ease",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)"},onClick:()=>ke(null),children:[e.jsx(g,{icon:ue}),"Regresar a parciales"]}),e.jsx("div",{className:"d-flex justify-content-center align-items-center flex-grow-1",children:e.jsxs("h1",{className:"text-center fw-semibold pb-2 mb-0",style:{display:"inline-block",borderBottom:"2px solid #4CAF50",margin:"0 auto",fontSize:"1.5rem"},children:[" Profesor: ",P(y.cod_persona)," /  Sección: ",x.Nombre_seccion," / Parciales  ",m.Nombre_parcial," "]})}),e.jsxs(h,{className:"btn btn-sm d-flex align-items-center gap-1 rounded shadow",onClick:()=>{Xo(),J(!1)},onMouseEnter:o=>o.currentTarget.style.backgroundColor="#3C4B43",onMouseLeave:o=>o.currentTarget.style.backgroundColor="#4B6251",style:{backgroundColor:"#4B6251",color:"#FFFFFF",padding:"5px 10px",fontSize:"0.9rem"},children:[e.jsx(g,{icon:jr,className:"me-2"}),"Nuevo"]}),e.jsxs(yr,{className:"btn-sm d-flex align-items-center gap-1 rounded shadow",children:[e.jsxs(_r,{style:{backgroundColor:"#6C8E58",color:"white",fontSize:"0.85rem",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:o=>{o.currentTarget.style.backgroundColor="#5A784C",o.currentTarget.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.2)"},onMouseLeave:o=>{o.currentTarget.style.backgroundColor="#6C8E58",o.currentTarget.style.boxShadow="none"},children:[e.jsx(g,{icon:vr})," Reporte"]}),e.jsxs(Sr,{style:{position:"absolute",zIndex:1050,backgroundColor:"#fff",boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.2)",borderRadius:"4px",overflow:"hidden"},children:[e.jsxs(ho,{onClick:Yo,style:{cursor:"pointer",outline:"none",backgroundColor:"transparent",padding:"0.5rem 1rem",fontSize:"0.85rem",color:"#333",borderBottom:"1px solid #eaeaea",transition:"background-color 0.3s"},onMouseOver:o=>o.target.style.backgroundColor="#f5f5f5",onMouseOut:o=>o.target.style.backgroundColor="transparent",children:[e.jsx(g,{icon:wr,size:"sm"})," Abrir en PDF"]}),e.jsxs(ho,{onClick:Go,style:{cursor:"pointer",outline:"none",backgroundColor:"transparent",padding:"0.5rem 1rem",fontSize:"0.85rem",color:"#333",transition:"background-color 0.3s"},onMouseOver:o=>o.target.style.backgroundColor="#f5f5f5",onMouseOut:o=>o.target.style.backgroundColor="transparent",children:[e.jsx(g,{icon:Fr,size:"sm"})," Descargar Excel"]})]})]})]})}),e.jsx(D,{children:e.jsx("div",{className:"d-flex justify-content-center align-items-center flex-grow-1",children:e.jsx("h2",{className:"text-center fw-semibold pb-2 mb-0",style:{display:"inline-block",borderBottom:"2px solid #4CAF50",margin:"0 auto",fontSize:"1.5rem"},children:"Actividades Academicas"})})}),e.jsxs(D,{className:"align-items-center mt-4 mb-2",children:[e.jsx(N,{xs:"12",md:"8",className:"d-flex flex-wrap align-items-center",children:e.jsxs(C,{className:"me-3",style:{width:"350px"},children:[e.jsx(S,{children:e.jsx(g,{icon:X})}),e.jsx(j,{style:{width:"80px",height:"35px",display:"inline-block"},placeholder:"Buscar actividad...",onChange:rr,value:Re}),e.jsxs(h,{style:{border:"1px solid #ccc",transition:"all 0.1s ease-in-out",backgroundColor:"#F3F4F7",color:"#343a40",height:"35px"},onClick:()=>{Ie(""),ne(1)},onMouseEnter:o=>{o.currentTarget.style.backgroundColor="#E0E0E0",o.currentTarget.style.color="black"},onMouseLeave:o=>{o.currentTarget.style.backgroundColor="#F3F4F7",o.currentTarget.style.color="#343a40"},children:[e.jsx(g,{icon:Z})," Limpiar"]})]})}),e.jsx(N,{xs:"12",md:"4",className:"text-md-end mt-2 mt-md-0",children:e.jsx(C,{style:{width:"auto",display:"inline-block"},children:e.jsxs("div",{className:"d-inline-flex align-items-center",children:[e.jsx("span",{style:{fontSize:"0.85rem"},children:"Mostrar "}),e.jsxs(L,{style:{width:"80px",height:"35px",display:"inline-block",textAlign:"center"},onChange:o=>{const r=Number(o.target.value);To(r),ne(1)},value:O,children:[e.jsx("option",{value:"5",children:"5"}),e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"20",children:"20"})]}),e.jsx("span",{style:{fontSize:"0.85rem"},children:" registros"})]})})})]}),e.jsx("div",{className:"table-responsive",style:{maxHeight:"400px",overflowX:"auto",overflowY:"auto",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.3)"}}),e.jsx("div",{className:"table-responsive",style:{maxHeight:"400px",overflowX:"auto",overflowY:"auto",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.3)"},children:e.jsxs(K,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[e.jsx(Q,{className:"sticky-top bg-light text-center",style:{fontSize:"0.8rem"},children:e.jsxs(w,{children:[e.jsx(f,{children:"#"}),e.jsx(f,{children:"NOMBRE DE LA ACTIVIDAD"}),e.jsx(f,{children:"DESCRIPCIÓN"}),e.jsx(f,{children:"PONDERACIÓN"}),e.jsx(f,{children:"FECHA Y HORA INICIO"}),e.jsx(f,{children:"FECHA Y HORA FIN"}),e.jsx(f,{children:"VALOR"}),e.jsx(f,{children:"ACCIONES"})]})}),e.jsxs(U,{className:"text-center",style:{fontSize:"0.85rem"},children:[oo.length>0?oo.map((o,r)=>{var t;return e.jsxs(w,{children:[e.jsx(u,{children:r+1}),e.jsx(u,{children:o.Nombre_actividad_academica}),e.jsx(u,{children:o.Descripcion}),e.jsx(u,{children:((t=Fe.find(a=>a.Cod_ponderacion_ciclo===(o==null?void 0:o.Cod_ponderacion_ciclo)))==null?void 0:t.Descripcion_ponderacion)||"N/A"}),e.jsx(u,{children:new Date(o.Fechayhora_Inicio).toLocaleString("es-ES",{dateStyle:"short",timeStyle:"short"})}),e.jsx(u,{children:new Date(o.Fechayhora_Fin).toLocaleString("es-ES",{dateStyle:"short",timeStyle:"short"})}),e.jsx(u,{children:o.Valor}),e.jsxs(u,{children:[e.jsx(h,{onMouseEnter:a=>{a.currentTarget.style.boxShadow="0px 4px 10px rgba(249, 182, 78, 0.6)",a.currentTarget.style.color="#000000"},onMouseLeave:a=>{a.currentTarget.style.boxShadow="none",a.currentTarget.style.color="#5C4044"},style:{backgroundColor:"#F9B64E",color:"#5C4044",border:"none",transition:"all 0.2s ease",padding:"5px 10px",height:"38px",width:"45px",marginRight:"10px",marginBottom:"10px"},onClick:()=>qo(o),children:e.jsx(g,{icon:lo})}),e.jsx(h,{style:{backgroundColor:"#E57368",color:"#5C4044",border:"none",transition:"all 0.2s ease",padding:"5px 10px",height:"38px",width:"45px",marginRight:"10px",marginBottom:"10px"},onMouseEnter:a=>{a.currentTarget.style.boxShadow="0px 4px 10px rgba(183, 65, 48, 0.6)",a.currentTarget.style.color="#000000"},onMouseLeave:a=>{a.currentTarget.style.boxShadow="none",a.currentTarget.style.color="#5C4044"},onClick:()=>lr(o.Cod_actividad_academica,o.Nombre_actividad_academica),children:e.jsx(g,{icon:Nr})}),e.jsx(h,{style:{backgroundColor:"#5D8AA8",color:"#5C4044",border:"none",transition:"all 0.2s ease",padding:"5px 10px",height:"38px",width:"45px",marginRight:"10px",marginBottom:"10px"},onMouseEnter:a=>{a.currentTarget.style.boxShadow="0px 4px 10px rgba(93, 138, 168, 0.6)",a.currentTarget.style.color="#000000"},onMouseLeave:a=>{a.currentTarget.style.boxShadow="none",a.currentTarget.style.color="#5C4044"},onClick:()=>Jo(o),children:e.jsx(g,{icon:kr})})]})]},o.Cod_actividad_academica)}):e.jsx(w,{children:e.jsx(u,{colSpan:"5",children:"No se encontraron resultados"})}),e.jsxs(w,{children:[e.jsx(u,{colSpan:"6",className:"text-end fw-bold",children:"Total:"}),e.jsx(u,{className:"fw-bold",children:dr()}),e.jsx(u,{})]})]})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"16px"},children:[e.jsxs(ee,{"aria-label":"Page navigation",style:{display:"flex",gap:"10px"},children:[e.jsx(h,{style:{backgroundColor:"#6f8173",color:"#D9EAD3"},disabled:V===1,onClick:()=>ro(V-1),children:"Anterior"}),e.jsx(h,{style:{marginLeft:"10px",backgroundColor:"#6f8173",color:"#D9EAD3"},disabled:V===Math.ceil(pe.length/O),onClick:()=>ro(V+1),children:"Siguiente"})]}),e.jsxs("span",{style:{marginLeft:"10px"},children:["Página ",V," de ",Math.ceil(pe.length/O)]})]})]})]})};export{ma as default};
