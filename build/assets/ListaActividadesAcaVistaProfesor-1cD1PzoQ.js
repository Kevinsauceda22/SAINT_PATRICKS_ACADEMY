import{r as f,x as dr,j as o,h as ye}from"./index-SVRFFNc9.js";import{C as j}from"./index.esm-DWwMdKxH.js";import{S as s}from"./sweetalert2.esm.all-D3pEHXw3.js";import{l as je}from"./logo_saint_patrick-xw7Wl8f3.js";import{E as _e}from"./jspdf.plugin.autotable-gke1D7B3.js";import{u as v,w as we}from"./xlsx-lwdk4T0U.js";import{u as hr}from"./usePermission-BCWksQX7.js";import ur from"./AccessDenied-yaDW3Jao.js";import{C as pr}from"./CContainer-BdNP0s3v.js";import{C as z,a as k}from"./CRow-Bf67u6lu.js";import{C as Fe,a as Se,b as ve,c as Y}from"./CDropdownToggle-DlfIUTmX.js";import{c as Ne}from"./cil-description-MUzg6O3n.js";import{c as ke}from"./cil-file-CeQgYs_D.js";import{c as Ae}from"./cil-spreadsheet-CJUvf_vM.js";import{C as w}from"./CInputGroup-D-McUFva.js";import{C as S}from"./CInputGroupText-Cfu0fzaY.js";import{c as le}from"./cil-search-CDkY_4k-.js";import{C as _}from"./CFormInput-B_gylY64.js";import{a as b}from"./CButton-D9GPTbB6.js";import{c as de}from"./cil-brush-alt-CV61lKqC.js";import{C as X}from"./CFormSelect-CzT7g5tb.js";import{C as he,a as ue,b as A,c as F,d as pe,e as C}from"./CTable-98qqrSRH.js";import{C as ge}from"./CPagination-UopCEeNZ.js";import{c as Ee}from"./cil-arrow-left-D66Kb3Zq.js";import{c as gr}from"./cil-plus-D8mtC-W5.js";import{c as xr}from"./cil-pen-53d2I-C-.js";import{c as mr}from"./cil-trash-CBbKHhHb.js";import{C as ro,a as to,b as ao,c as no}from"./CModalHeader-Bhtr3bZe.js";import{C as so}from"./CForm-CYRkMwLo.js";import{C as io}from"./CFormTextarea-CdSXOYWN.js";import{c as fr}from"./cil-save-CHBg7z_U.js";import"./CConditionalPortal-DwBsYzTA.js";import"./CFormControlWrapper-OEJgTi6e.js";import"./CFormControlValidation-CtDkyDfm.js";import"./CFormLabel-szm2Dda9.js";import"./CBackdrop-BbuVwMMD.js";const rt=()=>{var Ze,Ke,Xe,Qe,Ue;const{canSelect:co,canInsert:lo,canUpdate:ho,canDelete:uo}=hr("ListaActividadesProfesor"),[I,po]=f.useState([]),[go,xo]=f.useState([]),[P,mo]=f.useState([]),[L,Te]=f.useState([]);f.useState("");const[d,fo]=f.useState(null),[l,bo]=f.useState(null),[R,B]=f.useState("secciones"),[m,Co]=f.useState(null),[yo,Q]=f.useState(!1),[De,jo]=f.useState(""),[c,E]=f.useState({Cod_profesor:"",Cod_ponderacion_ciclo:"",Cod_parcial:"",Nombre_actividad_academica:"",Descripcion:"",Fechayhora_Inicio:"",Fechayhora_Fin:"",Valor:"",Cod_secciones:"",Cod_seccion_asignatura:""}),[J,_o]=f.useState([]);f.useState([]);const[xe,me]=f.useState(!1),[n,D]=f.useState(null),[br,wo]=f.useState(0);f.useState([]);const[$,Fo]=f.useState(5),[fe,ze]=f.useState(""),[O,U]=f.useState(1),[Z,So]=f.useState(5),[Pe,Me]=f.useState(""),[V,ee]=f.useState(1),[H,vo]=f.useState(5),[Ie,Re]=f.useState(""),[W,oe]=f.useState(1),[G,No]=f.useState(5),[$e,Le]=f.useState(""),[q,re]=f.useState(1),[Cr,ko]=f.useState(!1);f.useEffect(()=>{const e=localStorage.getItem("token");if(e)try{const r=dr(e);console.log("Token decodificado:",r)}catch(r){console.error("Error al decodificar el token:",r)}},[]);const Ao=async()=>{try{const e=localStorage.getItem("token"),r=await fetch("http://74.50.68.87:4000/api/profesores/obtenerCodProfesor",{headers:{Authorization:`Bearer ${e}`}});if(!r.ok)throw new Error("Error al obtener el código del profesor");const t=await r.json();jo(t.Cod_profesor)}catch(e){console.error("Error al obtener el código del profesor:",e),s.fire("Error","No se pudo obtener el código del profesor.","error")}},Eo=async()=>{try{const e=localStorage.getItem("token"),t=await(await fetch("http://74.50.68.87:4000/api/seccion/porprofesores",{method:"GET",headers:{Authorization:`Bearer ${e}`}})).json();po(t.secciones)}catch{s.fire("Error","No se pudieron cargar las secciones.","error")}},To=async e=>{try{const r=localStorage.getItem("token"),t=await fetch(`http://74.50.68.87:4000/api/asignaturas/porprofesor/${e}`,{headers:{Authorization:`Bearer ${r}`}});if(!t.ok)throw new Error("Error al obtener asignaturas.");const a=await t.json();console.log("Asignaturas obtenidas:",a),xo(a)}catch(r){console.error("Error al obtener las asignaturas:",r),s.fire("Error","No se pudieron cargar las asignaturas.","error")}},Do=async()=>{try{const e=await fetch("http://74.50.68.87:4000/api/parciales/verParciales",{method:"GET"}),r=await e.json();if(console.log("Respuesta completa:",r),!e.ok)throw console.error("Error en la respuesta de la API:",r),new Error(r.mensaje||"Error desconocido en la API.");console.log("Parciales obtenidos:",r),mo(r)}catch(e){console.error("Error al obtener los parciales:",e),s.fire("Error",`Error al obtener los parciales: ${e.message}`,"error")}},zo=async()=>{try{const e=localStorage.getItem("token"),r=await fetch("http://74.50.68.87:4000/api/actividadesAcademicas/obtenerPonderacionesPorProfesor",{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!r.ok)throw new Error("Error al obtener las ponderaciones del profesor.");const t=await r.json();console.log("Ponderaciones obtenidas:",t),_o(t)}catch(e){console.error("Error al obtener las ponderaciones:",e),s.fire("Error","No se pudieron cargar las ponderaciones del profesor.","error")}},te=(e,r)=>{const t=e.target,a=t.selectionStart;let i=t.value.toUpperCase().trimStart();const g=/^[A-ZÁÉÍÓÚÑ0-9\s,;:.]*$/;if(/[.,;:]{2,}/.test(i)){s.fire({icon:"warning",title:"Símbolos repetidos",text:'No se permite que los símbolos ",", ";", ":", o "." se repitan dos veces seguidas.'});return}if(/\s{2,}/.test(i)&&(s.fire({icon:"warning",title:"Espacios múltiples",text:"No se permite más de un espacio entre palabras."}),i=i.replace(/\s+/g," ")),!g.test(i)){s.fire({icon:"warning",title:"Caracteres no permitidos",text:"Solo se permiten letras, números, tildes, comas, punto y coma, dos puntos, puntos y espacios."});return}const h=i.split(" ");for(let x of h){const u={};for(let p of x)if(u[p]=(u[p]||0)+1,u[p]>4){s.fire({icon:"warning",title:"Repetición de letras",text:`La letra "${p}" se repite más de 4 veces en la palabra "${x}".`});return}}t.value=i,r(i),ko(!0),requestAnimationFrame(()=>{inputRef.current&&inputRef.current.setSelectionRange(a,a)})},Po=async()=>{try{const e=localStorage.getItem("token"),r=await fetch("http://74.50.68.87:4000/api/profesores/obtenerCodProfesor",{method:"GET",headers:{Authorization:`Bearer ${e}`}}),t=await r.json();if(!r.ok)throw new Error(t.mensaje||"Error al obtener el código del profesor");E({Cod_profesor:t.Cod_profesor||"N/A",Cod_ponderacion_ciclo:"",Cod_parcial:(m==null?void 0:m.Cod_parcial)||"N/A",Nombre_actividad_academica:"",Descripcion:"",Fechayhora_Inicio:"",Fechayhora_Fin:"",Valor:"",Cod_secciones:(d==null?void 0:d.Cod_secciones)||"N/A",Cod_seccion_asignatura:(l==null?void 0:l.Cod_seccion_asignatura)||"N/A"}),Q(!0)}catch(e){console.error("Error al abrir el modal y obtener el código del profesor:",e),s.fire("Error","No se pudo obtener el código del profesor.","error")}};f.useEffect(()=>{De&&d&&m&&l&&K()},[De,d,m,l]),f.useEffect(()=>{console.log("Actividad to update:",n),console.log("Update modal visible:",xe)},[n,xe]);const K=async()=>{try{if(!d||!m||!l){console.error("Faltan parámetros para obtener actividades.",{selectedSeccion:d,selectedParcial:m,selectedAsignatura:l});return}const e=localStorage.getItem("token"),r=await fetch(`http://74.50.68.87:4000/api/actividadesAcademicas/actividadesporparcialseccion?codSeccion=${d.Cod_secciones}&codParcial=${m.Cod_parcial}&codAsignatura=${l.Cod_asignatura}`,{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!r.ok)throw new Error("Error al obtener actividades.");const t=await r.json();Te(Array.isArray(t)?t:[]);const a=t.reduce((i,g)=>i+(g.Valor||0),0);wo(a)}catch(e){console.error("Error al obtener actividades:",e),s.fire("Error","No se pudieron cargar las actividades.","error"),Te([])}},ae=e=>{if(!e)return"";const r=new Date(e),t=r.getFullYear(),a=String(r.getMonth()+1).padStart(2,"0"),i=String(r.getDate()).padStart(2,"0"),g=String(r.getHours()).padStart(2,"0"),h=String(r.getMinutes()).padStart(2,"0");return`${t}-${a}-${i}T${g}:${h}`},Mo=e=>{fo(e),B("asignaturas"),To(e.Cod_secciones)},Io=e=>{if(!d){console.error("Error: selectedSeccion está undefined."),s.fire("Error","Debe seleccionar una sección válida.","error");return}if(!e||!e.Cod_asignatura){console.error("Error: asignatura o Cod_asignatura está undefined.",{asignatura:e}),s.fire("Error","Debe seleccionar una asignatura válida.","error");return}bo(e),B("parciales"),console.log("Fetching parciales con:",{Cod_secciones:d.Cod_secciones,Cod_asignatura:e.Cod_asignatura}),Do(d.Cod_secciones,e.Cod_asignatura)},Ro=e=>{if(!d||!l||!e){s.fire("Error","Debe seleccionar una sección, asignatura y parcial válidos.","error");return}Co(e),B("actividades"),K(d==null?void 0:d.Cod_secciones,e==null?void 0:e.Cod_parcial,l==null?void 0:l.Cod_seccion_asignatura)},be=()=>{R==="actividades"?B("parciales"):R==="parciales"?B("asignaturas"):R==="asignaturas"&&B("secciones")};f.useEffect(()=>{Eo(),Ao(),zo()},[]);const N=e=>{e.preventDefault(),s.fire({icon:"warning",title:"Accion bloquear",text:"Copiar y pegar no esta permitido"})},$o=async()=>{try{const e=localStorage.getItem("token");if(!e){s.fire("Error","No tienes permiso para realizar esta acción","error");return}const r=ye(e);if(!r.cod_usuario||!r.nombre_usuario)throw console.error("No se pudo obtener el código o el nombre de usuario del token"),new Error("No se pudo obtener el código o el nombre de usuario del token");if(console.log("Valores actuales de nuevaActividad:",c),!c.Cod_ponderacion_ciclo||!c.Nombre_actividad_academica||!c.Descripcion||!c.Fechayhora_Inicio||!c.Fechayhora_Fin||!c.Valor){s.fire("Error","Todos los campos son requeridos. Por favor, complete todos los campos.","error");return}const t=new Date(c.Fechayhora_Inicio),a=new Date(c.Fechayhora_Fin);if(t>a){s.fire({icon:"error",title:"Fechas inválidas",text:'La "fecha inicio" no puede ser mayor que la "fecha fin".'});return}if(!await Lo(c.Cod_ponderacion_ciclo,l==null?void 0:l.Cod_seccion_asignatura,m==null?void 0:m.Cod_parcial,c.Valor))return;const g={...c,Cod_secciones:d==null?void 0:d.Cod_secciones,Cod_parcial:m==null?void 0:m.Cod_parcial,Cod_seccion_asignatura:l==null?void 0:l.Cod_seccion_asignatura},h=await fetch("http://74.50.68.87:4000/api/actividadesAcademicas/registrar",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(g)}),x=await h.json();if(h.ok){const u=`El usuario: ${r.nombre_usuario} ha creado nueva actividad académica: ${c.Nombre_actividad_academica} `;(await fetch("http://74.50.68.87:4000/api/bitacora/registro",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({cod_usuario:r.cod_usuario,cod_objeto:83,accion:"INSERT",descripcion:u})})).ok?console.log("Registro en bitácora exitoso"):s.fire("Error","No se pudo registrar la acción en la bitácora","error"),s.fire({icon:"success",title:"¡Éxito!",text:"La actividad se ha creado correctamente.",confirmButtonText:"Aceptar"}),K(d==null?void 0:d.Cod_secciones,m==null?void 0:m.Cod_parcial,l==null?void 0:l.Cod_seccion_asignatura),Q(!1),E({Cod_profesor:"",Cod_ponderacion_ciclo:"",Cod_parcial:"",Nombre_actividad_academica:"",Descripcion:"",Fechayhora_Inicio:"",Fechayhora_Fin:"",Valor:"",Cod_secciones:"",Cod_seccion_asignatura:""})}else s.fire("Error",`Problema al crear actividad: ${x.mensaje}`,"error")}catch(e){console.error("Error al crear la actividad",e),s.fire("Error","Error en el servidor al crear la actividad","error")}},Lo=async(e,r,t,a)=>{try{const i=await fetch("http://74.50.68.87:4000/api/actividadesacademicas/validar-valor",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Cod_ponderacion_ciclo:e,Cod_seccion_asignatura:r,Cod_parcial:t,Valor:a})}),g=await i.json();return i.ok?!0:(s.fire("Error",g.mensaje,"error"),!1)}catch(i){return console.error("Error al validar el valor de la actividad:",i),s.fire("Error","Error en la validación del valor.","error"),!1}},Bo=async()=>{const{Nombre_actividad_academica:e,Descripcion:r,Fechayhora_Inicio:t,Fechayhora_Fin:a,Valor:i,Cod_actividad_academica:g}=n;if(!e||!r||!t||!a||!i){s.fire({icon:"error",title:"Error",text:"Todos los campos son obligatorios."});return}const h=new Date(t),x=new Date(a);if(h>x){s.fire({icon:"error",title:"Fechas inválidas",text:'La "fecha inicio" no puede ser mayor que la "fecha fin".'});return}try{const u=localStorage.getItem("token");if(!u){s.fire("Error","No tienes permiso para realizar esta acción","error");return}const p=ye(u);if(!p.cod_usuario||!p.nombre_usuario)throw console.error("No se pudo obtener el código o el nombre de usuario del token"),new Error("No se pudo obtener el código o el nombre de usuario del token");const y=await fetch("http://74.50.68.87:4000/api/actividadesacademicas/validar-valoractua",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Cod_ponderacion_ciclo:n.Cod_ponderacion_ciclo,Cod_seccion_asignatura:l==null?void 0:l.Cod_seccion_asignatura,Cod_parcial:m==null?void 0:m.Cod_parcial,Valor:parseFloat(i),Cod_actividad_academica:g})}),T=await y.json();if(!y.ok){s.fire("Error",T.mensaje,"error");return}if(!(await fetch(`http://74.50.68.87:4000/api/actividadesAcademicas/${g}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${u}`},body:JSON.stringify({Nombre_actividad_academica:e,Descripcion:r,Fechayhora_Inicio:t,Fechayhora_Fin:a,Valor:i})})).ok)throw new Error("Error en la actualización.");const ce=`El usuario: ${p.nombre_usuario} ha actualizado la actividad academica: ${e}, con valor ${i}`;(await fetch("http://74.50.68.87:4000/api/bitacora/registro",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${u}`},body:JSON.stringify({cod_usuario:p.cod_usuario,cod_objeto:83,accion:"UPDATE",descripcion:ce})})).ok?console.log("Registro en bitácora exitoso"):s.fire("Error","No se pudo registrar la acción en la bitácora","error"),s.fire({icon:"success",title:"¡Éxito!",text:"La actividad se ha actualizado correctamente.",confirmButtonText:"Aceptar"}),await K(d==null?void 0:d.Cod_secciones,m==null?void 0:m.Cod_parcial,l==null?void 0:l.Cod_seccion_asignatura),Vo()}catch(u){console.error("Error al actualizar la actividad:",u),s.fire("Error","No se pudo actualizar la actividad.","error")}},Oo=e=>{D(e),me(!0)},Vo=()=>{me(!1),D(null)},Ho=async(e,r)=>{try{const t=localStorage.getItem("token");if(!t){s.fire("Error","No tienes permiso para realizar esta acción","error");return}const a=ye(t);if(!a.cod_usuario||!a.nombre_usuario)throw console.error("No se pudo obtener el código o el nombre de usuario del token"),new Error("No se pudo obtener el código o el nombre de usuario del token");if((await s.fire({title:"¿Estás seguro?",text:"Esta acción eliminará la actividad de forma permanente.",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"})).isConfirmed){const g=await fetch(`http://74.50.68.87:4000/api/actividadesAcademicas/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}}),h=await g.json();if(g.ok){const x=`El usuario: ${a.nombre_usuario} ha eliminado la actividad: ${r} con codigo ${e}`;(await fetch("http://74.50.68.87:4000/api/bitacora/registro",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({cod_usuario:a.cod_usuario,cod_objeto:83,accion:"DELETE",descripcion:x})})).ok?console.log("Registro en bitácora exitoso"):s.fire("Error","No se pudo registrar la acción en la bitácora","error"),s.fire({icon:"success",title:"¡Éxito!",text:h.mensaje,confirmButtonText:"Aceptar"}),K(d==null?void 0:d.Cod_secciones,m==null?void 0:m.Cod_parcial,l==null?void 0:l.Cod_seccion_asignatura)}else s.fire("Error",`Problema al eliminar actividad: ${h.mensaje}`,"error")}}catch(t){console.error("Error al eliminar la actividad:",t),s.fire("Error","Error en el servidor al eliminar la actividad","error")}},Wo=e=>{const r=e.target.value.toUpperCase();if(!/^[A-ZÑ\s]*$/.test(r)){s.fire({icon:"warning",title:"Caracteres no permitidos",text:"Solo se permiten letras y espacios."});return}ze(r),U(1)},ne=I.filter(e=>e.Nombre_seccion.toLowerCase().includes(fe.toLowerCase())||e.Nombre_grado.toLowerCase().includes(fe.toLowerCase())),Be=O*$,Go=Be-$,qo=ne.slice(Go,Be),Oe=e=>{e>0&&e<=Math.ceil(ne.length/$)&&U(e)},Yo=e=>{const r=e.target.value.toUpperCase();if(!/^[A-ZÑ\s]*$/.test(r)){s.fire({icon:"warning",title:"Caracteres no permitidos",text:"Solo se permiten letras y espacios."});return}Me(r),ee(1)},se=go.filter(e=>e.Nombre_asignatura.toLowerCase().includes(Pe.toLowerCase())),Ve=V*Z,Jo=Ve-Z,Zo=se.slice(Jo,Ve),He=e=>{e>0&&e<=Math.ceil(se.length/Z)&&ee(e)},Ko=e=>{const r=e.target.value.toUpperCase();if(!/^[A-ZÑ\s]*$/.test(r)){s.fire({icon:"warning",title:"Caracteres no permitidos",text:"Solo se permiten letras y espacios."});return}Re(r),oe(1)},ie=P.filter(e=>e.Nombre_parcial.toLowerCase().includes(Ie.toLowerCase())),We=W*H,Xo=We-H,Qo=ie.slice(Xo,We),Ge=e=>{e>0&&e<=Math.ceil(ie.length/H)&&oe(e)},Uo=e=>{const r=e.target.value.toUpperCase();if(!/^[A-ZÑ\s]*$/.test(r)){s.fire({icon:"warning",title:"Caracteres no permitidos",text:"Solo se permiten letras y espacios."});return}Le(r),re(1)},M=L.filter(e=>e.Nombre_actividad_academica.toLowerCase().includes($e.toLowerCase())),qe=q*G,er=qe-G,or=M.slice(er,qe),Ye=e=>{e>0&&e<=Math.ceil(M.length/G)&&re(e)},rr=()=>{if(!I||I.length===0){s.fire({icon:"info",title:"Tabla vacía",text:"No hay datos disponibles para generar el reporte excel.",confirmButtonText:"Aceptar"});return}const e=[["Saint Patric'ks Academy"],["Reporte de Secciones"],[],["#","Sección","Grado","Año Académico"]],r=I.map((u,p)=>[p+1,u.Nombre_seccion,u.Nombre_grado,u.Anio_academico]),t=[...e,...r],a=v.aoa_to_sheet(t),i=v.decode_range(a["!ref"]);for(let u=0;u<=3;u++)for(let p=i.s.c;p<=i.e.c;p++){const y=v.encode_cell({r:u,c:p});a[y]&&(a[y].s={font:{bold:!0,sz:14,color:{rgb:"FFFFFF"}},fill:{fgColor:{rgb:"15401D"}},alignment:{horizontal:"center"}})}const g=[{wpx:100},{wpx:100},{wpx:100},{wpx:100},{wpx:100}];a["!cols"]=g;const h=v.book_new();v.book_append_sheet(h,a,"Reporte de Secciones"),we(h,"Reporte_Secciones.xlsx")},tr=()=>{if(!I||I.length===0){s.fire({icon:"info",title:"Tabla vacía",text:"No hay datos disponibles para generar el reporte.",confirmButtonText:"Aceptar"});return}const e=new _e,r=new Image;r.src=je,r.onload=()=>{e.addImage(r,"PNG",10,10,30,30);let t=20;e.setFontSize(18),e.setTextColor(0,102,51),e.text("SAINT PATRICK'S ACADEMY",e.internal.pageSize.width/2,t,{align:"center"}),t+=12,e.setFontSize(16),e.text("Reporte de Secciones",e.internal.pageSize.width/2,t,{align:"center"}),t+=10,e.setFontSize(10),e.setTextColor(100),e.text("Casa Club del periodista, Colonia del Periodista",e.internal.pageSize.width/2,t,{align:"center"}),t+=4,e.text("Teléfono: (504) 2234-8871",e.internal.pageSize.width/2,t,{align:"center"}),t+=4,e.text("Correo: info@saintpatrickacademy.edu",e.internal.pageSize.width/2,t,{align:"center"}),t+=6,e.setLineWidth(.5),e.setDrawColor(0,102,51),e.line(10,t,e.internal.pageSize.width-10,t);const a=e.internal.pageSize.height;let i=1;e.autoTable({startY:t+4,head:[["#","Sección","Grado","Año Académico"]],body:I.map((g,h)=>[h+1,`${g.Nombre_seccion||""}`.trim(),g.Nombre_grado,g.Anio_academico]),headStyles:{fillColor:[0,102,51],textColor:[255,255,255],fontSize:10},styles:{fontSize:10,cellPadding:3,halign:"center"},columnStyles:{0:{cellWidth:"auto"},1:{cellWidth:"auto"},2:{cellWidth:"auto"},3:{cellWidth:"auto"}},alternateRowStyles:{fillColor:[240,248,255]},didDrawPage:g=>{const h=new Date,x=`${h.toLocaleDateString()} ${h.toLocaleTimeString()}`;e.setFontSize(10),e.setTextColor(100),e.text(`Fecha y hora de generación: ${x}`,10,a-10);const u=e.internal.getNumberOfPages();e.text(`Página ${i} de ${u}`,e.internal.pageSize.width-30,a-10),i+=1}}),window.open(e.output("bloburl"),"_blank")},r.onerror=()=>{console.warn("No se pudo cargar el logo. El PDF se generará sin el logo."),window.open(e.output("bloburl"),"_blank")}},ar=()=>{if(!P||P.length===0){s.fire({icon:"info",title:"Tabla vacía",text:"No hay datos disponibles para generar el reporte excel.",confirmButtonText:"Aceptar"});return}const e=[["Saint Patric'ks Academy"],["Reporte de Parciales"],[],["#","Parcial"]],r=P.map((u,p)=>[p+1,u.Nombre_parcial]),t=[...e,...r],a=v.aoa_to_sheet(t),i=v.decode_range(a["!ref"]);for(let u=0;u<=3;u++)for(let p=i.s.c;p<=i.e.c;p++){const y=v.encode_cell({r:u,c:p});a[y]&&(a[y].s={font:{bold:!0,sz:14,color:{rgb:"FFFFFF"}},fill:{fgColor:{rgb:"15401D"}},alignment:{horizontal:"center"}})}const g=[{wpx:100},{wpx:100},{wpx:100},{wpx:100},{wpx:100}];a["!cols"]=g;const h=v.book_new();v.book_append_sheet(h,a,"Reporte de Parciales"),we(h,"Reporte_Parciales.xlsx")},nr=()=>{if(!P||P.length===0){s.fire({icon:"info",title:"Tabla vacía",text:"No hay datos disponibles para generar el reporte.",confirmButtonText:"Aceptar"});return}const e=new _e,r=new Image;r.src=je,r.onload=()=>{e.addImage(r,"PNG",10,10,30,30);let t=20;e.setFontSize(18),e.setTextColor(0,102,51),e.text("SAINT PATRICK'S ACADEMY",e.internal.pageSize.width/2,t,{align:"center"}),t+=12,e.setFontSize(16),e.text("Reporte de Parciales",e.internal.pageSize.width/2,t,{align:"center"}),t+=10,e.setFontSize(10),e.setTextColor(100),e.text("Casa Club del periodista, Colonia del Periodista",e.internal.pageSize.width/2,t,{align:"center"}),t+=4,e.text("Teléfono: (504) 2234-8871",e.internal.pageSize.width/2,t,{align:"center"}),t+=4,e.text("Correo: info@saintpatrickacademy.edu",e.internal.pageSize.width/2,t,{align:"center"}),t+=6,e.setLineWidth(.5),e.setDrawColor(0,102,51),e.line(10,t,e.internal.pageSize.width-10,t);const a=e.internal.pageSize.height;let i=1;e.autoTable({startY:t+4,head:[["#","Parcial"]],body:P.map((g,h)=>[h+1,`${g.Nombre_parcial||""}`.trim()]),headStyles:{fillColor:[0,102,51],textColor:[255,255,255],fontSize:10},styles:{fontSize:10,cellPadding:3,halign:"center"},columnStyles:{0:{cellWidth:"auto"},1:{cellWidth:"auto"},2:{cellWidth:"auto"},3:{cellWidth:"auto"}},alternateRowStyles:{fillColor:[240,248,255]},didDrawPage:g=>{const h=new Date,x=`${h.toLocaleDateString()} ${h.toLocaleTimeString()}`;e.setFontSize(10),e.setTextColor(100),e.text(`Fecha y hora de generación: ${x}`,10,a-10);const u=e.internal.getNumberOfPages();e.text(`Página ${i} de ${u}`,e.internal.pageSize.width-30,a-10),i+=1}}),window.open(e.output("bloburl"),"_blank")},r.onerror=()=>{console.warn("No se pudo cargar el logo. El PDF se generará sin el logo."),window.open(e.output("bloburl"),"_blank")}},Je=e=>{const r=new Date(e),t={day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1};return r.toLocaleDateString("es-ES",t).replace(",","")},sr=()=>{if(!L||L.length===0){s.fire({icon:"info",title:"Tabla vacía",text:"No hay datos disponibles para generar el reporte excel.",confirmButtonText:"Aceptar"});return}const e=[];d!=null&&d.Nombre_seccion&&(l!=null&&l.Nombre_asignatura)&&(m!=null&&m.Nombre_parcial)?e.push([`Sección: ${d.Nombre_seccion} | Asignatura: ${l.Nombre_asignatura} | Parcial: ${m.Nombre_parcial}`]):d!=null&&d.Nombre_seccion&&anioSeccionSeleccionada?e.push([`Sección: ${d.Nombre_seccion} | Año: ${anioSeccionSeleccionada}`]):l!=null&&l.Nombre_asignatura&&e.push([`Asignatura: ${l.Nombre_asignatura}`]),e.push([]);const r=[["Saint Patric'ks Academy"],["Reporte de Actividades"],[],["#","Nombre Actividad","Descripción","FechayHora_Inicio","FechayHora_Fin","Valor"]],t=L.map((p,y)=>[y+1,p.Nombre_actividad_academica,p.Descripcion,Je(p.Fechayhora_Inicio),Je(p.Fechayhora_Fin),p.Valor]),a=[...e,...r,...t],i=v.aoa_to_sheet(a),g=v.decode_range(i["!ref"]);for(let p=0;p<=3;p++)for(let y=g.s.c;y<=g.e.c;y++){const T=v.encode_cell({r:p,c:y});i[T]&&(i[T].s={font:{bold:!0,sz:14,color:{rgb:"FFFFFF"}},fill:{fgColor:{rgb:"15401D"}},alignment:{horizontal:"center"}})}const h=[{wpx:100},{wpx:150},{wpx:200},{wpx:150},{wpx:150},{wpx:100}];i["!cols"]=h;const x=v.book_new();v.book_append_sheet(x,i,"Reporte de Actividades"),we(x,"Reporte_Actividades.xlsx")},ir=()=>{if(!M||M.length===0){s.fire({icon:"info",title:"Sin datos",text:"No hay datos disponibles para generar el reporte.",confirmButtonText:"Aceptar"});return}const e=M.reduce((a,i)=>a+parseFloat(i.Valor||0),0).toFixed(2),r=new _e("landscape"),t=new Image;t.src=je,t.onload=()=>{r.addImage(t,"PNG",10,10,30,30);let a=20;r.setFontSize(18),r.setTextColor(0,102,51),r.text("SAINT PATRICK'S ACADEMY",r.internal.pageSize.width/2,a,{align:"center"}),a+=10,r.setFontSize(10),r.setTextColor(100),r.text("Casa Club del periodista, Colonia del Periodista",r.internal.pageSize.width/2,a,{align:"center"}),a+=4,r.text("Teléfono: (504) 2234-8871",r.internal.pageSize.width/2,a,{align:"center"}),a+=4,r.text("Correo: info@saintpatrickacademy.edu",r.internal.pageSize.width/2,a,{align:"center"}),a+=10,r.setTextColor(0,102,51),r.setFontSize(16),r.text("Reporte de Actividades Académicas",r.internal.pageSize.width/2,a,{align:"center"}),a+=10,r.setFontSize(12),r.setTextColor(0,102,51),r.setFont("helvetica","bold"),d!=null&&d.Nombre_seccion&&(l!=null&&l.Nombre_asignatura)&&(m!=null&&m.Nombre_parcial)&&r.text(`Sección: ${d.Nombre_seccion} | Asignatura: ${l.Nombre_asignatura} | Parcial: ${m.Nombre_parcial}`,r.internal.pageSize.width/2,a,{align:"center"}),a+=10,r.setLineWidth(.5),r.setDrawColor(0,102,51),r.line(10,a,r.internal.pageSize.width-10,a),a+=6;const i=r.internal.pageSize.height;let g=1;const h=M.map((x,u)=>{var p;return[u+1,x.Nombre_actividad_academica||"",x.Descripcion||"",((p=J.find(y=>y.Cod_ponderacion_ciclo===x.Cod_ponderacion_ciclo))==null?void 0:p.Descripcion_ponderacion)||"N/A",x.Fechayhora_Inicio?new Date(x.Fechayhora_Inicio).toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",x.Fechayhora_Fin?new Date(x.Fechayhora_Fin).toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",x.Valor]});r.autoTable({startY:a,head:[["#","Nombre Actividad","Descripción","Ponderación","Inicio","Fin","Valor"]],body:h,headStyles:{fillColor:[0,102,51],textColor:[255,255,255],fontSize:9},styles:{fontSize:8,cellPadding:2,overflow:"linebreak",valign:"middle"},foot:[["","","","","","Total:",e]],headStyles:{fillColor:[0,102,51],textColor:[255,255,255],fontSize:9},styles:{fontSize:8,cellPadding:2,overflow:"linebreak",valign:"middle"},footStyles:{fillColor:[0,102,51],textColor:[255,255,255],fontSize:10},columnStyles:{0:{cellWidth:10},1:{cellWidth:50},2:{cellWidth:60},3:{cellWidth:50},4:{cellWidth:40},5:{cellWidth:40},6:{cellWidth:20}},tableWidth:"auto",margin:{left:10,right:10},didDrawPage:x=>{const u=new Date,p=`${u.toLocaleDateString()} ${u.toLocaleTimeString()}`;r.setFontSize(10),r.setTextColor(100),r.text(`Fecha y hora de generación: ${p}`,10,i-10);const y=r.internal.getNumberOfPages();r.text(`Página ${g} de ${y}`,r.internal.pageSize.width-30,i-10),g+=1}}),window.open(r.output("bloburl"),"_blank")},t.onerror=()=>{s.fire({icon:"error",title:"Error",text:"No se pudo cargar el logo para el reporte."})}};if(!co)return o.jsx(ur,{});const cr=()=>L.reduce((e,r)=>e+parseFloat((r==null?void 0:r.Valor)||0),0).toFixed(2);return o.jsxs(pr,{children:[R==="secciones"&&o.jsxs("div",{children:[o.jsx(z,{className:"align-items-center mb-5",children:o.jsxs(k,{xs:"12",className:"d-flex flex-column flex-md-row justify-content-between align-items-center gap-3",children:[o.jsx("div",{className:"flex-grow-1 text-center",children:o.jsx("h4",{className:"text-center fw-semibold pb-2 mb-0",style:{display:"inline-block",borderBottom:"2px solid #4CAF50"},children:"Actividades: Mis Secciones"})}),o.jsxs(Fe,{className:"btn-sm d-flex align-items-center gap-1 rounded shadow",children:[o.jsxs(Se,{style:{backgroundColor:"#6C8E58",color:"white",fontSize:"0.85rem",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#5A784C",e.currentTarget.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.2)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#6C8E58",e.currentTarget.style.boxShadow="none"},children:[o.jsx(j,{icon:Ne}),"  Reporte"]}),o.jsxs(ve,{style:{position:"absolute",zIndex:1050,backgroundColor:"#fff",boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.2)",borderRadius:"4px",overflow:"hidden"},children:[o.jsxs(Y,{onClick:tr,style:{cursor:"pointer",outline:"none",backgroundColor:"transparent",padding:"0.5rem 1rem",fontSize:"0.85rem",color:"#333",borderBottom:"1px solid #eaeaea",transition:"background-color 0.3s"},onMouseOver:e=>e.target.style.backgroundColor="#f5f5f5",onMouseOut:e=>e.target.style.backgroundColor="transparent",children:[o.jsx(j,{icon:ke,size:"sm"})," Abrir en PDF"]}),o.jsxs(Y,{onClick:rr,style:{cursor:"pointer",outline:"none",backgroundColor:"transparent",padding:"0.5rem 1rem",fontSize:"0.85rem",color:"#333",transition:"background-color 0.3s"},onMouseOver:e=>e.target.style.backgroundColor="#f5f5f5",onMouseOut:e=>e.target.style.backgroundColor="transparent",children:[o.jsx(j,{icon:Ae,size:"sm"})," Descargar Excel"]})]})]})]})}),o.jsxs(z,{className:"align-items-center mt-4 mb-2",children:[o.jsx(k,{xs:"12",md:"8",className:"d-flex flex-wrap align-items-center",children:o.jsxs(w,{className:"me-3",style:{width:"350px"},children:[o.jsx(S,{children:o.jsx(j,{icon:le})}),o.jsx(_,{style:{width:"80px",height:"35px",display:"inline-block"},placeholder:"Buscar sección...",onChange:Wo,value:fe}),o.jsxs(b,{style:{border:"1px solid #ccc",transition:"all 0.1s ease-in-out",backgroundColor:"#F3F4F7",color:"#343a40",height:"35px"},onClick:()=>{ze(""),U(1)},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#E0E0E0",e.currentTarget.style.color="black"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#F3F4F7",e.currentTarget.style.color="#343a40"},children:[o.jsx(j,{icon:de})," Limpiar"]})]})}),o.jsx(k,{xs:"12",md:"4",className:"text-md-end mt-2 mt-md-0",children:o.jsx(w,{style:{width:"auto",display:"inline-block"},children:o.jsxs("div",{className:"d-inline-flex align-items-center",children:[o.jsx("span",{style:{fontSize:"0.85rem"},children:"Mostrar "}),o.jsxs(X,{style:{width:"80px",height:"35px",display:"inline-block",textAlign:"center"},onChange:e=>{const r=Number(e.target.value);Fo(r),U(1)},value:$,children:[o.jsx("option",{value:"5",children:"5"}),o.jsx("option",{value:"10",children:"10"}),o.jsx("option",{value:"20",children:"20"})]}),o.jsx("span",{style:{fontSize:"0.85rem"},children:" registros"})]})})})]}),o.jsx("div",{className:"table-responsive",style:{maxHeight:"400px",margin:"0 auto",overflowX:"auto",overflowY:"auto",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.3)"},children:o.jsxs(he,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[o.jsx(ue,{className:"sticky-top bg-light text-center",style:{fontSize:"0.8rem"},children:o.jsxs(A,{children:[o.jsx(F,{children:"#"}),o.jsx(F,{children:"NOMBRE"}),o.jsx(F,{children:"GRADO"}),o.jsx(F,{children:"AÑO ACADÉMICO"}),o.jsx(F,{children:"ACCIÓN"})]})}),o.jsx(pe,{className:"text-center",style:{fontSize:"0.85rem"},children:qo.map((e,r)=>o.jsxs(A,{children:[o.jsx(C,{children:r+1}),o.jsx(C,{children:e.Nombre_seccion}),o.jsx(C,{children:e.Nombre_grado}),o.jsx(C,{children:e.Anio_academico}),o.jsx(C,{children:o.jsx(b,{size:"sm",style:{backgroundColor:"#F0F4F3",color:"#153E21",border:"1px solid #A2B8A9",borderRadius:"6px",padding:"5px 12px",boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.1)"},onMouseEnter:t=>t.target.style.backgroundColor="#dce3dc",onMouseLeave:t=>t.target.style.backgroundColor="#F0F4F3",onClick:()=>Mo(e),children:"Gestionar Asignaturas"})})]},e.Cod_secciones))})]})}),o.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"16px"},children:[o.jsxs(ge,{"aria-label":"Page navigation",style:{display:"flex",gap:"10px"},children:[o.jsx(b,{style:{backgroundColor:"#6f8173",color:"#D9EAD3"},disabled:O===1,onClick:()=>Oe(O-1),children:"Anterior"}),o.jsx(b,{style:{marginLeft:"10px",backgroundColor:"#6f8173",color:"#D9EAD3"},disabled:O===Math.ceil(ne.length/$),onClick:()=>Oe(O+1),children:"Siguiente"})]}),o.jsxs("span",{style:{marginLeft:"10px"},children:["Página ",O," de ",Math.ceil(ne.length/$)]})]})]}),R==="asignaturas"&&d&&o.jsxs("div",{children:[o.jsx(z,{className:"align-items-center mb-5",children:o.jsxs(k,{xs:"12",className:"d-flex flex-column flex-md-row justify-content-between align-items-center gap-3",children:[o.jsxs(b,{className:"btn btn-sm d-flex align-items-center gap-1 rounded shadow",onMouseEnter:e=>e.currentTarget.style.backgroundColor="#4B4B4B",onMouseLeave:e=>e.currentTarget.style.backgroundColor="#656565",style:{backgroundColor:"#656565",color:"#FFFFFF",padding:"6px 12px",fontSize:"0.9rem",transition:"background-color 0.2s ease, box-shadow 0.3s ease",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)"},onClick:be,children:[o.jsx(j,{icon:Ee})," Regresar a secciones"]}),o.jsx("div",{className:"d-flex justify-content-center align-items-center flex-grow-1",children:o.jsxs("h4",{className:"text-center fw-semibold pb-2 mb-0",style:{display:"inline-block",borderBottom:"2px solid #4CAF50",margin:"0 auto"},children:["Asignaturas de la Sección: ",d.Nombre_seccion]})})]})}),o.jsxs(z,{className:"align-items-center mt-4 mb-2",children:[o.jsx(k,{xs:"12",md:"8",className:"d-flex flex-wrap align-items-center",children:o.jsxs(w,{className:"me-3",style:{width:"350px"},children:[o.jsx(S,{children:o.jsx(j,{icon:le})}),o.jsx(_,{style:{width:"80px",height:"35px",display:"inline-block"},placeholder:"Buscar Asignatura...",onChange:Yo,value:Pe}),o.jsxs(b,{style:{border:"1px solid #ccc",transition:"all 0.1s ease-in-out",backgroundColor:"#F3F4F7",color:"#343a40",height:"35px"},onClick:()=>{Me(""),ee(1)},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#E0E0E0",e.currentTarget.style.color="black"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#F3F4F7",e.currentTarget.style.color="#343a40"},children:[o.jsx(j,{icon:de})," Limpiar"]})]})}),o.jsx(k,{xs:"12",md:"4",className:"text-md-end mt-2 mt-md-0",children:o.jsx(w,{style:{width:"auto",display:"inline-block"},children:o.jsxs("div",{className:"d-inline-flex align-items-center",children:[o.jsx("span",{style:{fontSize:"0.85rem"},children:"Mostrar "}),o.jsxs(X,{style:{width:"80px",height:"35px",display:"inline-block",textAlign:"center"},onChange:e=>{const r=Number(e.target.value);So(r),ee(1)},value:$,children:[o.jsx("option",{value:"5",children:"5"}),o.jsx("option",{value:"10",children:"10"}),o.jsx("option",{value:"20",children:"20"})]}),o.jsx("span",{style:{fontSize:"0.85rem"},children:" registros"})]})})})]}),o.jsx("div",{className:"table-responsive",style:{maxHeight:"400px",overflowX:"auto",overflowY:"auto",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.3)"},children:o.jsxs(he,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[o.jsx(ue,{className:"sticky-top bg-light text-center",style:{fontSize:"0.8rem"},children:o.jsxs(A,{children:[o.jsx(F,{children:"#"}),o.jsx(F,{children:"NOMBRE DE LA ASIGNATURA"}),o.jsx(F,{children:"DESCRIPCIÓN"}),o.jsx(F,{style:{width:"180px",textAlign:"center"},children:"ACCIÓN"})]})}),o.jsx(pe,{className:"text-center",style:{fontSize:"0.85rem"},children:Zo.map((e,r)=>o.jsxs(A,{children:[o.jsx(C,{children:r+1}),o.jsx(C,{children:e.Nombre_asignatura}),o.jsx(C,{children:e.Descripcion_asignatura}),o.jsx(C,{children:o.jsx(b,{size:"sm",style:{backgroundColor:"#F0F4F3",color:"#153E21",border:"1px solid #A2B8A9",borderRadius:"6px",padding:"5px 12px",boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.1)"},onMouseEnter:t=>t.target.style.backgroundColor="#dce3dc",onMouseLeave:t=>t.target.style.backgroundColor="#F0F4F3",onClick:()=>Io(e),children:"Gestionar Parciales"})})]},e.Cod_asignatura))})]})}),o.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"16px"},children:[o.jsxs(ge,{"aria-label":"Page navigation",style:{display:"flex",gap:"10px"},children:[o.jsx(b,{style:{backgroundColor:"#6f8173",color:"#D9EAD3"},disabled:V===1,onClick:()=>He(V-1),children:"Anterior"}),o.jsx(b,{style:{marginLeft:"10px",backgroundColor:"#6f8173",color:"#D9EAD3"},disabled:V===Math.ceil(se.length/Z),onClick:()=>He(V+1),children:"Siguiente"})]}),o.jsxs("span",{style:{marginLeft:"10px"},children:["Página ",V," de ",Math.ceil(se.length/Z)]})]})]}),R==="parciales"&&o.jsxs("div",{children:[o.jsx(z,{className:"align-items-center mb-5",children:o.jsxs(k,{xs:"12",className:"d-flex flex-column flex-md-row justify-content-between align-items-center gap-3",children:[o.jsxs(b,{className:"btn btn-sm d-flex align-items-center gap-1 rounded shadow",onMouseEnter:e=>e.currentTarget.style.backgroundColor="#4B4B4B",onMouseLeave:e=>e.currentTarget.style.backgroundColor="#656565",style:{backgroundColor:"#656565",color:"#FFFFFF",padding:"6px 12px",fontSize:"0.9rem",transition:"background-color 0.2s ease, box-shadow 0.3s ease",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)"},onClick:be,children:[o.jsx(j,{icon:Ee}),"Regresar a asignatura"]}),o.jsx("div",{className:"d-flex justify-content-center align-items-center flex-grow-1",children:o.jsxs("h4",{className:"text-center fw-semibold pb-2 mb-0",style:{display:"inline-block",borderBottom:"2px solid #4CAF50",margin:"0 auto",fontSize:"1.5rem"},children:[" Seccion: ",d.Nombre_seccion," / Asignatura: ",l.Nombre_asignatura," / Parciales:  "]})}),o.jsxs(Fe,{className:"btn-sm d-flex align-items-center gap-1 rounded shadow",children:[o.jsxs(Se,{style:{backgroundColor:"#6C8E58",color:"white",fontSize:"0.85rem",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#5A784C",e.currentTarget.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.2)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#6C8E58",e.currentTarget.style.boxShadow="none"},children:[o.jsx(j,{icon:Ne}),"  Reporte"]}),o.jsxs(ve,{style:{position:"absolute",zIndex:1050,backgroundColor:"#fff",boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.2)",borderRadius:"4px",overflow:"hidden"},children:[o.jsxs(Y,{onClick:nr,style:{cursor:"pointer",outline:"none",backgroundColor:"transparent",padding:"0.5rem 1rem",fontSize:"0.85rem",color:"#333",borderBottom:"1px solid #eaeaea",transition:"background-color 0.3s"},onMouseOver:e=>e.target.style.backgroundColor="#f5f5f5",onMouseOut:e=>e.target.style.backgroundColor="transparent",children:[o.jsx(j,{icon:ke,size:"sm"})," Abrir en PDF"]}),o.jsxs(Y,{onClick:ar,style:{cursor:"pointer",outline:"none",backgroundColor:"transparent",padding:"0.5rem 1rem",fontSize:"0.85rem",color:"#333",transition:"background-color 0.3s"},onMouseOver:e=>e.target.style.backgroundColor="#f5f5f5",onMouseOut:e=>e.target.style.backgroundColor="transparent",children:[o.jsx(j,{icon:Ae,size:"sm"})," Descargar Excel"]})]})]})]})}),o.jsxs(z,{className:"align-items-center mt-4 mb-2",children:[o.jsx(k,{xs:"12",md:"8",className:"d-flex flex-wrap align-items-center",children:o.jsxs(w,{className:"me-3",style:{width:"350px"},children:[o.jsx(S,{children:o.jsx(j,{icon:le})}),o.jsx(_,{style:{width:"80px",height:"35px",display:"inline-block"},placeholder:"Buscar parcial...",onChange:Ko,value:Ie}),o.jsxs(b,{style:{border:"1px solid #ccc",transition:"all 0.1s ease-in-out",backgroundColor:"#F3F4F7",color:"#343a40",height:"35px"},onClick:()=>{Re(""),oe(1)},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#E0E0E0",e.currentTarget.style.color="black"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#F3F4F7",e.currentTarget.style.color="#343a40"},children:[o.jsx(j,{icon:de})," Limpiar"]})]})}),o.jsx(k,{xs:"12",md:"4",className:"text-md-end mt-2 mt-md-0",children:o.jsx(w,{style:{width:"auto",display:"inline-block"},children:o.jsxs("div",{className:"d-inline-flex align-items-center",children:[o.jsx("span",{style:{fontSize:"0.85rem"},children:"Mostrar "}),o.jsxs(X,{style:{width:"80px",height:"35px",display:"inline-block",textAlign:"center"},onChange:e=>{const r=Number(e.target.value);vo(r),oe(1)},value:H,children:[o.jsx("option",{value:"5",children:"5"}),o.jsx("option",{value:"10",children:"10"}),o.jsx("option",{value:"20",children:"20"})]}),o.jsx("span",{style:{fontSize:"0.85rem"},children:" registros"})]})})})]}),o.jsx("div",{className:"table-responsive",style:{maxHeight:"400px",overflowX:"auto",overflowY:"auto",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.3)"},children:o.jsxs(he,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[o.jsx(ue,{className:"sticky-top bg-light text-center",style:{fontSize:"0.8rem"},children:o.jsxs(A,{children:[o.jsx(F,{children:"#"}),o.jsx(F,{children:"PARCIAL"}),o.jsx(F,{style:{width:"180px",textAlign:"center"},children:"ACCIÓN"})]})}),o.jsx(pe,{className:"text-center",style:{fontSize:"0.85rem"},children:P.length>0?Qo.map((e,r)=>o.jsxs(A,{children:[o.jsx(C,{children:r+1}),o.jsx(C,{children:e.Nombre_parcial}),o.jsx(C,{children:o.jsx(b,{size:"sm",style:{backgroundColor:"#F0F4F3",color:"#153E21",border:"1px solid #A2B8A9",borderRadius:"6px",padding:"5px 12px",boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.1)"},onMouseEnter:t=>t.target.style.backgroundColor="#dce3dc",onMouseLeave:t=>t.target.style.backgroundColor="#F0F4F3",onClick:()=>Ro(e),children:"Gestionar Actividades"})})]},e.Cod_parcial)):o.jsx(A,{children:o.jsx(C,{colSpan:"4",children:"No hay parciales disponibles."})})})]})}),o.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"16px"},children:[o.jsxs(ge,{"aria-label":"Page navigation",style:{display:"flex",gap:"10px"},children:[o.jsx(b,{style:{backgroundColor:"#6f8173",color:"#D9EAD3"},disabled:W===1,onClick:()=>Ge(W-1),children:"Anterior"}),o.jsx(b,{style:{marginLeft:"10px",backgroundColor:"#6f8173",color:"#D9EAD3"},disabled:W===Math.ceil(ie.length/H),onClick:()=>Ge(W+1),children:"Siguiente"})]}),o.jsxs("span",{style:{marginLeft:"10px"},children:["Página ",W," de ",Math.ceil(ie.length/H)]})]})]}),R==="actividades"&&o.jsxs("div",{children:[o.jsx(z,{className:"align-items-center mb-5",children:o.jsxs(k,{xs:"12",className:"d-flex flex-column flex-md-row justify-content-between align-items-center gap-3",children:[o.jsxs(b,{lassName:"btn btn-sm d-flex align-items-center gap-1 rounded shadow",onMouseEnter:e=>e.currentTarget.style.backgroundColor="#4B4B4B",onMouseLeave:e=>e.currentTarget.style.backgroundColor="#656565",style:{backgroundColor:"#656565",color:"#FFFFFF",padding:"6px 12px",fontSize:"0.9rem",transition:"background-color 0.2s ease, box-shadow 0.3s ease",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)"},onClick:be,children:[o.jsx(j,{icon:Ee})," Regresar a parciales"]}),o.jsx("div",{className:"d-flex justify-content-center align-items-center flex-grow-1",children:o.jsxs("h4",{className:"text-center fw-semibold pb-2 mb-0",style:{display:"inline-block",borderBottom:"2px solid #4CAF50",margin:"0 auto",fontSize:"1.5rem"},children:[" Seccion: ",d.Nombre_seccion," / Asignatura: ",l.Nombre_asignatura," / Parcial: ",m.Nombre_parcial]})}),lo&&o.jsxs(b,{className:"btn btn-sm d-flex align-items-center gap-1 rounded shadow",onClick:Po,onMouseEnter:e=>e.currentTarget.style.backgroundColor="#3C4B43",onMouseLeave:e=>e.currentTarget.style.backgroundColor="#4B6251",style:{backgroundColor:"#4B6251",color:"#FFFFFF",padding:"5px 10px",fontSize:"0.9rem"},children:[o.jsx(j,{icon:gr,className:"me-2"}),"Nuevo"]}),o.jsxs(Fe,{className:"btn-sm d-flex align-items-center gap-1 rounded shadow",children:[o.jsxs(Se,{style:{backgroundColor:"#6C8E58",color:"white",fontSize:"0.85rem",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#5A784C",e.currentTarget.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.2)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#6C8E58",e.currentTarget.style.boxShadow="none"},children:[o.jsx(j,{icon:Ne}),"  Reporte"]}),o.jsxs(ve,{style:{position:"absolute",zIndex:1050,backgroundColor:"#fff",boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.2)",borderRadius:"4px",overflow:"hidden"},children:[o.jsxs(Y,{onClick:ir,style:{cursor:"pointer",outline:"none",backgroundColor:"transparent",padding:"0.5rem 1rem",fontSize:"0.85rem",color:"#333",borderBottom:"1px solid #eaeaea",transition:"background-color 0.3s"},onMouseOver:e=>e.target.style.backgroundColor="#f5f5f5",onMouseOut:e=>e.target.style.backgroundColor="transparent",children:[o.jsx(j,{icon:ke,size:"sm"})," Abrir en PDF"]}),o.jsxs(Y,{onClick:sr,style:{cursor:"pointer",outline:"none",backgroundColor:"transparent",padding:"0.5rem 1rem",fontSize:"0.85rem",color:"#333",transition:"background-color 0.3s"},onMouseOver:e=>e.target.style.backgroundColor="#f5f5f5",onMouseOut:e=>e.target.style.backgroundColor="transparent",children:[o.jsx(j,{icon:Ae,size:"sm"})," Descargar Excel"]})]})]})]})}),o.jsx(z,{children:o.jsx("div",{className:"d-flex justify-content-center align-items-center flex-grow-1",children:o.jsx("h2",{className:"text-center fw-semibold pb-2 mb-0",style:{display:"inline-block",borderBottom:"2px solid #4CAF50",margin:"0 auto",fontSize:"1.5rem"},children:"Actividades Academicas"})})}),o.jsxs(z,{className:"align-items-center mt-4 mb-2",children:[o.jsx(k,{xs:"12",md:"8",className:"d-flex flex-wrap align-items-center",children:o.jsxs(w,{className:"me-3",style:{width:"350px"},children:[o.jsx(S,{children:o.jsx(j,{icon:le})}),o.jsx(_,{style:{width:"80px",height:"35px",display:"inline-block"},placeholder:"Buscar actividad...",onChange:Uo,value:$e}),o.jsxs(b,{style:{border:"1px solid #ccc",transition:"all 0.1s ease-in-out",backgroundColor:"#F3F4F7",color:"#343a40",height:"35px"},onClick:()=>{Le(""),re(1)},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#E0E0E0",e.currentTarget.style.color="black"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#F3F4F7",e.currentTarget.style.color="#343a40"},children:[o.jsx(j,{icon:de})," Limpiar"]})]})}),o.jsx(k,{xs:"12",md:"4",className:"text-md-end mt-2 mt-md-0",children:o.jsx(w,{style:{width:"auto",display:"inline-block"},children:o.jsxs("div",{className:"d-inline-flex align-items-center",children:[o.jsx("span",{style:{fontSize:"0.85rem"},children:"Mostrar "}),o.jsxs(X,{style:{width:"80px",height:"35px",display:"inline-block",textAlign:"center"},onChange:e=>{const r=Number(e.target.value);No(r),re(1)},value:G,children:[o.jsx("option",{value:"5",children:"5"}),o.jsx("option",{value:"10",children:"10"}),o.jsx("option",{value:"20",children:"20"})]}),o.jsx("span",{style:{fontSize:"0.85rem"},children:" registros"})]})})})]}),o.jsx("div",{className:"table-responsive",style:{overflowX:"auto",overflow:"hidden",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.3)"},children:o.jsxs(he,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[o.jsx(ue,{className:"sticky-top bg-light text-start",style:{whiteSpace:"nowrap",overflow:"hidden",fontSize:"0.8rem"},children:o.jsxs(A,{children:[o.jsx(F,{children:"#"}),o.jsx(F,{children:"NOMBRE"}),o.jsx(F,{children:"DESCRIPCIÓN"}),o.jsx(F,{children:"PONDERACIÓN"}),o.jsx(F,{children:"FECHA INICIO "}),o.jsx(F,{children:"FECHA FIN"}),o.jsx(F,{children:"VALOR"}),o.jsx(F,{children:"ACCIONES"})]})}),o.jsxs(pe,{children:[L.length>0?or.map((e,r)=>{var t;return o.jsxs(A,{children:[o.jsx(C,{children:r+1}),o.jsx(C,{children:(e==null?void 0:e.Nombre_actividad_academica)||"N/A"}),o.jsx(C,{children:(e==null?void 0:e.Descripcion)||"N/A"}),o.jsx(C,{children:((t=J.find(a=>a.Cod_ponderacion_ciclo===(e==null?void 0:e.Cod_ponderacion_ciclo)))==null?void 0:t.Descripcion_ponderacion)||"N/A"}),o.jsx(C,{children:e!=null&&e.Fechayhora_Inicio?new Date(e.Fechayhora_Inicio).toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"}):"N/A"}),o.jsx(C,{children:e!=null&&e.Fechayhora_Fin?new Date(e.Fechayhora_Fin).toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"}):"N/A"}),o.jsx(C,{children:(e==null?void 0:e.Valor)||"N/A"}),o.jsxs(C,{children:[ho&&o.jsx(b,{onMouseEnter:a=>{a.currentTarget.style.boxShadow="0px 4px 10px rgba(249, 182, 78, 0.6)",a.currentTarget.style.color="#000000"},onMouseLeave:a=>{a.currentTarget.style.boxShadow="none",a.currentTarget.style.color="#5C4044"},style:{backgroundColor:"#F9B64E",color:"#5C4044",border:"none",transition:"all 0.2s ease",padding:"5px 10px",height:"38px",width:"45px",marginRight:"10px",marginBottom:"10px"},onClick:()=>Oo(e),children:o.jsx(j,{icon:xr})}),uo&&o.jsx(b,{style:{backgroundColor:"#E57368",color:"#5C4044",border:"none",transition:"all 0.2s ease",padding:"5px 10px",height:"38px",width:"45px",marginRight:"10px",marginBottom:"10px"},onMouseEnter:a=>{a.currentTarget.style.boxShadow="0px 4px 10px rgba(183, 65, 48, 0.6)",a.currentTarget.style.color="#000000"},onMouseLeave:a=>{a.currentTarget.style.boxShadow="none",a.currentTarget.style.color="#5C4044"},onClick:()=>Ho(e.Cod_actividad_academica,e.Nombre_actividad_academica),children:o.jsx(j,{icon:mr})})]})]},(e==null?void 0:e.Cod_actividad_academica)||r)}):o.jsx(A,{children:o.jsx(C,{colSpan:"6",children:"No hay actividades disponibles."})}),o.jsxs(A,{children:[o.jsx(C,{colSpan:"6",className:"text-end fw-bold",children:"Total:"}),o.jsx(C,{className:"fw-bold",children:cr()}),o.jsx(C,{})]})]})]})}),o.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"16px"},children:[o.jsxs(ge,{"aria-label":"Page navigation",style:{display:"flex",gap:"10px"},children:[o.jsx(b,{style:{backgroundColor:"#6f8173",color:"#D9EAD3"},disabled:q===1,onClick:()=>Ye(q-1),children:"Anterior"}),o.jsx(b,{style:{marginLeft:"10px",backgroundColor:"#6f8173",color:"#D9EAD3"},disabled:q===Math.ceil(M.length/G),onClick:()=>Ye(q+1),children:"Siguiente"})]}),o.jsxs("span",{style:{marginLeft:"10px"},children:["Página ",q," de ",Math.ceil(M.length/G)]})]})]}),o.jsxs(ro,{visible:yo,onClose:()=>Q(!1),backdrop:"static",children:[o.jsx(to,{closeButton:!0,children:o.jsx("h5",{children:"Nueva Actividad"})}),o.jsx(ao,{children:o.jsxs(so,{children:[o.jsx(_,{type:"hidden",value:c.Cod_profesor,readOnly:!0}),o.jsx(_,{type:"hidden",value:c.Cod_parcial,readOnly:!0}),o.jsx(_,{type:"hidden",value:c.Cod_secciones,readOnly:!0}),o.jsx(_,{type:"hidden",value:c.Cod_seccion_asignatura,readOnly:!0}),o.jsxs(w,{className:"mb-3",children:[o.jsx(S,{children:"Nombre de la Actividad"}),o.jsx(_,{value:c.Nombre_actividad_academica,onPaste:N,onCopy:N,onChange:e=>te(e,r=>E({...c,Nombre_actividad_academica:e.target.value}))})]}),o.jsxs(w,{className:"mb-3",children:[o.jsx(S,{children:"Descripción"}),o.jsx(io,{value:c.Descripcion,onPaste:N,onCopy:N,onChange:e=>te(e,r=>E({...c,Descripcion:e.target.value}))})]}),o.jsxs(w,{className:"mb-3",children:[o.jsx(S,{children:"Fecha y hora inicio"}),o.jsx(_,{type:"date",onPaste:N,onCopy:N,value:c.FechaInicio||"",onChange:e=>{const r=e.target.value;if(!r){s.fire({icon:"warning",title:"Fecha requerida",text:"Debe seleccionar una fecha antes de configurar la hora.",confirmButtonText:"Entendido"});return}E({...c,FechaInicio:r,Fechayhora_Inicio:""})}}),o.jsx(_,{type:"time",disabled:!c.FechaInicio,value:c.Fechayhora_Inicio?c.Fechayhora_Inicio.split("T")[1]:"",onChange:e=>{var a;const r=e.target.value,[t]=r.split(":").map(Number);if(t<7||t>=15){s.fire({icon:"warning",title:"Hora no válida",text:"La hora debe estar entre las 7:00 AM y las 3:00 PM.",confirmButtonText:"Entendido"});return}if(c.FechaInicio===c.FechaFin&&c.Fechayhora_Fin){const[i,g]=(a=c.Fechayhora_Fin.split("T")[1])==null?void 0:a.split(":").map(Number),[h,x]=r.split(":").map(Number);if(h>i||h===i&&x>g){s.fire({icon:"error",title:"Hora inicio inválida",text:"La hora de inicio no puede ser mayor que la hora de fin si la fecha es la misma.",confirmButtonText:"Entendido"});return}}E({...c,Fechayhora_Inicio:`${c.FechaInicio}T${r}`})}})]}),o.jsxs(w,{className:"mb-3",children:[o.jsx(S,{children:"Fecha y hora fin"}),o.jsx(_,{type:"date",onPaste:N,onCopy:N,value:c.FechaFin||"",onChange:e=>{const r=e.target.value;if(!r){s.fire({icon:"warning",title:"Fecha requerida",text:"Debe seleccionar una fecha antes de configurar la hora.",confirmButtonText:"Aceptar"});return}E({...c,FechaFin:r,Fechayhora_Fin:""})}}),o.jsx(_,{type:"time",disabled:!c.FechaFin,value:c.Fechayhora_Fin?c.Fechayhora_Fin.split("T")[1]:"",onChange:e=>{var a;const r=e.target.value,[t]=r.split(":").map(Number);if(t<7||t>=15){s.fire({icon:"warning",title:"Hora no válida",text:"La hora debe estar entre las 7:00 AM y las 3:00 PM.",confirmButtonText:"Aceptar"});return}if(c.FechaInicio===c.FechaFin&&c.Fechayhora_Inicio){const[i,g]=(a=c.Fechayhora_Inicio.split("T")[1])==null?void 0:a.split(":").map(Number),[h,x]=r.split(":").map(Number);if(i>h||i===h&&g>x){s.fire({icon:"error",title:"Hora fin inválida",text:"La hora de fin no puede ser menor que la hora de inicio si la fecha es la misma.",confirmButtonText:"Aceptar"});return}}E({...c,Fechayhora_Fin:`${c.FechaFin}T${r}`})}})]}),o.jsxs(w,{className:"mb-3",children:[o.jsx(S,{children:"Ponderación"}),o.jsxs(X,{value:c.Cod_ponderacion_ciclo,onChange:e=>{const r=J.find(t=>t.Cod_ponderacion_ciclo===Number(e.target.value));E({...c,Cod_ponderacion_ciclo:(r==null?void 0:r.Cod_ponderacion_ciclo)||""})},children:[o.jsx("option",{value:"",children:"Seleccione una ponderación"}),J.map(e=>o.jsxs("option",{value:e.Cod_ponderacion_ciclo,children:[e.Descripcion_ponderacion," - ",e.Valor,"%"]},e.Cod_ponderacion_ciclo))]})]}),o.jsxs(w,{className:"mb-3",children:[o.jsx(S,{children:"Valor"}),o.jsx(_,{type:"number",onPaste:N,onCopy:N,value:c.Valor||"",onKeyPress:e=>{e.key==="-"&&(e.preventDefault(),s.fire("Advertencia","No se permiten valores negativos.","warning"))},onChange:e=>{let r=e.target.value;if(r.includes("-")){s.fire("Advertencia","No se permiten valores negativos.","warning");return}if(r==="0"){s.fire("Advertencia","El valor no puede ser solo 0.","warning");return}if(r.includes(".")){const[t,a]=r.split(".");t.length>2&&(s.fire("Advertencia","Solo se permiten dos dígitos enteros.","warning"),r=`${t.substring(0,2)}.${a}`),a.length>2&&(s.fire("Advertencia","Solo se permiten dos dígitos después del punto.","warning"),r=`${t}.${a.substring(0,2)}`)}else r.length>2&&(s.fire("Advertencia","Solo se permiten dos dígitos enteros.","warning"),r=r.substring(0,2));E({...c,Valor:r})}})]})]})}),o.jsxs(no,{children:[o.jsx(b,{color:"secondary",onClick:()=>Q(!1),children:"Cancelar"}),o.jsxs(b,{onClick:$o,onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#3C4B43"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#4B6251"},style:{backgroundColor:"#4B6251",color:"#FFFFFF",padding:"6px 12px",transition:"background-color 0.2s ease, box-shadow 0.3s ease"},children:[o.jsx(j,{icon:fr})," Guardar"]})]})]}),o.jsxs(ro,{visible:xe,backdrop:"static",children:[o.jsx(to,{closeButton:!0,children:o.jsx("h5",{children:"Actualizar Actividad"})}),o.jsx(ao,{children:o.jsxs(so,{children:[o.jsxs(w,{className:"mb-3",children:[o.jsx(S,{children:"Nombre de la Actividad"}),o.jsx(_,{value:(n==null?void 0:n.Nombre_actividad_academica)||"",onPaste:N,onCopy:N,onChange:e=>te(e,r=>D({...n,Nombre_actividad_academica:e.target.value}))})]}),o.jsxs(w,{className:"mb-3",children:[o.jsx(S,{children:"Descripción"}),o.jsx(io,{value:(n==null?void 0:n.Descripcion)||"",onPaste:N,onCopy:N,onChange:e=>te(e,r=>D({...n,Descripcion:e.target.value}))})]}),o.jsxs(w,{className:"mb-3",children:[o.jsx(S,{children:"Fecha y hora inicio"}),o.jsx(_,{type:"date",value:(Ze=ae(n==null?void 0:n.Fechayhora_Inicio))==null?void 0:Ze.split("T")[0],onChange:e=>{var t;const r=e.target.value;D({...n,Fechayhora_Inicio:`${r}T${(t=n==null?void 0:n.Fechayhora_Inicio)==null?void 0:t.split("T")[1]}`})},style:{width:"120px"}}),o.jsx(_,{type:"time",value:(Ke=ae(n==null?void 0:n.Fechayhora_Inicio))==null?void 0:Ke.split("T")[1],onChange:e=>{var p,y,T,Ce;const r=e.target.value,t=(p=n==null?void 0:n.Fechayhora_Inicio)==null?void 0:p.split("T")[0],a=parseInt(r.split(":")[0]),i=parseInt(r.split(":")[1]);if(a<7||a>=15){s.fire({icon:"warning",title:"Hora no válida",text:"La hora debe estar entre las 7:00 AM y las 3:00 PM.",confirmButtonText:"Aceptar"});return}const g=(y=n==null?void 0:n.Fechayhora_Fin)==null?void 0:y.split("T")[0],h=(T=n==null?void 0:n.Fechayhora_Fin)==null?void 0:T.split("T")[1],[x,u]=h?h.split(":").map(Number):[null,null];if(t===g&&x!==null&&u!==null&&(a>x||a===x&&i>=u)){s.fire({icon:"error",title:"Hora de inicio no válida",text:"La hora de inicio no puede ser mayor que la hora de fin si la fecha es la misma.",confirmButtonText:"Aceptar"});return}if(t===g&&(n!=null&&n.Fechayhora_Fin)){const[ce,eo]=(Ce=n==null?void 0:n.Fechayhora_Fin.split("T")[1])==null?void 0:Ce.split(":").map(Number),[oo,lr]=r.split(":").map(Number);if(oo>ce||oo===ce&&lr>eo){s.fire({icon:"error",title:"Hora inicio inválida",text:"La hora de inicio no puede ser mayor que la hora de fin si la fecha es la misma.",confirmButtonText:"Aceptar"});return}}D({...n,Fechayhora_Inicio:`${t}T${r}`})},style:{width:"80px"}})]}),o.jsxs(w,{className:"mb-3",children:[o.jsx(S,{children:"Fecha y hora fin"}),o.jsx(_,{type:"date",value:(Xe=ae(n==null?void 0:n.Fechayhora_Fin))==null?void 0:Xe.split("T")[0],onChange:e=>{var t;const r=e.target.value;D({...n,Fechayhora_Fin:`${r}T${(t=n==null?void 0:n.Fechayhora_Fin)==null?void 0:t.split("T")[1]}`})},style:{width:"120px"}}),o.jsx(_,{type:"time",value:(Qe=ae(n==null?void 0:n.Fechayhora_Fin))==null?void 0:Qe.split("T")[1],onChange:e=>{var u,p,y,T;const r=e.target.value,t=(u=n==null?void 0:n.Fechayhora_Fin)==null?void 0:u.split("T")[0],[a,i]=r.split(":").map(Number);if(a<7||a>=15){s.fire({icon:"warning",title:"Hora no válida",text:"La hora debe estar entre las 7:00 AM y las 3:00 PM.",confirmButtonText:"Aceptar"});return}const g=(p=n==null?void 0:n.Fechayhora_Inicio)==null?void 0:p.split("T")[0],[h,x]=(T=(y=n==null?void 0:n.Fechayhora_Inicio)==null?void 0:y.split("T")[1])==null?void 0:T.split(":").map(Number);if(t===g&&(n!=null&&n.Fechayhora_Inicio)&&(h>a||h===a&&x>i)){s.fire({icon:"error",title:"Hora fin inválida",text:"La hora de fin no puede ser menor que la hora de inicio si la fecha es la misma.",confirmButtonText:"Aceptar"});return}D({...n,Fechayhora_Fin:`${t}T${r}`})},style:{width:"80px"}})]}),o.jsxs(w,{className:"mb-3",children:[o.jsx(S,{children:"Ponderación"}),o.jsx(_,{type:"text",value:((Ue=J.find(e=>e.Cod_ponderacion_ciclo===(n==null?void 0:n.Cod_ponderacion_ciclo)))==null?void 0:Ue.Descripcion_ponderacion)||"N/A",readOnly:!0,style:{backgroundColor:"#f1f1f1",color:"#6c757d",cursor:"not-allowed"}})]}),o.jsxs(w,{className:"mb-3",children:[o.jsx(S,{children:"Valor"}),o.jsx(_,{type:"text",value:(n==null?void 0:n.Valor)||"",onPaste:e=>e.preventDefault(),onCopy:e=>e.preventDefault(),onChange:e=>{let r=e.target.value;if(!/^\d*\.?\d{0,2}$/.test(r)){s.fire("Advertencia","Solo se permiten números con hasta 2 decimales.","warning");return}if(r.startsWith("00")&&(r=r.replace(/^0+/,"0")),r.includes("-")){s.fire("Advertencia","No se permiten valores negativos.","warning");return}if(r==="0"){s.fire("Advertencia","El valor no puede ser solo 0.","warning");return}if(r.split(".")[0].length>2){s.fire("Advertencia","El valor no puede tener más de dos dígitos enteros.","warning");return}D({...n,Valor:r})}})]})]})}),o.jsxs(no,{children:[o.jsx(b,{color:"secondary",onClick:()=>me(!1),children:"Cancelar"}),o.jsx(b,{style:{backgroundColor:"#9f7536",color:"#FFFFFF"},onClick:Bo,children:"Actualizar"})]})]},(n==null?void 0:n.Cod_actividad_academica)||"default-key")]})};export{rt as default};
