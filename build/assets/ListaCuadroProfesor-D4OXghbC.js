import{r as l,j as t,C as Ye}from"./index-SVRFFNc9.js";import{C as g}from"./index.esm-DWwMdKxH.js";import{S as m}from"./sweetalert2.esm.all-D3pEHXw3.js";import{l as H}from"./logo_saint_patrick-xw7Wl8f3.js";import{E as U}from"./jspdf.plugin.autotable-gke1D7B3.js";import Ve from"./html2canvas.esm-CBrSDip1.js";import{u as w,w as oe}from"./xlsx-lwdk4T0U.js";import{u as Xe}from"./usePermission-BCWksQX7.js";import Ke from"./AccessDenied-yaDW3Jao.js";import{C as Ze}from"./CContainer-BdNP0s3v.js";import{C as _,a as k}from"./CRow-Bf67u6lu.js";import{C as re,a as ne,b as ae,c as $}from"./CDropdownToggle-DlfIUTmX.js";import{c as Y}from"./cil-description-MUzg6O3n.js";import{c as se}from"./cil-file-CeQgYs_D.js";import{c as ie}from"./cil-spreadsheet-CJUvf_vM.js";import{C as O}from"./CInputGroup-D-McUFva.js";import{C as le}from"./CInputGroupText-Cfu0fzaY.js";import{c as ce}from"./cil-search-CDkY_4k-.js";import{C as de}from"./CFormInput-B_gylY64.js";import{a as h}from"./CButton-D9GPTbB6.js";import{c as pe}from"./cil-brush-alt-CV61lKqC.js";import{C as xe}from"./CFormSelect-CzT7g5tb.js";import{C as V,a as X,b as y,c as x,d as K,e as p}from"./CTable-98qqrSRH.js";import{C as ge}from"./CPagination-UopCEeNZ.js";import{c as me}from"./cil-arrow-left-D66Kb3Zq.js";import"./CConditionalPortal-DwBsYzTA.js";import"./CFormControlWrapper-OEJgTi6e.js";import"./CFormControlValidation-CtDkyDfm.js";import"./CFormLabel-szm2Dda9.js";const vt=()=>{const{canSelect:he,canInsert:qe,canUpdate:Je}=Xe("ListaCuadroProfesor"),[ue,fe]=l.useState([]),[E,be]=l.useState(!0),[G,z]=l.useState("secciones"),[ye,Ce]=l.useState([]),[u,je]=l.useState("");l.useState("");const[v,Se]=l.useState(""),[Qe,we]=l.useState(null),[f,ke]=l.useState(""),[Ne,Ae]=l.useState(""),[Fe,Te]=l.useState(""),[N,ve]=l.useState(5),[P,Z]=l.useState(""),[A,B]=l.useState(1),[F,Ee]=l.useState(5),[W,q]=l.useState(""),[T,D]=l.useState(1),[C,ze]=l.useState([]);l.useEffect(()=>{Pe()},[]);const Pe=async()=>{try{const e=localStorage.getItem("token");if(!e)throw new Error("Token no encontrado");const r=await fetch("http://localhost:4000/api/notas/seccionesporprofe",{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!r.ok)throw new Error("Error al cargar secciones.");const o=await r.json();fe(o.secciones)}catch(e){console.error("Error al obtener las secciones:",e)}finally{be(!1)}},Be=async e=>{try{const r=await fetch(`http://localhost:4000/api/seccionalumno/estudiantes/${e}`);if(!r.ok)throw new Error("Error al obtener la lista de estudiantes");const o=await r.json();Ce(o)}catch(r){console.error("Error:",r)}},De=async(e,r,o)=>{try{Ae(r),Te(o);const n=await fetch(`http://localhost:4000/api/notas/notasypromedio/${e}`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!n.ok)throw new Error("Error al obtener el cuadro de notas.");const s=await n.json();ze(s),z("cuadroNotas")}catch(n){console.error("Error al obtener el cuadro de notas:",n),m.fire("Error","No se pudieron cargar los datos del cuadro de notas","error")}},Le=()=>{if(!j||j.length===0){m.fire({icon:"info",title:"Tabla vacía",text:"No hay datos disponibles para generar el reporte.",confirmButtonText:"Aceptar"});return}const e=new U,r=new Image;r.src=H,r.onload=()=>{e.addImage(r,"PNG",10,10,30,30);let o=20;e.setFontSize(18),e.setTextColor(0,102,51),e.text("SAINT PATRICK'S ACADEMY",e.internal.pageSize.width/2,o,{align:"center"}),o+=12,e.setFontSize(16),e.text("Reporte de Secciones",e.internal.pageSize.width/2,o,{align:"center"}),o+=10,e.setFontSize(10),e.setTextColor(100),e.text("Casa Club del periodista, Colonia del Periodista",e.internal.pageSize.width/2,o,{align:"center"}),o+=4,e.text("Teléfono: (504) 2234-8871",e.internal.pageSize.width/2,o,{align:"center"}),o+=4,e.text("Correo: info@saintpatrickacademy.edu",e.internal.pageSize.width/2,o,{align:"center"}),o+=6,e.setLineWidth(.5),e.setDrawColor(0,102,51),e.line(10,o,e.internal.pageSize.width-10,o);const n=e.internal.pageSize.height;let s=1;e.autoTable({startY:o+4,head:[["#","Sección","Grado","Total Alumnos","Año Académico"]],body:j.map((i,a)=>[a+1,`${i.Seccion||""}`.trim(),i.Grado,i.Total_Alumnos,i.Anio_Academico]),headStyles:{fillColor:[0,102,51],textColor:[255,255,255],fontSize:10},styles:{fontSize:10,cellPadding:3,halign:"center"},columnStyles:{0:{cellWidth:"auto"},1:{cellWidth:"auto"},2:{cellWidth:"auto"},3:{cellWidth:"auto"},4:{cellWidth:"auto"}},alternateRowStyles:{fillColor:[240,248,255]},didDrawPage:i=>{const a=new Date,c=`${a.toLocaleDateString()} ${a.toLocaleTimeString()}`;e.setFontSize(10),e.setTextColor(100),e.text(`Fecha y hora de generación: ${c}`,10,n-10);const d=e.internal.getNumberOfPages();e.text(`Página ${s} de ${d}`,e.internal.pageSize.width-30,n-10),s+=1}}),window.open(e.output("bloburl"),"_blank")},r.onerror=()=>{console.warn("No se pudo cargar el logo. El PDF se generará sin el logo."),window.open(e.output("bloburl"),"_blank")}},Re=()=>{if(!j||j.length===0){m.fire({icon:"info",title:"Tabla vacía",text:"No hay datos disponibles para generar el reporte excel.",confirmButtonText:"Aceptar"});return}const e=[["Saint Patrick Academy"],["Reporte de Secciones"],[],["#","Sección","Grado","Total Alumnos","Año Académico"]],r=j.map((d,b)=>[b+1,d.Seccion,d.Grado,d.Total_Alumnos,d.Anio_Academico]),o=[...e,...r],n=w.aoa_to_sheet(o),s=w.decode_range(n["!ref"]);for(let d=0;d<=3;d++)for(let b=s.s.c;b<=s.e.c;b++){const M=w.encode_cell({r:d,c:b});n[M]&&(n[M].s={font:{bold:!0,sz:14,color:{rgb:"FFFFFF"}},fill:{fgColor:{rgb:"15401D"}},alignment:{horizontal:"center"}})}const i=[{wpx:40},{wpx:100},{wpx:100},{wpx:100},{wpx:100}];n["!cols"]=i;const a=w.book_new();w.book_append_sheet(a,n,"Reporte de Secciones"),oe(a,"Reporte_Secciones.xlsx")},Ie=()=>{if(!S||S.length===0){m.fire({icon:"info",title:"Tabla vacía",text:"No hay datos disponibles para generar el reporte.",confirmButtonText:"Aceptar"});return}const e=new U,r=new Image;r.src=H,r.onload=()=>{e.addImage(r,"PNG",10,10,30,30);let o=20;e.setFontSize(18),e.setTextColor(0,102,51),e.text("SAINT PATRICK'S ACADEMY",e.internal.pageSize.width/2,o,{align:"center"}),o+=12,e.setFontSize(16),e.text("Reporte de Estudiantes",e.internal.pageSize.width/2,o,{align:"center"}),o+=10,e.setFontSize(12),e.setTextColor(0,0,0),f&&u&&v?e.text(`Grado: ${f} | Sección: ${u} | Año: ${v}`,e.internal.pageSize.width/2,o,{align:"center"}):f&&u&&e.text(`Grado: ${f} | Sección: ${u}`,e.internal.pageSize.width/2,o,{align:"center"}),o+=8,e.setFontSize(10),e.setTextColor(100),e.text("Casa Club del periodista, Colonia del Periodista",e.internal.pageSize.width/2,o,{align:"center"}),o+=4,e.text("Teléfono: (504) 2234-8871",e.internal.pageSize.width/2,o,{align:"center"}),o+=4,e.text("Correo: info@saintpatrickacademy.edu",e.internal.pageSize.width/2,o,{align:"center"}),o+=6,e.setLineWidth(.5),e.setDrawColor(0,102,51),e.line(10,o,e.internal.pageSize.width-10,o);const n=e.internal.pageSize.height;let s=1;e.autoTable({startY:o+4,head:[["#","Identidad","Nombre Estudiante"]],body:S.map((i,a)=>[a+1,`${i.Identidad}`.trim(),i.Nombre_Completo]),headStyles:{fillColor:[0,102,51],textColor:[255,255,255],fontSize:10},styles:{fontSize:10,cellPadding:3,halign:"center"},columnStyles:{0:{cellWidth:"auto"},1:{cellWidth:"auto"},2:{cellWidth:"auto"}},alternateRowStyles:{fillColor:[240,248,255]},didDrawPage:i=>{const a=new Date,c=`${a.toLocaleDateString()} ${a.toLocaleTimeString()}`;e.setFontSize(10),e.setTextColor(100),e.text(`Fecha y hora de generación: ${c}`,10,n-10);const d=e.internal.getNumberOfPages();e.text(`Página ${s} de ${d}`,e.internal.pageSize.width-30,n-10),s+=1}}),window.open(e.output("bloburl"),"_blank")},r.onerror=()=>{console.warn("No se pudo cargar el logo. El PDF se generará sin el logo."),window.open(e.output("bloburl"),"_blank")}},Me=()=>{if(!S||S.length===0){m.fire({icon:"info",title:"Tabla vacía",text:"No hay datos disponibles para generar el reporte excel.",confirmButtonText:"Aceptar"});return}const e=[];f&&u&&v?e.push([`Grado: ${f}  | Sección: ${u}  | Año: ${v}`]):u&&f&&e.push([`Grado: ${f} | Sección: ${u}`]);const r=[["Saint Patrick Academy"],["Reporte de Estudiantes"],[],...e,[],["#","Identidad","Nombre Estudiante"]],o=S.map((d,b)=>[b+1,d.Identidad||"N/A",d.Nombre_Completo||"N/A"]),n=[...r,...o],s=w.aoa_to_sheet(n),i=[{wpx:40},{wpx:150},{wpx:300}];s["!cols"]=i;const a=w.book_new();w.book_append_sheet(a,s,"Reporte de Estudiantes"),oe(a,"Reporte_de_Estudiantes.xlsx")},L=e=>{e.preventDefault(),m.fire({icon:"warning",title:"Acción bloqueada",text:"Copiar y pegar no está permitido.",confirmButtonText:"Aceptar"})},_e=e=>{let o=e.target.value.toUpperCase().trimStart();const n=/^[A-ZÑÁÉÍÓÚ0-9\s,]*$/;if(/\s{2,}/.test(o)&&(m.fire({icon:"warning",title:"Espacios múltiples",text:"No se permite más de un espacio entre palabras.",confirmButtonText:"Aceptar"}),o=o.replace(/\s+/g," ")),!n.test(o)){m.fire({icon:"warning",title:"Caracteres no permitidos",text:"Solo se permiten letras, números y espacios.",confirmButtonText:"Aceptar"});return}const s=o.split(" ");for(let i of s){const a={};for(let c of i)if(a[c]=(a[c]||0)+1,a[c]>4){m.fire({icon:"warning",title:"Repetición de letras",text:`La letra "${c}" se repite más de 4 veces en la palabra "${i}".`,confirmButtonText:"Aceptar"});return}}Z(o),B(1)},R=ue.filter(e=>e.Seccion.toLowerCase().includes(P.toLowerCase())||e.Grado.toLowerCase().includes(P.toLowerCase())||e.Anio_Academico.toString().includes(P)),J=A*N,$e=J-N,j=R.slice($e,J),Q=e=>{e>0&&e<=Math.ceil(R.length/N)&&B(e)},Oe=(e,r,o,n)=>{we(e),je(r),ke(o),Se(n),Be(e),z("estudiantes")},Ge=e=>{let o=e.target.value.toUpperCase().trimStart();const n=/^[A-ZÑÁÉÍÓÚ0-9\s,]*$/;if(/\s{2,}/.test(o)&&(m.fire({icon:"warning",title:"Espacios múltiples",text:"No se permite más de un espacio entre palabras.",confirmButtonText:"Aceptar"}),o=o.replace(/\s+/g," ")),!n.test(o)){m.fire({icon:"warning",title:"Caracteres no permitidos",text:"Solo se permiten letras, números y espacios.",confirmButtonText:"Aceptar"});return}const s=o.split(" ");for(let i of s){const a={};for(let c of i)if(a[c]=(a[c]||0)+1,a[c]>4){m.fire({icon:"warning",title:"Repetición de letras",text:`La letra "${c}" se repite más de 4 veces en la palabra "${i}".`,confirmButtonText:"Aceptar"});return}}q(o),D(1)},I=ye.filter(e=>e.Nombre_Completo&&e.Nombre_Completo.toLowerCase().includes(W.toLowerCase())||e.Identidad&&e.Identidad.toLowerCase().includes(W.toLowerCase())),ee=T*F,We=ee-F,S=I.slice(We,ee),te=e=>{e>0&&e<=Math.ceil(I.length/F)&&D(e)},He=()=>{z("secciones")},Ue=async()=>{const e=document.getElementById("cuadroNotasRender"),r=e.style.width,o=e.style.height;e.style.width="794px",e.style.height="1123px";const n=e.style.border;e.style.border="none";const s=new U("p","mm","a4"),i=10;try{const c=(await Ve(e,{scale:4,useCORS:!0})).toDataURL("image/png"),d=s.getImageProperties(c),b=s.internal.pageSize.getWidth()-i*2,M=d.height*b/d.width;s.addImage(c,"PNG",i,i,b,M),s.save("cuadro_notas.pdf")}catch(a){console.error("Error al generar el PDF:",a),m.fire({icon:"error",title:"Error",text:"Hubo un problema al generar el PDF. Inténtalo nuevamente."})}finally{e.style.width=r,e.style.height=o,e.style.border=n}};return he?t.jsxs(Ze,{className:"py-1",children:[E&&t.jsx("div",{className:"text-center my-5",children:t.jsx(Ye,{color:"primary","aria-label":"Cargando información..."})}),!E&&G==="secciones"&&t.jsxs(t.Fragment,{children:[t.jsx(_,{className:"align-items-center mb-5",children:t.jsxs(k,{xs:"12",className:"d-flex flex-column flex-md-row justify-content-between align-items-center gap-3",children:[t.jsx("div",{className:"flex-grow-1 text-center",children:t.jsx("h4",{className:"text-center fw-semibold pb-2 mb-0",style:{display:"inline-block",borderBottom:"2px solid #4CAF50"},children:" Cuadros: Mis Secciones"})}),t.jsxs(re,{className:"btn-sm d-flex align-items-center gap-1 rounded shadow",children:[t.jsxs(ne,{style:{backgroundColor:"#6C8E58",color:"white",fontSize:"0.85rem",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#5A784C",e.currentTarget.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.2)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#6C8E58",e.currentTarget.style.boxShadow="none"},children:[t.jsx(g,{icon:Y})," Reporte"]}),t.jsxs(ae,{style:{position:"absolute",zIndex:1050,backgroundColor:"#fff",boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.2)",borderRadius:"4px",overflow:"hidden"},children:[t.jsxs($,{onClick:Le,style:{cursor:"pointer",outline:"none",backgroundColor:"transparent",padding:"0.5rem 1rem",fontSize:"0.85rem",color:"#333",borderBottom:"1px solid #eaeaea",transition:"background-color 0.3s"},onMouseOver:e=>e.target.style.backgroundColor="#f5f5f5",onMouseOut:e=>e.target.style.backgroundColor="transparent",children:[t.jsx(g,{icon:se,size:"sm"})," Abrir en PDF"]}),t.jsxs($,{onClick:Re,style:{cursor:"pointer",outline:"none",backgroundColor:"transparent",padding:"0.5rem 1rem",fontSize:"0.85rem",color:"#333",transition:"background-color 0.3s"},onMouseOver:e=>e.target.style.backgroundColor="#f5f5f5",onMouseOut:e=>e.target.style.backgroundColor="transparent",children:[t.jsx(g,{icon:ie,size:"sm"})," Descargar Excel"]})]})]})]})}),t.jsxs(_,{className:"align-items-center mt-4 mb-2",children:[t.jsx(k,{xs:"12",md:"8",className:"d-flex flex-wrap align-items-center",children:t.jsxs(O,{className:"me-3",style:{width:"350px"},children:[t.jsx(le,{children:t.jsx(g,{icon:ce})}),t.jsx(de,{style:{width:"80px",height:"35px",display:"inline-block",fontSize:"0.8rem"},placeholder:"Buscar por año, grado o sección",onChange:_e,value:P,onPaste:L,onCopy:L}),t.jsxs(h,{style:{border:"1px solid #ccc",transition:"all 0.1s ease-in-out",backgroundColor:"#F3F4F7",color:"#343a40",height:"35px"},onClick:()=>{Z(""),B(1)},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#E0E0E0",e.currentTarget.style.color="black"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#F3F4F7",e.currentTarget.style.color="#343a40"},children:[t.jsx(g,{icon:pe})," Limpiar"]})]})}),t.jsx(k,{xs:"12",md:"4",className:"text-md-end mt-2 mt-md-0",children:t.jsx(O,{style:{width:"auto",display:"inline-block"},children:t.jsxs("div",{className:"d-inline-flex align-items-center",children:[t.jsx("span",{style:{fontSize:"0.85rem"},children:"Mostrar "}),t.jsxs(xe,{style:{width:"80px",height:"35px",display:"inline-block",textAlign:"center"},onChange:e=>{const r=Number(e.target.value);ve(r),B(1)},value:N,children:[t.jsx("option",{value:"5",children:"5"}),t.jsx("option",{value:"10",children:"10"}),t.jsx("option",{value:"20",children:"20"})]}),t.jsx("span",{style:{fontSize:"0.85rem"},children:" registros"})]})})})]}),t.jsx("div",{className:"table-responsive",style:{maxHeight:"400px",overflowX:"auto",overflowY:"auto",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.3)"},children:t.jsxs(V,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[t.jsx(X,{className:"sticky-top bg-light text-center",style:{fontSize:"0.8rem"},children:t.jsxs(y,{children:[t.jsx(x,{children:"#"}),t.jsx(x,{children:"SECCIÓN"}),t.jsx(x,{children:"GRADO"}),t.jsx(x,{children:"TOTAL ALUMNOS"}),t.jsx(x,{children:"AÑO ACADÉMICO"}),t.jsx(x,{children:"ACCIÓN"})]})}),t.jsx(K,{className:"text-center",style:{fontSize:"0.85rem"},children:j.length>0?j.map((e,r)=>t.jsxs(y,{children:[t.jsx(p,{children:r+1}),t.jsx(p,{children:e.Seccion}),t.jsx(p,{children:e.Grado}),t.jsx(p,{children:e.Total_Alumnos}),t.jsx(p,{children:e.Anio_Academico}),t.jsx(p,{children:t.jsx(h,{size:"sm",style:{backgroundColor:"#F0F4F3",color:"#153E21",border:"1px solid #A2B8A9",borderRadius:"6px",padding:"5px 12px",boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.1)"},onMouseEnter:o=>o.target.style.backgroundColor="#dce3dc",onMouseLeave:o=>o.target.style.backgroundColor="#F0F4F3",onClick:()=>Oe(e.Cod_secciones,e.Seccion,e.Grado,e.Anio_Academico),children:"Ver Estudiantes"})})]},r)):t.jsx(y,{children:t.jsx(p,{colSpan:"5",children:"No se encontraron resultados"})})})]})}),t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"16px"},children:[t.jsxs(ge,{"aria-label":"Page navigation",style:{display:"flex",gap:"10px"},children:[t.jsx(h,{style:{backgroundColor:"#6f8173",color:"#D9EAD3"},disabled:A===1,onClick:()=>Q(A-1),children:"Anterior"}),t.jsx(h,{style:{marginLeft:"10px",backgroundColor:"#6f8173",color:"#D9EAD3"},disabled:A===Math.ceil(R.length/N),onClick:()=>Q(A+1),children:"Siguiente"})]}),t.jsxs("span",{style:{marginLeft:"10px"},children:["Página ",A," de ",Math.ceil(R.length/N)]})]})]}),!E&&G==="estudiantes"&&t.jsxs(t.Fragment,{children:[t.jsx(_,{className:"align-items-center mb-5",children:t.jsxs(k,{xs:"12",className:"d-flex flex-column flex-md-row justify-content-between align-items-center gap-3",children:[t.jsxs(h,{className:"btn btn-sm d-flex align-items-center gap-1 rounded shadow",onMouseEnter:e=>e.currentTarget.style.backgroundColor="#4B4B4B",onMouseLeave:e=>e.currentTarget.style.backgroundColor="#656565",style:{backgroundColor:"#656565",color:"#FFFFFF",padding:"6px 12px",fontSize:"0.9rem",transition:"background-color 0.2s ease, box-shadow 0.3s ease",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)"},onClick:He,children:[t.jsx(g,{icon:me})," Volver a Secciones"]}),t.jsxs("div",{className:"d-flex flex-column justify-content-center align-items-center flex-grow-1",children:[t.jsx("h3",{className:"text-center pb-2 mb-0",style:{borderBottom:"2px solid #4CAF50",margin:"0 auto",fontSize:"1.5rem"},children:"Estudiantes"}),t.jsxs("div",{className:"d-flex justify-content-center align-items-center mt-2",children:[t.jsxs("div",{className:"me-3",style:{fontSize:"1rem"},children:["Grado: ",f]}),t.jsxs("div",{className:"me-3",style:{fontSize:"1rem"},children:["Sección: ",u]}),t.jsxs("div",{className:"me-3",style:{fontSize:"1rem"},children:["Año: ",v]})]})]}),t.jsxs(re,{className:"btn-sm d-flex align-items-center gap-1 rounded shadow",children:[t.jsxs(ne,{style:{backgroundColor:"#6C8E58",color:"white",fontSize:"0.85rem",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#5A784C",e.currentTarget.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.2)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#6C8E58",e.currentTarget.style.boxShadow="none"},children:[t.jsx(g,{icon:Y})," Reporte"]}),t.jsxs(ae,{style:{position:"absolute",zIndex:1050,backgroundColor:"#fff",boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.2)",borderRadius:"4px",overflow:"hidden"},children:[t.jsxs($,{onClick:Ie,style:{cursor:"pointer",outline:"none",backgroundColor:"transparent",padding:"0.5rem 1rem",fontSize:"0.85rem",color:"#333",borderBottom:"1px solid #eaeaea",transition:"background-color 0.3s"},onMouseOver:e=>e.target.style.backgroundColor="#f5f5f5",onMouseOut:e=>e.target.style.backgroundColor="transparent",children:[t.jsx(g,{icon:se,size:"sm"})," Abrir en PDF"]}),t.jsxs($,{onClick:Me,style:{cursor:"pointer",outline:"none",backgroundColor:"transparent",padding:"0.5rem 1rem",fontSize:"0.85rem",color:"#333",transition:"background-color 0.3s"},onMouseOver:e=>e.target.style.backgroundColor="#f5f5f5",onMouseOut:e=>e.target.style.backgroundColor="transparent",children:[t.jsx(g,{icon:ie,size:"sm"})," Descargar Excel"]})]})]})]})}),t.jsxs(_,{className:"align-items-center mt-4 mb-2",children:[t.jsx(k,{xs:"12",md:"8",className:"d-flex flex-wrap align-items-center",children:t.jsxs(O,{className:"me-3",style:{width:"350px"},children:[t.jsx(le,{children:t.jsx(g,{icon:ce})}),t.jsx(de,{style:{width:"80px",height:"35px",display:"inline-block",fontSize:"0.8rem"},placeholder:"Buscar estudiante...",onChange:Ge,value:W,onPaste:L,onCopy:L}),t.jsxs(h,{style:{border:"1px solid #ccc",transition:"all 0.1s ease-in-out",backgroundColor:"#F3F4F7",color:"#343a40",height:"35px"},onClick:()=>{q(""),D(1)},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#E0E0E0",e.currentTarget.style.color="black"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#F3F4F7",e.currentTarget.style.color="#343a40"},children:[t.jsx(g,{icon:pe})," Limpiar"]})]})}),t.jsx(k,{xs:"12",md:"4",className:"text-md-end mt-2 mt-md-0",children:t.jsx(O,{style:{width:"auto",display:"inline-block"},children:t.jsxs("div",{className:"d-inline-flex align-items-center",children:[t.jsx("span",{style:{fontSize:"0.85rem"},children:"Mostrar "}),t.jsxs(xe,{style:{width:"80px",height:"35px",display:"inline-block",textAlign:"center"},onChange:e=>{const r=Number(e.target.value);Ee(r),D(1)},value:F,children:[t.jsx("option",{value:"5",children:"5"}),t.jsx("option",{value:"10",children:"10"}),t.jsx("option",{value:"20",children:"20"})]}),t.jsx("span",{style:{fontSize:"0.85rem"},children:" registros"})]})})})]}),t.jsx("div",{className:"table-responsive",style:{maxHeight:"400px",overflowX:"auto",overflowY:"auto",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.3)"},children:t.jsxs(V,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[t.jsx(X,{className:"sticky-top bg-light text-center",style:{fontSize:"0.8rem"},children:t.jsxs(y,{children:[t.jsx(x,{children:"#"}),t.jsx(x,{children:"IDENTIDAD"}),t.jsx(x,{children:"ALUMNO"}),t.jsx(x,{children:"ACCIÓN"})]})}),t.jsx(K,{className:"text-center",style:{fontSize:"0.85rem"},children:S.length>0?S.map((e,r)=>t.jsxs(y,{children:[t.jsx(p,{children:r+1}),t.jsx(p,{children:e.Identidad}),t.jsx(p,{children:e.Nombre_Completo}),t.jsx(p,{children:t.jsx(h,{style:{backgroundColor:"#F0F4F3",color:"#153E21",border:"1px solid #A2B8A9",borderRadius:"6px",padding:"5px 12px",boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.1)"},size:"sm",onMouseEnter:o=>o.target.style.backgroundColor="#dce3dc",onMouseLeave:o=>o.target.style.backgroundColor="#F0F4F3",onClick:()=>De(e.Cod_seccion_matricula,e.Nombre_Completo,e.Identidad),children:"Cuadro Notas"})})]},e.Cod_seccion_matricula)):t.jsx(y,{children:t.jsx(p,{colSpan:"5",children:"No se encontraron resultados"})})})]})}),t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"16px"},children:[t.jsxs(ge,{"aria-label":"Page navigation",style:{display:"flex",gap:"10px"},children:[t.jsx(h,{style:{backgroundColor:"#6f8173",color:"#D9EAD3"},disabled:T===1,onClick:()=>te(T-1),children:"Anterior"}),t.jsx(h,{style:{marginLeft:"10px",backgroundColor:"#6f8173",color:"#D9EAD3"},disabled:T===Math.ceil(I.length/F),onClick:()=>te(T+1),children:"Siguiente"})]}),t.jsxs("span",{style:{marginLeft:"10px"},children:["Página ",T," de ",Math.ceil(I.length/F)]})]})]}),!E&&G==="cuadroNotas"&&t.jsxs(t.Fragment,{children:[t.jsxs(k,{xs:"12",className:"d-flex flex-column flex-md-row justify-content-between align-items-center gap-3",children:[t.jsxs(h,{className:"btn btn-sm d-flex align-items-center gap-1 rounded shadow",onMouseEnter:e=>e.currentTarget.style.backgroundColor="#4B4B4B",onMouseLeave:e=>e.currentTarget.style.backgroundColor="#656565",style:{backgroundColor:"#656565",color:"#FFFFFF",padding:"6px 12px",fontSize:"0.9rem",transition:"background-color 0.2s ease, box-shadow 0.3s ease",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)"},onClick:()=>z("estudiantes"),children:[t.jsx(g,{icon:me})," Volver a Estudiantes"]}),t.jsxs(h,{className:"btn btn-sm d-flex align-items-center gap-1 rounded shadow",style:{backgroundColor:"#6C8E58",color:"white",padding:"6px 12px",fontSize:"0.9rem",marginTop:"0"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#5A784C",e.currentTarget.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.2)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#6C8E58",e.currentTarget.style.boxShadow="none"},onClick:Ue,children:[t.jsx(g,{icon:Y}),"Guardar PDF"]})]}),t.jsxs("div",{id:"cuadroNotasRender",style:{width:"816px",height:"1056px",backgroundColor:"white",padding:"20px",boxSizing:"border-box",justifyContent:"center"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",textAlign:"left",marginBottom:"10px",flex:1,marginLeft:"-70px",padding:"5px",borderRadius:"8px",fontFamily:"Arial Narrow, sans-serif",fontSize:"1rem"},children:[t.jsx("img",{src:H,alt:"Saint Patrick's Academy Logo",style:{width:"200px",height:"200px",position:"relative",left:"-80px"}}),t.jsxs("div",{style:{textAlign:"center",marginTop:"-70px",transform:"translateX(-10px)"},children:[t.jsx("h1",{style:{fontSize:"2.333rem",marginBottom:"10px",marginTop:"0",fontFamily:"Monotype Corsiva, cursive",fontWeight:"bold",color:"#000000"},children:"Saint Patrick's Academy"}),t.jsx("h2",{style:{fontSize:"2.17rem",marginBottom:"5px",fontFamily:"Monotype Corsiva, cursive",color:"#000000",marginTop:"0",fontWeight:"bold"},children:"Report Card"})]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",margin:"0 30px",fontSize:"1.1rem",fontFamily:"Arial Narrow, sans-serif",color:"#000000",marginTop:"30px"},children:[t.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[t.jsx("strong",{style:{fontWeight:"bold"},children:"Student Name:"}),t.jsx("span",{style:{borderBottom:"1px solid black",paddingBottom:"2px",display:"inline-block",flex:"1",marginLeft:"5px",letterSpacing:"0.5px"},children:Ne})]}),t.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[t.jsx("strong",{style:{fontWeight:"bold"},children:"Student ID:"}),t.jsx("span",{style:{borderBottom:"1px solid black",paddingBottom:"2px",display:"inline-block",flex:"1",marginLeft:"5px",letterSpacing:"0.5px"},children:Fe})]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",margin:"20px 30px",fontSize:"1.1rem",fontFamily:"Arial Narrow, sans-serif",color:"#000000",marginTop:"30px"},children:[t.jsxs("span",{style:{marginLeft:"40px"},children:[t.jsx("strong",{style:{fontWeight:"bold"},children:"Grade: "}),t.jsxs("span",{style:{paddingBottom:"2px",display:"inline-block",letterSpacing:"0.5px"},children:[" ",f]})]}),t.jsxs("span",{style:{marginLeft:"10px"},children:[t.jsx("strong",{style:{fontWeight:"bold"},children:"Section: "})," ",u]}),t.jsxs("span",{style:{marginRight:"40px"},children:[t.jsx("strong",{style:{fontWeight:"bold"},children:"School year: "})," ",new Date().getFullYear(),"-",new Date().getFullYear()+1]})]}),t.jsxs(V,{className:"table-bordered",style:{border:"1px solid #000000",marginTop:"50px",fontSize:"0.8rem",lineHeight:"1"},children:[t.jsxs(X,{children:[t.jsxs(y,{children:[t.jsx(x,{rowSpan:2,className:"text-center align-middle",style:{backgroundColor:"#BFBFBF"},children:t.jsxs("div",{className:"d-flex flex-column align-items-center justify-content-center",children:[t.jsx("span",{style:{marginBottom:"12px"},children:"ÁREAS CURRICULARES/"}),t.jsx("span",{style:{marginTop:"5px"},children:"CAMPOS DEL CONOCIMIENTO"})]})}),t.jsx(x,{rowSpan:1,colSpan:C.length>0?C[0].NotasParciales.filter(e=>!e.Parcial.match(/recu/i)).length:0,className:"text-center align-middle",style:{backgroundColor:"#BFBFBF",borderBottom:"1px solid #000000",padding:"10px"},children:"PARCIALES"}),C.length>0&&C[0].NotasParciales.some(e=>e.Parcial.match(/recu/i))&&C[0].NotasParciales.filter(e=>e.Parcial.match(/recu/i)).map((e,r)=>t.jsxs(x,{rowSpan:2,className:"text-center align-middle",style:{backgroundColor:"#BFBFBF",padding:"10px"},children:[e.Parcial," "]},r)),t.jsx(x,{rowSpan:2,className:"text-center align-middle",style:{backgroundColor:"#BFBFBF"},children:t.jsxs("div",{className:"d-flex flex-column align-items-center justify-content-center",children:[t.jsx("span",{style:{marginBottom:"12px"},children:"NOTA"}),t.jsx("span",{style:{marginTop:"5px"},children:"PROM.FINAL (%)"})]})})]}),t.jsx(y,{children:C.length>0&&C[0].NotasParciales.filter(e=>!e.Parcial.match(/recu/i)).map((e,r)=>t.jsx(x,{className:"text-center",style:{backgroundColor:"#BFBFBF"},children:e.Parcial},r))})]}),t.jsx(K,{children:C.length>0?C.map((e,r)=>{var o;return t.jsxs(y,{children:[t.jsx(p,{className:"text-center bg-transparent",style:{fontSize:"0.8rem",width:"350px"},children:t.jsxs("div",{className:"d-flex justify-content-start",children:[t.jsxs("span",{style:{marginRight:"20px",marginLeft:"60px"},children:[r+1,"."]})," ",t.jsx("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.Asignatura})," "]})}),e.NotasParciales.filter(n=>!n.Parcial.match(/recu/i)).map((n,s)=>t.jsx(p,{className:"text-center bg-transparent",children:n.Nota},s)),t.jsx(p,{className:"text-center bg-transparent",children:((o=e.NotasParciales.find(n=>n.Parcial.match(/recu/i)))==null?void 0:o.Nota)||"-"}),t.jsx(p,{className:"text-center bg-transparent",children:e.PromedioFinal})]},r)}):t.jsx(y,{children:t.jsx(p,{colSpan:"5",children:"No se encontraron resultados"})})})]})]})]})]}):t.jsx(Ke,{})};export{vt as default};
