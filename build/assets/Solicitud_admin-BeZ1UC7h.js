import{r as d,o as Ae,j as e,C as Be}from"./index-SVRFFNc9.js";import{S as h}from"./sweetalert2.esm.all-D3pEHXw3.js";import{C as x}from"./index.esm-DWwMdKxH.js";import{F as Ie,i as ve,a as De,b as Te,l as Re}from"./es-CNjOA_h5.js";import{E as X}from"./jspdf.plugin.autotable-gke1D7B3.js";import{u as H,w as qe}from"./xlsx-lwdk4T0U.js";import{l as ee}from"./logo_saint_patrick-xw7Wl8f3.js";import{u as He}from"./usePermission-BCWksQX7.js";import ze from"./AccessDenied-yaDW3Jao.js";import{C as $e}from"./CContainer-BdNP0s3v.js";import{C as f,a as u}from"./CRow-Bf67u6lu.js";import{C as Oe}from"./CInputGroup-D-McUFva.js";import{C as Le}from"./CInputGroupText-Cfu0fzaY.js";import{c as Ue}from"./cil-search-CDkY_4k-.js";import{C as j}from"./CFormInput-B_gylY64.js";import{a as C}from"./CButton-D9GPTbB6.js";import{c as Me}from"./cil-plus-D8mtC-W5.js";import{C as Ve,a as Ge,b as We,c as oe}from"./CDropdownToggle-DlfIUTmX.js";import{c as z}from"./cil-file-CeQgYs_D.js";import{C as Ye}from"./CAlert-B4fM1kpi.js";import{C as _,a as k,b as A,c as re}from"./CModalHeader-Bhtr3bZe.js";import{C as B}from"./CModalTitle-M2mBvD_5.js";import{C as $,a as te}from"./CCardBody-BwCgYaTs.js";import{C as ae}from"./CCardHeader-C_B6DycW.js";import{C as ie}from"./CBadge-DJ5RQlFd.js";import{c as se}from"./cil-pen-53d2I-C-.js";import{C as Je}from"./CForm-CYRkMwLo.js";import{C as b}from"./CFormLabel-szm2Dda9.js";import{c as Ze}from"./cil-save-CHBg7z_U.js";import"./CFormControlWrapper-OEJgTi6e.js";import"./CFormControlValidation-CtDkyDfm.js";import"./CConditionalPortal-DwBsYzTA.js";import"./CBackdrop-BbuVwMMD.js";const vo=()=>{const{canSelect:ne,canDelete:Ke,canInsert:le,canUpdate:ce}=He("Solicitud_admin"),[y,de]=d.useState([]),[he,O]=d.useState(!0),[L,pe]=d.useState(""),[U,S]=d.useState(!1),[t,I]=d.useState(null),[ue,E]=d.useState(!1),[Qe,me]=d.useState(!1),[Ce,N]=d.useState(!1),[xe,M]=d.useState(""),[V,v]=d.useState([]),[s,w]=d.useState({title:"",description:"",personaRequerida:"",fecha:"",horaInicio:"",horaFin:"",Cod_persona:""}),[D,G]=d.useState(!1);Ae(),d.useEffect(()=>{F();const o=setInterval(F,15e3);return()=>clearInterval(o)},[]);const F=async()=>{O(!0);try{const o=await fetch("http://localhost:4000/api/Solicitud_admin/solicitudess");if(!o.ok)throw new Error("Error al obtener las solicitudes");const r=await o.json(),i=(Array.isArray(r)?r:[]).map(a=>({id:a.Cod_solicitud||"",title:a.Nombre_solicitud||"SIN TÍTULO",start:a.Fecha_solicitud||"",end:a.Fecha_solicitud||"",description:a.Asunto||"SIN ASUNTO",personaRequerida:a.Persona_requerida||"DESCONOCIDO",horaInicio:a.Hora_Inicio?a.Hora_Inicio.slice(0,5):"00:00",horaFin:a.Hora_Fin?a.Hora_Fin.slice(0,5):"00:00",estado:a.Estado||"Pendiente",important:a.Importante===1,Cod_persona:a.Cod_persona||""}));de(i),v(i)}catch(o){pe(o.message),h.fire({icon:"error",title:"Error",text:`No se pudieron cargar las solicitudes. ${o.message}`,confirmButtonColor:"#6C8E58"})}finally{O(!1)}},ge=o=>{switch(o){case"Pendiente":return"rgba(255, 204, 102, 0.8)";case"Finalizada":return"rgba(102, 187, 106, 0.8)";case"Cancelada":return"rgba(239, 83, 80, 0.8)";case"Activo":return"rgba(41, 121, 255, 0.9)";default:return"rgba(158, 158, 158, 0.8)"}},T=o=>{const{name:r,value:i}=o.target,a={title:50,description:200,personaRequerida:100},l=i.replace(/[0-9]/g,"").replace(/[^A-Z\s]/gi,"").toUpperCase().replace(/([A-Z])\1{2,}/g,"$1$1");if(l.length>a[r]){h.fire({icon:"warning",title:"Advertencia",text:`El campo ${r} no puede exceder los ${a[r]} caracteres.`,confirmButtonColor:"#6C8E58"});return}w(p=>({...p,[r]:l}))},W=async o=>{if(!o){console.warn("No hay cita seleccionada para exportar.");return}const r=new X("landscape"),i=new Image;i.src=ee,i.onload=async()=>{r.addImage(i,"PNG",10,10,30,30),r.setFontSize(18),r.setTextColor(0,102,51),r.text("SAINT PATRICK'S ACADEMY",r.internal.pageSize.width/2,20,{align:"center"}),r.setFontSize(14),r.text("Detalles de la Cita",r.internal.pageSize.width/2,30,{align:"center"}),r.setFontSize(10),r.setTextColor(100),r.text("Casa Club del periodista, Colonia del Periodista",r.internal.pageSize.width/2,40,{align:"center"}),r.text("Teléfono: (504) 2234-8871",r.internal.pageSize.width/2,45,{align:"center"}),r.text("Correo: info@saintpatrickacademy.edu",r.internal.pageSize.width/2,50,{align:"center"}),r.setLineWidth(.5),r.setDrawColor(0,102,51),r.line(10,55,r.internal.pageSize.width-10,55);let a={...o};try{const c=await fetch(`http://localhost:4000/api/Solicitud_admin/solicitudes-persona/${o.id}`);if(!c.ok)throw new Error("Error al obtener detalles de la solicitud.");const m=await c.json();a={...a,Persona_Nombre:m.Persona_Nombre||"N/A",Persona_Apellido:m.Persona_Apellido||"",Persona_Correo:m.Persona_Correo||"Correo no disponible"}}catch(c){console.error("Error fetching details for selected cita:",c)}r.autoTable({startY:60,head:[["Campo","Valor"]],body:[["Título",a.title||"Título no disponible"],["Asunto",a.description||"Sin descripción"],["Persona Requerida",a.personaRequerida||"No especificada"],["Creador de la Cita",`${a.Persona_Nombre||"Nombre no disponible"} ${a.Persona_Apellido||""}`.trim()],["Correo Electrónico",a.Persona_Correo||"Correo no disponible"],["Fecha",a.start||"Fecha no disponible"],["Hora Inicio",a.horaInicio||"Hora no disponible"],["Hora Fin",a.horaFin||"Hora no disponible"],["Estado",a.estado||"Estado no disponible"]],headStyles:{fillColor:[0,102,51],textColor:[255,255,255],fontSize:10},styles:{fontSize:10,cellPadding:3},alternateRowStyles:{fillColor:[240,248,255]}});const l=new Date,p=l.toLocaleDateString(),g=l.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});r.setFontSize(10),r.setTextColor(100),r.text(`Fecha y hora de generación: ${p} ${g}`,10,r.internal.pageSize.height-10);const P=r.output("blob"),n=URL.createObjectURL(P);window.open(n,"_blank")},i.onerror=()=>{console.warn("No se pudo cargar el logo. El PDF se generará sin el logo.")}},R=o=>{const{name:r,value:i}=o.target;w(a=>({...a,[r]:i}))},fe=o=>{const r=o.target.value.toLowerCase();M(r);const i=y.filter(a=>a.title.toLowerCase().includes(r)||a.start.includes(r));v(i)},je=()=>{M(""),v(y)},be=async o=>{const r=parseInt(o.event.id,10),i=y.find(a=>a.id===r);if(i.estado==="Pendiente")try{const a=await fetch(`http://localhost:4000/api/Solicitud_admin/solicitudes-persona/${r}`);if(!a.ok)throw new Error("Error al obtener detalles de la solicitud.");const l=await a.json();I({...i,...l}),N(!0)}catch(a){console.error("Error al cargar los detalles de la cita:",a.message),h.fire({icon:"error",title:"Error",text:`No se pudieron cargar los detalles de la cita. ${a.message}`,confirmButtonColor:"#6C8E58"})}else try{const a=await ye(r);I({...i,...a}),S(!0)}catch(a){console.error("Error al cargar los detalles de la cita:",a.message)}},ye=async o=>{try{const r=await fetch(`http://localhost:4000/api/Solicitud_admin/solicitudes-persona/${o}`);if(!r.ok)throw r.status===404?new Error("Solicitud no encontrada."):new Error("Error al obtener la solicitud con persona.");const i=await r.json(),a=`${i.Persona_Nombre} ${i.Persona_Apellido}`;return{...i,Persona_NombreCompleto:a}}catch(r){throw console.error("Error en fetchSolicitudConPersona:",r.message),h.fire({icon:"error",title:"Error",text:`No se pudo obtener la cita. ${r.message}`,confirmButtonColor:"#6C8E58"}),r}},we=()=>{w({title:"",description:"",personaRequerida:"",fecha:"",horaInicio:"",horaFin:"",Cod_persona:""}),I(null),E(!0)},Se=async()=>{try{const o={Cod_persona:t.Cod_persona,Nombre_solicitud:t.title,Fecha_solicitud:t.start,Hora_Inicio:t.horaInicio,Hora_Fin:t.horaFin,Asunto:t.description,Persona_requerida:t.personaRequerida,estado:"Activo"},r=await fetch(`http://localhost:4000/api/Solicitud_admin/solicitudes/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!r.ok){const i=await r.json();throw new Error(i.message||"Error al aceptar la cita.")}h.fire({icon:"success",title:"Aceptada",text:"La cita ha sido aceptada y está ahora activa.",confirmButtonColor:"#4B6251",timer:3e3,timerProgressBar:!0,showConfirmButton:!1,allowOutsideClick:!1}),await F(),N(!1)}catch(o){h.fire({icon:"error",title:"Error",text:`No se pudo aceptar la cita. ${o.message}`,confirmButtonColor:"#6C8E58",timer:2e3,timerProgressBar:!0,showConfirmButton:!1,allowOutsideClick:!1})}},Y=()=>{if(t.estado==="Finalizada"){h.fire({icon:"warning",title:"Advertencia",text:"No puedes editar esta cita si ya está finalizada.",confirmButtonColor:"#6C8E58",timer:2e3,timerProgressBar:!0,showConfirmButton:!1,allowOutsideClick:!1});return}w({title:t.title,description:t.description,personaRequerida:t.personaRequerida,fecha:t.start,horaInicio:t.horaInicio,horaFin:t.horaFin,estado:t.estado}),S(!1),E(!0)},Ee=async o=>{o.preventDefault();const{title:r,description:i,personaRequerida:a,fecha:l,horaInicio:p,horaFin:g,estado:P,motivoCancelacion:n}=s;if(!r||!i||!a||!l||!p||!g){h.fire({icon:"warning",title:"Advertencia",text:"Todos los campos son obligatorios.",confirmButtonColor:"#6C8E58"});return}const c=new Date,m=new Date(l);if(m<c.setHours(0,0,0,0)){h.fire({icon:"warning",title:"Advertencia",text:"No puedes editar citas para fechas pasadas.",confirmButtonColor:"#6C8E58",timer:3e3,timerProgressBar:!0,showConfirmButton:!1,allowOutsideClick:!1});return}const[Z,Pe]=p.split(":").map(Number),[K,_e]=g.split(":").map(Number);if(m.toDateString()===new Date().toDateString()&&(p<=c.toTimeString().slice(0,5)||g<=c.toTimeString().slice(0,5))){h.fire({icon:"warning",title:"Advertencia",text:"No puedes programar citas en horas pasadas para hoy.",confirmButtonColor:"#6C8E58",timer:3e3,timerProgressBar:!0,showConfirmButton:!1,allowOutsideClick:!1});return}if(K<Z||K===Z&&_e<=Pe){h.fire({icon:"warning",title:"Advertencia",text:"La hora de fin debe ser mayor que la hora de inicio.",confirmButtonColor:"#6C8E58",timer:3e3,timerProgressBar:!0,showConfirmButton:!1,allowOutsideClick:!1});return}G(!0);try{const q={Cod_persona:t?t.Cod_persona:s.Cod_persona||"1",Nombre_solicitud:s.title||"SIN TÍTULO",Fecha_solicitud:s.fecha||"1899-11-30",Hora_Inicio:s.horaInicio,Hora_Fin:s.horaFin,Asunto:s.description||"SIN ASUNTO",Persona_requerida:s.personaRequerida||"DESCONOCIDO",estado:s.estado||"Pendiente",motivoCancelacion:s.estado==="Cancelada"?s.motivoCancelacion:null},Q=await fetch(t?`http://localhost:4000/api/Solicitud_admin/solicitudes/${t.id}`:"http://localhost:4000/api/Solicitud_admin/solicitudes",{method:t?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(q)});if(!Q.ok){const ke=await Q.json();throw new Error(ke.message||"Error al procesar la solicitud.")}h.fire({icon:"success",title:t?"Actualizado":"Creado",text:t?"La cita fue actualizada correctamente.":"La cita fue creada correctamente.",confirmButtonColor:"#4B6251",timer:3e3,timerProgressBar:!0,showConfirmButton:!1,allowOutsideClick:!1}),E(!1),await F()}catch(q){h.fire({icon:"error",title:"Error",text:q.message,confirmButtonColor:"#6C8E58"})}finally{G(!1)}},J=()=>{D||(E(!1),me(!1))},Ne=async()=>{const o=new X("landscape");if(y.length===0){console.warn("No hay datos de citas para exportar.");return}const r=new Image;r.src=ee,r.onload=async()=>{o.addImage(r,"PNG",10,10,30,30),o.setFontSize(18),o.setTextColor(0,102,51),o.text("SAINT PATRICK'S ACADEMY",o.internal.pageSize.width/2,20,{align:"center"}),o.setFontSize(14),o.text("Reporte Detallado de Citas",o.internal.pageSize.width/2,30,{align:"center"}),o.setFontSize(10),o.setTextColor(100),o.text("Casa Club del periodista, Colonia del Periodista",o.internal.pageSize.width/2,40,{align:"center"}),o.text("Teléfono: (504) 2234-8871",o.internal.pageSize.width/2,45,{align:"center"}),o.text("Correo: info@saintpatrickacademy.edu",o.internal.pageSize.width/2,50,{align:"center"}),o.setLineWidth(.5),o.setDrawColor(0,102,51),o.line(10,55,o.internal.pageSize.width-10,55);const i=await Promise.all(y.map(async n=>{try{const c=await fetch(`http://localhost:4000/api/Solicitud_admin/solicitudes-persona/${n.id}`);if(!c.ok)throw new Error("Error al obtener detalles de la solicitud.");const m=await c.json();return{...n,Persona_Nombre:m.Persona_Nombre||"N/A",Persona_Apellido:m.Persona_Apellido||"",Persona_Correo:m.Persona_Correo||"Correo no disponible"}}catch(c){return console.error("Error fetching details:",c),n}}));o.autoTable({startY:60,head:[["Título","Asunto","Persona Requerida","Creador de la Cita","Correo Electrónico","Fecha","Hora Inicio","Hora Fin","Estado"]],body:i.map(n=>[n.title||"Título no disponible",n.description||"Sin descripción",n.personaRequerida||"No especificada",`${n.Persona_Nombre||"Nombre no disponible"} ${n.Persona_Apellido||""}`.trim(),n.Persona_Correo||"Correo no disponible",n.start||"Fecha no disponible",n.horaInicio||"Hora no disponible",n.horaFin||"Hora no disponible",n.estado||"Estado no disponible"]),headStyles:{fillColor:[0,102,51],textColor:[255,255,255],fontSize:10},styles:{fontSize:10,cellPadding:3},alternateRowStyles:{fillColor:[240,248,255]}});const a=new Date,l=a.toLocaleDateString(),p=a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});o.setFontSize(10),o.setTextColor(100),o.text(`Fecha y hora de generación: ${l} ${p}`,10,o.internal.pageSize.height-10);const g=o.output("blob"),P=URL.createObjectURL(g);window.open(P,"_blank")},r.onerror=()=>{console.warn("No se pudo cargar el logo. El PDF se generará sin el logo.")}},Fe=()=>{const o=H.json_to_sheet(y.map((i,a)=>{var l,p;return{"#":a+1,Título:i.title.toUpperCase(),Asunto:i.description.toUpperCase(),"Persona Requerida":i.personaRequerida.toUpperCase(),"Creador de la Cita":`${((l=i.Persona_Nombre)==null?void 0:l.toUpperCase())||"N/A"} ${((p=i.Persona_Apellido)==null?void 0:p.toUpperCase())||""}`,"Correo Electrónico":i.Persona_Correo||"Correo no disponible",Fecha:i.start,"Hora Inicio":i.horaInicio,"Hora Fin":i.horaFin,Estado:i.estado}})),r=H.book_new();H.book_append_sheet(r,o,"Reporte de Citas"),qe(r,"Reporte_Citas.xlsx")};return ne?e.jsxs($e,{fluid:!0,style:{backgroundColor:"#F8F9FA",padding:"20px"},children:[e.jsx(f,{className:"mb-4",children:e.jsx(u,{className:"text-center",children:e.jsx("h1",{style:{color:"#6C757D",fontWeight:"bold",fontSize:"2.5rem"},children:"Gestión de Citas"})})}),e.jsxs(f,{className:"mb-3 align-items-center",children:[e.jsx(u,{md:6,children:e.jsxs(Oe,{children:[e.jsx(Le,{style:{backgroundColor:"#4B6251",color:"white"},children:e.jsx(x,{icon:Ue})}),e.jsx(j,{placeholder:"Buscar por título o fecha",value:xe,onChange:fe,style:{borderColor:"#4B6251"}}),e.jsx(C,{color:"secondary",onClick:je,style:{backgroundColor:"#6C8E58",color:"white",borderColor:"#6C8E58"},children:"Limpiar"})]})}),e.jsx(u,{md:3,children:e.jsx("span",{style:{color:"#6C757D"},children:`Citas encontradas: ${V.length}`})}),e.jsxs(u,{md:3,className:"text-end",children:[le&&e.jsxs(C,{color:"success",onClick:we,style:{backgroundColor:"#4B6251",color:"white",borderColor:"#4B6251"},children:[e.jsx(x,{icon:Me})," Nueva Cita"]}),e.jsxs(Ve,{className:"d-inline ms-2",children:[e.jsxs(Ge,{style:{backgroundColor:"#6C8E58",color:"white"},children:[e.jsx(x,{icon:z})," Reporte"]}),e.jsxs(We,{children:[e.jsx(oe,{onClick:Ne,children:"Exportar a PDF"}),e.jsx(oe,{onClick:Fe,children:"Exportar a Excel"})]})]})]})]}),he?e.jsx(Be,{color:"secondary"}):L?e.jsx(Ye,{color:"danger",children:L}):e.jsx("div",{className:"calendar-container",style:{maxWidth:"1500px",margin:"0 auto",boxShadow:"0 8px 16px rgba(0,0,0,0.2)",borderRadius:"8px",backgroundColor:"#FFFFFF",padding:"15px"},children:e.jsx(Ie,{plugins:[ve,De,Te],initialView:"dayGridMonth",locale:Re,headerToolbar:{left:"prev today next",center:"title",right:"dayGridMonth,timeGridDay"},events:V.map(o=>({...o,id:o.id.toString(),backgroundColor:ge(o.estado),borderColor:"#4B6251",textColor:"#000000"})),eventContent:o=>o.view.type==="timeGridDay"?e.jsxs("span",{children:[e.jsx("strong",{children:o.event.title}),e.jsx("br",{}),o.event.extendedProps.horaInicio," - ",o.event.extendedProps.horaFin]}):e.jsx("span",{children:o.event.title}),eventClick:be,editable:!0,height:"auto",contentHeight:"auto",titleFormat:{year:"numeric",month:"long"},dayHeaderClassNames:"fc-day-header",dayHeaderContent:o=>e.jsx("span",{style:{color:"#4B6251",fontWeight:"bold"},children:o.text})})}),e.jsxs(_,{visible:U,onClose:()=>S(!1),backdrop:"static",children:[e.jsx(k,{closeButton:!0,style:{backgroundColor:"#6C8E58",color:"white"},children:e.jsx(B,{children:"Detalles de la Cita"})}),e.jsx(A,{children:t&&e.jsxs($,{children:[e.jsxs(ae,{children:[e.jsx("strong",{children:t.title}),t.important&&e.jsx(ie,{color:"danger",className:"ms-2",children:"Importante"})]}),e.jsxs(te,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Asunto:"})," ",t.description]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Persona Requerida:"})," ",t.personaRequerida]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Fecha:"})," ",t.start]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Hora de Inicio:"})," ",t.horaInicio]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Hora de Fin:"})," ",t.horaFin]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Estado:"})," ",t.estado]}),ce&&e.jsxs(C,{color:"warning",onClick:Y,style:{backgroundColor:"#6C8E58",color:"white"},children:[e.jsx(x,{icon:se})," Editar"]}),e.jsxs(C,{color:"secondary",className:"ms-2",onClick:()=>W(t),style:{backgroundColor:"#6C8E58",color:"white",borderColor:"#6C8E58"},children:[e.jsx(x,{icon:z})," Exportar PDF"]})]})]})})]}),e.jsxs(_,{visible:Ce,onClose:()=>N(!1),backdrop:"static",children:[e.jsx(k,{closeButton:!0,style:{backgroundColor:"#4B6251",color:"white"},children:e.jsx(B,{children:"Aceptar Cita"})}),e.jsx(A,{children:t?e.jsxs("div",{children:[e.jsx("p",{children:e.jsx("strong",{children:"¿Estás seguro de que deseas aceptar la cita?"})}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Nombre de la cita:"})," ",t.title||"No disponible"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Persona que la creó:"})," ",`${t.Persona_Nombre||"No disponible"} ${t.Persona_Apellido||""}`]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Correo electrónico:"})," ",t.Persona_Correo||"No disponible"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Fecha:"})," ",t.start||"No disponible"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Hora de inicio:"})," ",t.horaInicio||"No disponible"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Hora de fin:"})," ",t.horaFin||"No disponible"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Asunto:"})," ",t.description||"No disponible"]})]})]}):e.jsx("p",{children:"No se encontraron detalles para esta cita."})}),e.jsxs(re,{children:[e.jsx(C,{color:"success",onClick:Se,style:{backgroundColor:"#4B6251",color:"white"},children:"Aceptar"}),e.jsx(C,{color:"secondary",onClick:()=>N(!1),children:"Cancelar"})]})]}),e.jsxs(_,{visible:ue,onClose:J,backdrop:"static",children:[e.jsx(k,{closeButton:!0,style:{backgroundColor:"#4B6251",color:"white"},children:e.jsx(B,{children:t?"Editar Cita":"Crear Nueva Cita"})}),e.jsx(A,{children:e.jsx(Je,{onSubmit:Ee,children:e.jsxs($,{className:"p-3",style:{border:"1px solid #4B6251"},children:[e.jsx(f,{className:"mb-3",children:e.jsxs(u,{md:12,children:[e.jsx(b,{children:"Nombre de la Cita"}),e.jsx(j,{type:"text",name:"title",value:s.title,onChange:T,placeholder:"Ejemplo: REUNIÓN DE PROYECTO",required:!0,style:{borderColor:"#6C8E58"}})]})}),e.jsx(f,{className:"mb-3",children:e.jsxs(u,{md:12,children:[e.jsx(b,{children:"Asunto"}),e.jsx(j,{type:"text",name:"description",value:s.description,onChange:T,placeholder:"Ejemplo: DISCUTIR AVANCES DEL PROYECTO",required:!0,style:{borderColor:"#6C8E58"}})]})}),e.jsx(f,{className:"mb-3",children:e.jsxs(u,{md:12,children:[e.jsx(b,{children:"Persona Requerida"}),e.jsx(j,{type:"text",name:"personaRequerida",value:s.personaRequerida,onChange:T,placeholder:"Ejemplo: JUAN PÉREZ",required:!0,style:{borderColor:"#6C8E58"}})]})}),e.jsxs(f,{className:"mb-3",children:[e.jsxs(u,{md:4,children:[e.jsx(b,{children:"Fecha"}),e.jsx(j,{type:"date",name:"fecha",value:s.fecha,onChange:R,required:!0,style:{borderColor:"#6C8E58"}})]}),e.jsxs(u,{md:4,children:[e.jsx(b,{children:"Hora de Inicio"}),e.jsx(j,{type:"time",name:"horaInicio",value:s.horaInicio,onChange:R,required:!0,style:{borderColor:"#6C8E58"}})]}),e.jsxs(u,{md:4,children:[e.jsx(b,{children:"Hora de Fin"}),e.jsx(j,{type:"time",name:"horaFin",value:s.horaFin,onChange:R,required:!0,style:{borderColor:"#6C8E58"}})]})]}),t&&e.jsx(f,{className:"mb-3",children:e.jsxs(u,{md:12,children:[e.jsx(b,{children:"Estado"}),e.jsxs("div",{className:"form-check form-switch",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"estadoSwitch",checked:s.estado==="Cancelada",onChange:()=>w(o=>({...o,estado:o.estado==="Cancelada"?"Pendiente":"Cancelada"})),style:{width:"3rem",height:"1.5rem",backgroundColor:s.estado==="Cancelada"?"red":"",border:s.estado==="Cancelada"?"1px solid red":""}}),e.jsx("label",{className:"form-check-label",htmlFor:"estadoSwitch",style:{fontSize:"1.25rem",color:s.estado==="Cancelada"?"red":"green",fontWeight:"bold"},children:s.estado==="Cancelada"?"Cancelada":"Activo"})]})]})}),e.jsxs(re,{children:[e.jsxs(C,{type:"submit",color:"success",style:{backgroundColor:"#4B6251",color:"white"},disabled:D,children:[e.jsx(x,{icon:Ze})," ",D?"Guardando...":"Guardar"]}),e.jsx(C,{color:"secondary",onClick:J,children:"Cancelar"})]})]})})})]}),e.jsxs(_,{visible:U,onClose:()=>S(!1),backdrop:"static",children:[e.jsx(k,{closeButton:!0,style:{backgroundColor:"#6C8E58",color:"white"},children:e.jsx(B,{children:"Detalles de la Cita"})}),e.jsx(A,{children:t&&e.jsxs($,{children:[e.jsxs(ae,{children:[e.jsx("h5",{style:{fontWeight:"bold",margin:0},children:t.title||"Título no disponible"}),t.important&&e.jsx(ie,{color:"danger",className:"ms-2",style:{fontSize:"0.8rem"},children:"Importante"})]}),e.jsxs(te,{children:[e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsx("strong",{style:{display:"block"},children:"Asunto:"}),e.jsx("span",{children:t.description||"Sin descripción"})]}),e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsx("strong",{style:{display:"block"},children:"Persona Requerida:"}),e.jsx("span",{children:t.personaRequerida||"No especificada"})]}),e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsx("strong",{style:{display:"block"},children:"Persona que creó la cita:"}),e.jsx("span",{children:`${t.Persona_Nombre||"Nombre no disponible"} ${t.Persona_Apellido||""}`})]}),e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsx("strong",{style:{display:"block"},children:"Correo Electrónico:"}),e.jsx("span",{children:t.Persona_Correo||"Correo no disponible"})]}),e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsx("strong",{style:{display:"block"},children:"Fecha:"}),e.jsx("span",{children:t.start||"Fecha no disponible"})]}),e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsx("strong",{style:{display:"block"},children:"Hora de Inicio:"}),e.jsx("span",{children:t.horaInicio||"Hora no disponible"})]}),e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsx("strong",{style:{display:"block"},children:"Hora de Fin:"}),e.jsx("span",{children:t.horaFin||"Hora no disponible"})]}),e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsx("strong",{style:{display:"block"},children:"Estado:"}),e.jsx("span",{style:{color:t.estado==="Cancelada"?"red":"green",fontWeight:"bold"},children:t.estado||"Estado no disponible"})]}),e.jsxs("div",{style:{marginTop:"20px",display:"flex",gap:"10px"},children:[e.jsxs(C,{color:"warning",onClick:Y,style:{backgroundColor:"#6C8E58",color:"white"},children:[e.jsx(x,{icon:se})," Editar"]}),e.jsxs(C,{color:"secondary",onClick:()=>W(t),style:{backgroundColor:"#6C8E58",color:"white",borderColor:"#6C8E58"},children:[e.jsx(x,{icon:z})," Exportar PDF"]})]})]})]})})]})]}):e.jsx(ze,{})};export{vo as default};
