import{r as t,A as h,i as A}from"./index-SVRFFNc9.js";const S=r=>{const{auth:c}=t.useContext(h),[o,l]=t.useState(null),[d,s]=t.useState(!0),[f,u]=t.useState(null);t.useContext(h);const i=t.useCallback(async()=>{if(!c||!r){s(!1);return}try{const a=localStorage.getItem("token");if(!a)throw new Error("No token available");const x={headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},params:{Cod_rol:c.cod_rol,Nom_objeto:r}},n=await A.get("http://74.50.68.87:4000/api/usuarios/permisos",x);n.data&&n.data.permissions&&n.data.permissions.length>0?l(n.data.permissions[0]):l(null),u(null)}catch(a){console.error("Error al obtener permisos:",a),u(a),l(null)}finally{s(!1)}},[c,r]);t.useEffect(()=>{i()},[i]);const e=(o==null?void 0:o.Permiso_Modulo)==="1"&&(o==null?void 0:o.Permiso_Consultar)==="1",_=!!(e&&(o==null?void 0:o.Permiso_Insercion)==="1"),P=!!(e&&(o==null?void 0:o.Permiso_Actualizacion)==="1"),g=!!(e&&(o==null?void 0:o.Permiso_Eliminacion)==="1"),B=(o==null?void 0:o.Permiso_Nav)==="1",C=(o==null?void 0:o.Permiso_Ver)==="1";return{canSelect:e,canInsert:_,canUpdate:P,canDelete:g,canNavigate:B,canView:C,hasAccess:e,loading:d,error:f,permissions:o}};export{S as u};
